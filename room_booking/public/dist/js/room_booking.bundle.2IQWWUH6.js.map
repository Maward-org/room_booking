{
  "version": 3,
  "sources": ["../../../../../apps/room_booking/room_booking/public/js/room_selector.js", "../../../../../apps/room_booking/room_booking/public/js/room_explorer.js", "../../../../../apps/room_booking/room_booking/public/js/booking_manager.js", "../../../../../apps/room_booking/room_booking/public/js/booking_cart.js", "../../../../../apps/room_booking/room_booking/public/js/booking_dialog.js", "../../../../../apps/room_booking/room_booking/public/js/helpers.js", "../../../../../apps/room_booking/room_booking/public/js/room_booking_app.js"],
  "sourcesContent": ["frappe.provide(\"room_booking.RoomBooking\");\n\nroom_booking.RoomBooking.RoomSelector = class {\n    constructor({ wrapper, events = {}, settings = {} }) {\n        this.wrapper = $(wrapper);\n        this.events = events;\n        this.settings = settings;\n        this.state = { \n            branches: [], \n            slotsData: {}, \n            isLoading: false,\n            currentDialog: null\n        };\n        this.init_component();\n    }\n\n    init_component() {\n        this.render();\n        this.add_styles();\n        this.load_branches();\n        this.bind_events();\n    }\n\n    render() {\n        this.wrapper.html(`\n            <div class=\"room-booking-container\">\n                <div class=\"row filter-section\">\n                    <div class=\"col-md-4\">\n                        <label><i class=\"fa fa-building\"></i> ${__('\u0627\u0644\u0641\u0631\u0639')}</label>\n                        <select class=\"form-control branch-filter\"></select>\n                    </div>\n                    <div class=\"col-md-4\">\n                        <label><i class=\"fa fa-calendar-day\"></i> ${__('\u0627\u0644\u062A\u0627\u0631\u064A\u062E')}</label>\n                        <input type=\"date\" class=\"form-control date-filter\" \n                               value=\"${frappe.datetime.get_today()}\" \n                               min=\"${frappe.datetime.get_today()}\">\n                    </div>\n                    <div class=\"col-md-4\">\n                        <label><i class=\"fa fa-users\"></i> ${__('\u0627\u0644\u0633\u0639\u0629')}</label>\n                        <select class=\"form-control capacity-filter\">\n                            <option value=\"\">${__('\u0627\u0644\u0643\u0644')}</option>\n                            <option value=\"5\">5+</option>\n                            <option value=\"10\">10+</option>\n                            <option value=\"20\">20+</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class=\"loading-state text-center\" style=\"display:none;\">\n                    <div class=\"spinner-border\"></div>\n                    <p>${__('\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u063A\u0631\u0641...')}</p>\n                </div>\n\n                <div class=\"room-list-container row mt-4\"></div>\n            </div>\n        `);\n    }\n\n    add_styles() {\n        if ($(\"#room-booking-style\").length) return;\n        const styles = `\n            <style id=\"room-booking-style\">\n                .room-booking-container {\n                    font-family: 'Tajawal', 'Segoe UI', sans-serif;\n                    direction: rtl;\n                    background-color: #f8f9fa;\n                    padding: 20px;\n                    border-radius: 10px;\n                    box-shadow: 0 2px 10px rgba(0,0,0,0.05);\n                }\n                \n                .filter-section {\n                    background-color: #fff;\n                    padding: 20px;\n                    border-radius: 8px;\n                    box-shadow: 0 2px 5px rgba(0,0,0,0.05);\n                    margin-bottom: 20px;\n                }\n                \n                .filter-section label {\n                    font-weight: 600;\n                    color: #495057;\n                    margin-bottom: 8px;\n                    display: block;\n                }\n                \n                .filter-section .form-control {\n                    border-radius: 6px;\n                    border: 1px solid #e0e0e0;\n                    padding: 10px 15px;\n                    height: auto;\n                }\n                \n                .room-list-container {\n                    margin: 0 -10px;\n                }\n                \n                .room-card {\n                    border: none;\n                    border-radius: 10px;\n                    overflow: hidden;\n                    box-shadow: 0 4px 12px rgba(0,0,0,0.08);\n                    transition: all 0.3s ease;\n                    margin-bottom: 20px;\n                    background-color: #fff;\n                }\n                \n                .room-card:hover {\n                    transform: translateY(-5px);\n                    box-shadow: 0 6px 16px rgba(0,0,0,0.12);\n                }\n                \n                .room-card-header {\n                    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);\n                    color: white;\n                    padding: 15px 20px;\n                    border-bottom: none;\n                }\n                \n                .room-card-header h5 {\n                    font-weight: 700;\n                    margin: 0;\n                }\n                \n                .room-card-body {\n                    padding: 20px;\n                }\n                \n                .room-card-body p {\n                    margin-bottom: 10px;\n                    color: #555;\n                }\n                \n                .room-card-body i {\n                    margin-left: 8px;\n                    color: #6c757d;\n                }\n                \n                .room-card hr {\n                    margin: 15px 0;\n                    border-color: #eee;\n                }\n                \n                .slots-grid {\n                    display: grid;\n                    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n                    gap: 12px;\n                    margin-top: 15px;\n                }\n                \n                .time-slot {\n                    padding: 12px;\n                    border-radius: 8px;\n                    text-align: center;\n                    cursor: pointer;\n                    font-size: 14px;\n                    border: 1px solid transparent;\n                    transition: all 0.2s ease;\n                    position: relative;\n                    overflow: hidden;\n                }\n                \n                .time-slot.available {\n                    background-color: #f0f9ff;\n                    border-color: #d1e7ff;\n                    color: #0d6efd;\n                }\n                \n                .time-slot.available:hover {\n                    background-color: #e2f0ff;\n                    transform: translateY(-2px);\n                    box-shadow: 0 4px 8px rgba(13, 110, 253, 0.15);\n                }\n                \n                .time-slot.available.selected {\n                    background: linear-gradient(135deg, #0d6efd 0%, #0b5ed7 100%);\n                    color: white;\n                    font-weight: bold;\n                    border-color: #0b5ed7;\n                }\n                \n                .time-slot.booked {\n                    background-color: #fff8f0;\n                    border-color: #ffe8cc;\n                    color: #fd7e14;\n                }\n                \n                .time-slot.booked:hover {\n                    background-color: #ffeedb;\n                }\n                \n                .time-slot .slot-icon {\n                    margin-left: 5px;\n                }\n                \n                .time-slot .small {\n                    font-size: 12px;\n                    opacity: 0.9;\n                }\n                \n                .badge {\n                    font-weight: 500;\n                    padding: 5px 10px;\n                    border-radius: 50px;\n                }\n                \n                .badge-success {\n                    background-color: #198754;\n                }\n                \n                .badge-info {\n                    background-color: #0dcaf0;\n                }\n                \n                .loading-state {\n                    padding: 40px 0;\n                }\n                \n                .loading-state .spinner-border {\n                    width: 3rem;\n                    height: 3rem;\n                    border-width: 0.25em;\n                    color: #6a11cb;\n                }\n                \n                .loading-state p {\n                    margin-top: 15px;\n                    font-size: 16px;\n                    color: #6c757d;\n                }\n                \n                .alert {\n                    border-radius: 8px;\n                    padding: 15px;\n                }\n                \n                /* Animation for slots */\n                @keyframes fadeIn {\n                    from { opacity: 0; transform: translateY(10px); }\n                    to { opacity: 1; transform: translateY(0); }\n                }\n                \n                .time-slot {\n                    animation: fadeIn 0.3s ease forwards;\n                }\n                \n                /* Responsive adjustments */\n                @media (max-width: 768px) {\n                    .slots-grid {\n                        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n                    }\n                    \n                    .filter-section .col-md-4 {\n                        margin-bottom: 15px;\n                    }\n                }\n            </style>\n        `;\n        $(\"head\").append(styles);\n    }\n\n    bind_events() {\n        this.wrapper.on('change', '.branch-filter, .date-filter, .capacity-filter', () => this.load_rooms());\n        this.wrapper.on('click', '.time-slot.available', (e) => this.handle_slot_click(e));\n        this.wrapper.on('click', '.time-slot.booked', (e) => this.handle_booked_slot_click(e));\n    }\n\n    // ... [\u0628\u0642\u064A\u0629 \u0627\u0644\u062F\u0648\u0627\u0644 \u062A\u0628\u0642\u0649 \u0643\u0645\u0627 \u0647\u064A \u0628\u062F\u0648\u0646 \u062A\u063A\u064A\u064A\u0631] ...\n    async load_branches() {\n        try {\n            const { message: branches = [] } = await frappe.call('room_booking.api.get_branches');\n            const $select = this.wrapper.find('.branch-filter').empty();\n            $select.append(`<option value=\"\">${__('\u0643\u0644 \u0627\u0644\u0641\u0631\u0648\u0639')}</option>`);\n            branches.forEach(b => $select.append(`<option value=\"${b}\">${b}</option>`));\n            this.load_rooms();\n        } catch (error) {\n            this.show_error(__('\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0641\u0631\u0648\u0639'));\n        }\n    }\n\n    async load_rooms() {\n        if (this.state.isLoading) return;\n        \n        this.set_loading(true);\n        this.clear_selection();\n        \n        try {\n            const filters = {\n                branch: this.wrapper.find('.branch-filter').val(),\n                date: this.wrapper.find('.date-filter').val(),\n                capacity: this.wrapper.find('.capacity-filter').val()\n            };\n            \n            const { message: rooms = [] } = await frappe.call({\n                method: 'room_booking.api.get_available_rooms_with_slots',\n                args: filters\n            });\n            \n            this.state.slotsData = {};\n            this.render_rooms(rooms);\n            \n        } catch (error) {\n            this.show_error(__('\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u063A\u0631\u0641'));\n        } finally {\n            this.set_loading(false);\n        }\n    }\n\n    render_rooms(rooms) {\n        const $container = this.wrapper.find('.room-list-container').empty();\n        \n        if (!rooms.length) {\n            $container.html(`\n                <div class=\"col-12\">\n                    <div class=\"alert alert-info\">\n                        <i class=\"fa fa-info-circle\"></i>\n                        ${__('\u0644\u0627 \u062A\u0648\u062C\u062F \u063A\u0631\u0641 \u0645\u062A\u0627\u062D\u0629 \u0644\u0644\u0634\u0631\u0648\u0637 \u0627\u0644\u0645\u062D\u062F\u062F\u0629')}\n                    </div>\n                </div>\n            `);\n            return;\n        }\n        \n        rooms.forEach(room => {\n            this.state.slotsData[room.name] = room.available_slots || [];\n            \n            const $card = $(`\n                <div class=\"col-md-6 col-lg-4\">\n                    <div class=\"card room-card h-100\">\n                        <div class=\"card-header room-card-header d-flex justify-content-between align-items-center\">\n                            <h5 class=\"mb-0\">\n                                <i class=\"fa fa-door-open\"></i> ${room.room_name}\n                            </h5>\n                            <span class=\"badge ${room.status === 'Available' ? 'badge-success' : 'badge-info'}\">\n                                ${room.status}\n                            </span>\n                        </div>\n                        <div class=\"card-body room-card-body\">\n                            <p><i class=\"fa fa-users\"></i> ${room.no_of_seats} ${__('\u0645\u0642\u0627\u0639\u062F')}</p>\n                            <p><i class=\"fa fa-money-bill-wave\"></i> \n                                ${this.format_currency(room.price_per_hour)}/${__('\u0633\u0627\u0639\u0629')}\n                            </p>\n                            <hr>\n                            <h6><i class=\"fa fa-clock\"></i> ${__('\u0627\u0644\u0641\u062A\u0631\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629')}</h6>\n                            <div class=\"slots-grid\" data-room=\"${room.name}\"></div>\n                        </div>\n                    </div>\n                </div>\n            `);\n            \n            $container.append($card);\n            this.render_slots(room.name);\n        });\n    }\n\n    render_slots(roomName) {\n        const slots = this.state.slotsData[roomName] || [];\n        const $container = this.wrapper.find(`.slots-grid[data-room=\"${roomName}\"]`).empty();\n        \n        if (!slots.length) {\n            $container.html(`\n                <div class=\"col-12\">\n                    <div class=\"alert alert-warning\">\n                        <i class=\"fa fa-exclamation-circle\"></i>\n                        ${__('\u0644\u0627 \u062A\u0648\u062C\u062F \u0641\u062A\u0631\u0627\u062A \u0645\u062A\u0627\u062D\u0629')}\n                    </div>\n                </div>\n            `);\n            return;\n        }\n        \n        slots.forEach(slot => {\n            const isBooked = (slot.status || '').toLowerCase() === 'booked';\n            const startTime = this.format_time(slot.start_time);\n            const endTime = this.format_time(slot.end_time);\n            const duration = this.calculate_duration(slot.start_time, slot.end_time);\n            \n            $container.append(`\n                <div class=\"time-slot ${isBooked ? 'booked' : 'available'}\" \n                     data-room=\"${roomName}\"\n                     data-start=\"${slot.start_time}\"\n                     data-end=\"${slot.end_time}\"\n                     data-status=\"${slot.status}\"\n                     data-price=\"${slot.price}\"\n                     data-booking-id=\"${slot.booking_id || ''}\">\n                    <div>\n                        <i class=\"fa fa-${isBooked ? 'lock' : 'calendar-alt'} slot-icon\"></i>\n                        ${startTime} - ${endTime}\n                    </div>\n                    <div class=\"small mt-1\">\n                        ${duration} ${__('\u0633\u0627\u0639\u0629')} \u2022 ${this.format_currency(slot.price)}\n                    </div>\n                </div>\n            `);\n        });\n    }\n\n    handle_slot_click(e) {\n        const $slot = $(e.currentTarget);\n        $slot.toggleClass('selected');\n        \n        const slotData = {\n            room: $slot.data('room'),\n            start: $slot.data('start'),\n            end: $slot.data('end'),\n            price: $slot.data('price'),\n            status: $slot.data('status'),\n            booking_id: $slot.data('booking-id')\n        };\n        \n        if ($slot.hasClass('selected')) {\n            this.state.selectedSlots.push(slotData);\n            this.show_booking_dialog(slotData);\n            this.wrapper.find('.time-slot.selected').not($slot).removeClass('selected');\n            this.state.selectedSlots = [slotData];\n        } else {\n            this.state.selectedSlots = this.state.selectedSlots.filter(s => \n                !(s.room === slotData.room && s.start === slotData.start)\n            );\n        }\n        \n        this.update_selection_summary();\n        \n        if (this.state.selectedSlots.length === 1 && this.events.slot_selected) {\n            this.events.slot_selected({\n                room: slotData.room,\n                slot: slotData,\n                is_booked: slotData.status === 'booked'\n            });\n        }\n    }\n\n    handle_booked_slot_click(e) {\n        const $slot = $(e.currentTarget);\n        const bookingInfo = {\n            room: $slot.data('room'),\n            start: $slot.data('start'),\n            end: $slot.data('end'),\n            booking_id: $slot.data('booking-id'),\n            status: $slot.data('status')\n        };\n\n        const dialog = new frappe.ui.Dialog({\n            title: __('\u062E\u064A\u0627\u0631\u0627\u062A \u0627\u0644\u062D\u062C\u0632'),\n            fields: [\n                {\n                    fieldname: 'action',\n                    fieldtype: 'Select',\n                    label: __('\u0627\u062E\u062A\u0631 \u0627\u0644\u0625\u062C\u0631\u0627\u0621'),\n                    options: [\n                        { label: __('\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062D\u062C\u0632'), value: 'update' },\n                        { label: __('\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u062C\u0632'), value: 'cancel' },\n                        { label: __('\u062A\u0641\u0631\u064A\u063A \u0627\u0644\u063A\u0631\u0641\u0629'), value: 'clear' }\n                    ],\n                    reqd: 1\n                }\n            ],\n            primary_action_label: __('\u062A\u0646\u0641\u064A\u0630'),\n            primary_action: async (values) => {\n                dialog.hide();\n\n                if(values.action === 'update') {\n                    this.open_update_booking_dialog(bookingInfo);\n                } else if(values.action === 'cancel') {\n                    await this.cancel_booking(bookingInfo.booking_id);\n                } else if(values.action === 'clear') {\n                    await this.clear_room(bookingInfo.room, this.wrapper.find('.date-filter').val());\n                }\n\n                this.reload_rooms();\n            }\n        });\n\n        dialog.show();\n    }\n\n    show_booking_dialog(slotData, is_update = false) {\n        if (this.state.currentDialog) {\n            this.state.currentDialog.hide();\n        }\n\n        const formatTimeForDisplay = (timeStr) => {\n            if (!timeStr) return '00:00';\n            const parts = timeStr.split(':');\n            return parts.length >= 2 ? `${parts[0]}:${parts[1]}` : '00:00';\n        };\n\n        const defaultCustomer = is_update ? slotData.customer_name || '' : '';\n        const defaultBookingDate = this.wrapper.find('.date-filter').val() || frappe.datetime.get_today();\n        const defaultStartTime = formatTimeForDisplay(slotData.start);\n        const defaultEndTime = formatTimeForDisplay(slotData.end);\n        const defaultHours = this.calculate_duration(slotData.start, slotData.end);\n        const defaultAmount = slotData.price ? parseFloat(slotData.price).toFixed(2) : '0.00';\n\n        const dialog = new frappe.ui.Dialog({\n            title: is_update ? __('\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062D\u062C\u0632') : __('\u062D\u062C\u0632 \u063A\u0631\u0641\u0629'),\n            fields: [\n                {\n                    label: __('\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064A\u0644'),\n                    fieldname: 'customer',\n                    fieldtype: 'Link',\n                    options: 'Customer',\n                    reqd: 1,\n                    default: defaultCustomer\n                },\n                {\n                    label: __('\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062D\u062C\u0632'),\n                    fieldname: 'booking_date',\n                    fieldtype: 'Date',\n                    default: defaultBookingDate,\n                    read_only: !is_update\n                },\n                {\n                    label: __('\u0648\u0642\u062A \u0627\u0644\u062F\u062E\u0648\u0644'),\n                    fieldname: 'start_time',\n                    fieldtype: 'Data',\n                    default: defaultStartTime,\n                    reqd: 1,\n                    description: __('\u0627\u0644\u062A\u0646\u0633\u064A\u0642: HH:mm (\u0645\u062B\u0627\u0644: 14:30)')\n                },\n                {\n                    label: __('\u0639\u062F\u062F \u0627\u0644\u0633\u0627\u0639\u0627\u062A'),\n                    fieldname: 'hours',\n                    fieldtype: 'Float',\n                    default: defaultHours,\n                    reqd: 1\n                },\n                {\n                    label: __('\u0648\u0642\u062A \u0627\u0644\u062E\u0631\u0648\u062C'),\n                    fieldname: 'end_time',\n                    fieldtype: 'Data',\n                    default: defaultEndTime,\n                    read_only: true\n                },\n                {\n                    label: __('\u0627\u0644\u0633\u0639\u0631'),\n                    fieldname: 'amount',\n                    fieldtype: 'Data',\n                    default: __('\u0631.\u0633') + ' ' + defaultAmount,\n                    read_only: true\n                },\n                {\n                    label: __('\u0645\u0644\u0627\u062D\u0638\u0627\u062A'),\n                    fieldname: 'notes',\n                    fieldtype: 'Text',\n                    default: slotData.notes || ''\n                }\n            ],\n            primary_action_label: is_update ? __('\u062A\u062D\u062F\u064A\u062B') : __('\u062D\u062C\u0632'),\n            primary_action: async (values) => {\n                if (!this.validateTimeFormat(values.start_time)) {\n                    frappe.msgprint(__('\u0635\u064A\u063A\u0629 \u0648\u0642\u062A \u0627\u0644\u062F\u062E\u0648\u0644 \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629. \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 HH:mm'));\n                    return;\n                }\n\n                values.start_time = this.format_time_for_backend(values.start_time);\n                values.end_time = this.format_time_for_backend(values.end_time);\n\n                this.set_loading(true);\n\n                try {\n                    if (is_update) {\n                        await frappe.call({\n                            method: 'room_booking.api.update_booking',\n                            args: {\n                                booking_id: slotData.booking_id,\n                                booking: JSON.stringify({\n                                    rental_room: slotData.room,\n                                    start_datetime: `${values.booking_date} ${values.start_time}`,\n                                    end_datetime: `${values.booking_date} ${values.end_time}`,\n                                    customer_name: values.customer,\n                                    notes: values.notes,\n                                    amount: values.amount.replace(/[^\\d.]/g, '')\n                                })\n                            },\n                            freeze: true\n                        });\n                        frappe.show_alert({ message: __('\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u062C\u0632 \u0628\u0646\u062C\u0627\u062D'), indicator: 'green' });\n                    } else {\n                        await frappe.call({\n                            method: 'room_booking.api.create_booking',\n                            args: {\n                                booking: [{\n                                    rental_room: slotData.room,\n                                    start_datetime: `${values.booking_date} ${values.start_time}`,\n                                    end_datetime: `${values.booking_date} ${values.end_time}`,\n                                    customer_name: values.customer,\n                                    notes: values.notes,\n                                    amount: values.amount.replace(/[^\\d.]/g, '')\n                                }]\n                            },\n                            freeze: true\n                        });\n                        frappe.show_alert({ message: __('\u062A\u0645 \u0627\u0644\u062D\u062C\u0632 \u0628\u0646\u062C\u0627\u062D'), indicator: 'green' });\n                    }\n\n                    dialog.hide();\n                    this.reload_rooms();\n\n                    if (is_update && this.events.booking_updated) {\n                        this.events.booking_updated(slotData.booking_id);\n                    }\n                    if (!is_update && this.events.booking_created) {\n                        this.events.booking_created();\n                    }\n\n                } catch (error) {\n                    frappe.msgprint({ title: __('\u062E\u0637\u0623'), message: error.message || error, indicator: 'red' });\n                } finally {\n                    this.set_loading(false);\n                }\n            }\n        });\n\n        dialog.fields_dict.start_time.$input.on('change', () => {\n            const timeValue = dialog.get_value('start_time');\n            if (!this.validateTimeFormat(timeValue)) {\n                frappe.msgprint(__('\u0635\u064A\u063A\u0629 \u0627\u0644\u0648\u0642\u062A \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629. \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 HH:mm (\u0645\u062B\u0627\u0644: 14:30)'));\n                dialog.set_value('start_time', '00:00');\n                return;\n            }\n            this.update_booking_times(dialog, slotData, 'start');\n        });\n\n        dialog.fields_dict.hours.$input.on('change', () => {\n            let hours = parseFloat(dialog.get_value('hours'));\n            if (isNaN(hours) || hours < 1 || hours > 24) {\n                frappe.msgprint(__('\u0639\u062F\u062F \u0627\u0644\u0633\u0627\u0639\u0627\u062A \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0628\u064A\u0646 1 \u0648 24'));\n                dialog.set_value('hours', 1);\n                hours = 1;\n            }\n            this.update_booking_times(dialog, slotData, 'hours');\n        });\n\n        dialog.show();\n        this.state.currentDialog = dialog;\n    }\n\n    validateTimeFormat(timeStr) {\n        if (!timeStr) return false;\n        const timeRegex = /^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/;\n        return timeRegex.test(timeStr);\n    }\n\n    format_time_for_backend(timeStr) {\n        if (!timeStr) return '00:00:00';\n        const parts = timeStr.split(':');\n        if (parts.length === 2) {\n            return `${parts[0]}:${parts[1]}:00`;\n        }\n        return timeStr;\n    }\n\n    update_booking_times(dialog, slotData, changedField) {\n        const startTime = dialog.get_value('start_time');\n        if (!this.validateTimeFormat(startTime)) {\n            return;\n        }\n\n        let hours = parseFloat(dialog.get_value('hours'));\n        hours = Math.max(1, Math.min(hours, 24));\n        \n        const endTime = this.calculate_end_time(startTime, hours);\n        dialog.set_value('end_time', endTime);\n        \n        const pricePerHour = slotData.price / this.calculate_duration(slotData.start, slotData.end);\n        const price = (hours * pricePerHour).toFixed(2);\n        dialog.set_value('amount', price);\n    }\n\n    calculate_end_time(startTime, hours) {\n        const [hoursPart, minutesPart] = startTime.split(':').map(Number);\n        const totalMinutes = hoursPart * 60 + minutesPart + Math.round(hours * 60);\n        \n        const endHours = Math.floor(totalMinutes / 60) % 24;\n        const endMinutes = totalMinutes % 60;\n        \n        return `${String(endHours).padStart(2, '0')}:${String(endMinutes).padStart(2, '0')}`;\n    }\n\n    async cancel_booking(booking_id) {\n        try {\n            await frappe.call({\n                method: 'room_booking.api.cancel_booking',\n                args: { booking_id },\n                freeze: true\n            });\n            frappe.show_alert({ message: __('\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u062C\u0632 \u0628\u0646\u062C\u0627\u062D'), indicator: 'green' });\n        } catch (error) {\n            frappe.msgprint({ title: __('\u062E\u0637\u0623'), message: __('\u0641\u0634\u0644 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u062C\u0632') + ': ' + error.message, indicator: 'red' });\n        }\n    }\n\n    async clear_room(room, date) {\n        try {\n            await frappe.call({\n                method: 'room_booking.api.clear_room',\n                args: { room, date },\n                freeze: true\n            });\n            frappe.show_alert({ message: __('\u062A\u0645 \u062A\u0641\u0631\u064A\u063A \u0627\u0644\u063A\u0631\u0641\u0629 \u0628\u0646\u062C\u0627\u062D'), indicator: 'green' });\n        } catch (error) {\n            frappe.msgprint({ title: __('\u062E\u0637\u0623'), message: __('\u0641\u0634\u0644 \u062A\u0641\u0631\u064A\u063A \u0627\u0644\u063A\u0631\u0641\u0629') + ': ' + error.message, indicator: 'red' });\n        }\n    }\n\n    open_update_booking_dialog(bookingInfo) {\n        const slotData = {\n            room: bookingInfo.room,\n            start: bookingInfo.start,\n            end: bookingInfo.end,\n            price: 0,\n            booking_id: bookingInfo.booking_id,\n            status: bookingInfo.status\n        };\n\n        this.show_booking_dialog(slotData, true);\n    }\n\n    update_selection_summary() {\n        const $summary = this.wrapper.find('.selection-summary');\n        \n        if (!this.state.selectedSlots.length) {\n            $summary.hide();\n            return;\n        }\n        \n        const firstSlot = this.state.selectedSlots[0];\n        \n        this.wrapper.find('.selected-period').text(\n            `${this.format_time(firstSlot.start)} - ${this.format_time(firstSlot.end)}`\n        );\n        \n        const duration = this.calculate_duration(firstSlot.start, firstSlot.end);\n        this.wrapper.find('.selected-duration').text(`${duration} ${__('\u0633\u0627\u0639\u0629')}`);\n        this.wrapper.find('.selected-price').text(this.format_currency(firstSlot.price));\n        \n        $summary.show();\n    }\n\n    clear_selection() {\n        this.state.selectedSlots = [];\n        this.wrapper.find('.selection-summary').hide();\n        this.wrapper.find('.time-slot').removeClass('selected');\n    }\n\n    set_loading(loading) {\n        this.state.isLoading = loading;\n        this.wrapper.find('.loading-state').toggle(loading);\n        this.wrapper.find('.filter-section, .room-list-container').toggle(!loading);\n    }\n\n    reload_rooms() {\n        this.load_rooms();\n    }\n\n    show_error(message) {\n        frappe.msgprint({\n            title: __('\u062E\u0637\u0623'),\n            message: message,\n            indicator: 'red'\n        });\n    }\n\n    format_time(timeStr) {\n        if (!timeStr) return '00:00';\n        return timeStr.split(':').slice(0, 2).join(':');\n    }\n\n    calculate_duration(start, end) {\n        const startTime = new Date(`2000-01-01T${start}:00`);\n        const endTime = new Date(`2000-01-01T${end}:00`);\n        return ((endTime - startTime) / (1000 * 60 * 60)).toFixed(1);\n    }\n\n    format_currency(amount) {\n        return parseFloat(amount || 0).toFixed(2) + ' ' + __('\u0631.\u0633');\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83C\uDFE8 \u0646\u0638\u0627\u0645 \u0627\u0633\u062A\u0643\u0634\u0627\u0641 \u0627\u0644\u063A\u0631\u0641 - \u0627\u0644\u0625\u0635\u062F\u0627\u0631 \u0627\u0644\u0645\u062D\u0633\u0646 \u0645\u0639 \u062A\u062A\u0628\u0639 \u0643\u0627\u0645\u0644 \u0644\u0644\u0639\u0645\u0644\u064A\u0627\u062A\n * @class room_booking.RoomBooking.RoomExplorer\n */\nroom_booking.RoomBooking.RoomExplorer = class {\n    constructor({ parent, onSlotSelect, onFilterChange }) {\n        console.log(\"\uD83D\uDE80 \u0628\u062F\u0621 \u062A\u0647\u064A\u0626\u0629 \u0645\u0633\u062A\u0643\u0634\u0641 \u0627\u0644\u063A\u0631\u0641...\");\n        \n        try {\n            // \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u0644\u0639\u0646\u0635\u0631 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\n            if (!parent || !parent.length) {\n                throw new Error(\"\u0639\u0646\u0635\u0631 \u0627\u0644\u0640 parent \u063A\u064A\u0631 \u0635\u0627\u0644\u062D \u0623\u0648 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F \u0641\u064A \u0627\u0644\u0640 DOM\");\n            }\n\n            this.parent = parent;\n            this.onSlotSelect = onSlotSelect || function() {\n                console.warn(\"\u26A0\uFE0F \u0644\u0645 \u064A\u062A\u0645 \u062A\u0648\u0641\u064A\u0631 \u062F\u0627\u0644\u0629 onSlotSelect\");\n            };\n            \n            this.onFilterChange = onFilterChange || function() {\n                console.warn(\"\u26A0\uFE0F \u0644\u0645 \u064A\u062A\u0645 \u062A\u0648\u0641\u064A\u0631 \u062F\u0627\u0644\u0629 onFilterChange\");\n            };\n            \n            this.heatmapData = {};\n            this.currentDate = frappe.datetime.get_today();\n            \n            console.log(\"\u2705 \u062A\u0645 \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u0645\u062A\u063A\u064A\u0631\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 \u0628\u0646\u062C\u0627\u062D\");\n            this.init();\n            \n        } catch (error) {\n            console.error(\"\u274C \u062E\u0637\u0623 \u0641\u064A \u0628\u0646\u0627\u0621 \u0645\u0633\u062A\u0643\u0634\u0641 \u0627\u0644\u063A\u0631\u0641:\", error);\n            this.showFatalError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u0627\u062F\u062D \u0623\u062B\u0646\u0627\u0621 \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u0646\u0638\u0627\u0645'));\n        }\n    }\n\n    init() {\n        console.log(\"\uD83D\uDD27 \u0628\u062F\u0621 \u062A\u0647\u064A\u0626\u0629 \u0645\u0643\u0648\u0646\u0627\u062A \u0645\u0633\u062A\u0643\u0634\u0641 \u0627\u0644\u063A\u0631\u0641...\");\n        \n        try {\n            this.renderSkeleton();\n            console.log(\"\uD83C\uDFA8 \u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0647\u064A\u0643\u0644 \u0627\u0644\u0623\u0633\u0627\u0633\u064A \u0644\u0648\u0627\u062C\u0647\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\");\n            \n            this.loadRooms();\n            console.log(\"\uD83D\uDCE6 \u0628\u062F\u0621 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641...\");\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u0645\u0633\u062A\u0643\u0634\u0641:\", error);\n            this.showError(__('\u062A\u0639\u0630\u0631 \u062A\u062D\u0645\u064A\u0644 \u0648\u0627\u062C\u0647\u0629 \u0645\u0633\u062A\u0643\u0634\u0641 \u0627\u0644\u063A\u0631\u0641'));\n        }\n    }\n\n    renderSkeleton() {\n        console.log(\"\uD83D\uDEE0\uFE0F \u0628\u0646\u0627\u0621 \u0627\u0644\u0647\u064A\u0643\u0644 \u0627\u0644\u0623\u0633\u0627\u0633\u064A \u0644\u0644\u0648\u0627\u062C\u0647\u0629...\");\n        \n        try {\n            this.parent.html(`\n                <div class=\"room-explorer\">\n                    <!-- \u0641\u0644\u062A\u0631\u0627\u062A \u0627\u0644\u0628\u062D\u062B -->\n                    <div class=\"advanced-filters card mb-4\">\n                        <div class=\"card-header\">\n                            <h4><i class=\"fa fa-filter\"></i> ${__('\u0641\u0644\u0627\u062A\u0631 \u0627\u0644\u0628\u062D\u062B')}</h4>\n                        </div>\n                        <div class=\"card-body\">\n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label><i class=\"fa fa-building\"></i> ${__('\u0627\u0644\u0641\u0631\u0639')}</label>\n                                        <select class=\"form-control branch-filter\">\n                                            <option value=\"\">${__('\u062C\u0645\u064A\u0639 \u0627\u0644\u0641\u0631\u0648\u0639')}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label><i class=\"fa fa-users\"></i> ${__('\u0627\u0644\u0633\u0639\u0629')}</label>\n                                        <select class=\"form-control capacity-filter\">\n                                            <option value=\"\">${__('\u062C\u0645\u064A\u0639 \u0627\u0644\u0633\u0639\u0627\u062A')}</option>\n                                            <option value=\"5\">5+ ${__('\u0623\u0634\u062E\u0627\u0635')}</option>\n                                            <option value=\"10\">10+ ${__('\u0623\u0634\u062E\u0627\u0635')}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u062D\u0645\u064A\u0644 -->\n                    <div class=\"loading-state text-center py-5\" style=\"display:none;\">\n                        <div class=\"spinner-border text-primary\" role=\"status\">\n                            <span class=\"sr-only\">${__('\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...')}</span>\n                        </div>\n                        <p class=\"mt-3\">${__('\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641...')}</p>\n                    </div>\n\n                    <!-- \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u063A\u0631\u0641 -->\n                    <div class=\"rooms-list\"></div>\n                </div>\n            `);\n            \n            console.log(\"\uD83C\uDFAF \u0625\u0639\u062F\u0627\u062F \u0645\u0633\u062A\u0645\u0639\u064A \u0627\u0644\u0623\u062D\u062F\u0627\u062B \u0644\u0644\u0641\u0644\u0627\u062A\u0631...\");\n            this.parent.find('.branch-filter, .capacity-filter').on('change', () => {\n                console.log(\"\uD83D\uDD0E \u062A\u063A\u064A\u064A\u0631 \u0641\u064A \u0627\u0644\u0641\u0644\u0627\u062A\u0631\u060C \u062C\u0627\u0631\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0646\u062A\u0627\u0626\u062C...\");\n                try {\n                    this.loadRooms();\n                } catch (error) {\n                    console.error(\"\u274C \u062E\u0637\u0623 \u0641\u064A \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0641\u0644\u0627\u062A\u0631:\", error);\n                    this.showError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0641\u0644\u0627\u062A\u0631'));\n                }\n            });\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u0628\u0646\u0627\u0621 \u0627\u0644\u0647\u064A\u0643\u0644 \u0627\u0644\u0623\u0633\u0627\u0633\u064A:\", error);\n            throw error;\n        }\n    }\n\n    async loadRooms() {\n        console.log(\"\uD83C\uDF10 \u0628\u062F\u0621 \u062C\u0644\u0628 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641 \u0645\u0646 \u0627\u0644\u062E\u0627\u062F\u0645...\");\n        \n        try {\n            this.showLoading(true);\n            \n            const filters = {\n                date: this.currentDate,\n                branch: this.parent.find('.branch-filter').val(),\n                capacity: this.parent.find('.capacity-filter').val()\n            };\n            \n            console.log(\"\uD83D\uDD0D \u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u0628\u062D\u062B \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u0629:\", filters);\n            \n            const { message: rooms } = await frappe.call({\n                method: 'room_booking.api.get_available_rooms_with_slots',\n                args: filters,\n                freeze: true,\n                callback: (response) => {\n                    if (response.exc) {\n                        console.error(\"\uD83D\uDEA8 \u062E\u0637\u0623 \u0641\u064A \u0627\u0633\u062A\u062C\u0627\u0628\u0629 \u0627\u0644\u062E\u0627\u062F\u0645:\", response.exc);\n                        throw new Error(__('\u0627\u0633\u062A\u062C\u0627\u0628\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 \u0645\u0646 \u0627\u0644\u062E\u0627\u062F\u0645'));\n                    }\n                }\n            });\n\n            if (!rooms || !Array.isArray(rooms)) {\n                console.warn(\"\u26A0\uFE0F \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 \u0623\u0648 \u0641\u0627\u0631\u063A\u0629\");\n                throw new Error(__('\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u063A\u0631\u0641 \u0645\u062A\u0627\u062D\u0629'));\n            }\n\n            console.log(`\u2705 \u062A\u0645 \u062A\u062D\u0645\u064A\u0644 ${rooms.length} \u063A\u0631\u0641\u0629 \u0628\u0646\u062C\u0627\u062D`);\n            this.renderRooms(rooms);\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u063A\u0631\u0641:\", error);\n            this.showError(__('\u062A\u0639\u0630\u0631 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641: ') + error.message);\n        } finally {\n            this.showLoading(false);\n        }\n    }\n\n    renderRooms(rooms) {\n        console.log(`\uD83C\uDFA8 \u0628\u062F\u0621 \u0639\u0631\u0636 ${rooms.length} \u063A\u0631\u0641\u0629...`);\n        \n        try {\n            const container = this.parent.find('.rooms-list');\n            container.empty();\n\n            if (rooms.length === 0) {\n                console.log(\"\u2139\uFE0F \u0644\u0627 \u062A\u0648\u062C\u062F \u063A\u0631\u0641 \u0645\u062A\u0627\u062D\u0629 \u0644\u0644\u0639\u0631\u0636\");\n                container.html(`\n                    <div class=\"no-rooms-message text-center py-5\">\n                        <i class=\"fa fa-door-closed fa-4x text-muted mb-4\"></i>\n                        <h4 class=\"text-muted\">${__('\u0644\u0627 \u062A\u0648\u062C\u062F \u063A\u0631\u0641 \u0645\u062A\u0627\u062D\u0629')}</h4>\n                        <p class=\"text-muted\">${__('\u062D\u0627\u0648\u0644 \u062A\u063A\u064A\u064A\u0631 \u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u0628\u062D\u062B')}</p>\n                        <button class=\"btn btn-primary btn-refresh mt-3\">\n                            <i class=\"fa fa-sync-alt\"></i> ${__('\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0646\u062A\u0627\u0626\u062C')}\n                        </button>\n                    </div>\n                `);\n                \n                container.find('.btn-refresh').on('click', () => this.loadRooms());\n                return;\n            }\n\n            rooms.forEach((room, index) => {\n                try {\n                    if (!this.validateRoomData(room)) {\n                        console.warn(`\u26A0\uFE0F \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 \u0641\u064A \u0627\u0644\u0641\u0647\u0631\u0633 ${index}:`, room);\n                        return;\n                    }\n\n                    console.log(`\uD83D\uDECF\uFE0F \u0639\u0631\u0636 \u0627\u0644\u063A\u0631\u0641\u0629 ${room.name} (${room.id})`);\n                    \n                    const roomCard = $(`\n                        <div class=\"room-card card mb-4\" data-room-id=\"${room.id}\">\n                            <div class=\"card-header d-flex justify-content-between align-items-center\">\n                                <h3 class=\"mb-0\">\n                                    <i class=\"fa fa-door-open\"></i> ${room.name}\n                                </h3>\n                                <span class=\"badge badge-${room.status === 'Available' ? 'success' : 'danger'}\">\n                                    ${this.getStatusText(room.status)}\n                                </span>\n                            </div>\n                            \n                            <div class=\"card-body\">\n                                <div class=\"room-meta row mb-3\">\n                                    <div class=\"col-md-4\">\n                                        <p><i class=\"fa fa-users\"></i> <strong>${__('\u0627\u0644\u0633\u0639\u0629')}:</strong> ${room.capacity}</p>\n                                    </div>\n                                    <div class=\"col-md-4\">\n                                        <p><i class=\"fa fa-money-bill-wave\"></i> <strong>${__('\u0627\u0644\u0633\u0639\u0631')}:</strong> ${this.formatPrice(room.price_per_hour)}</p>\n                                    </div>\n                                    <div class=\"col-md-4\">\n                                        <p><i class=\"fa fa-map-marker-alt\"></i> <strong>${__('\u0627\u0644\u0641\u0631\u0639')}:</strong> ${room.branch || __('\u063A\u064A\u0631 \u0645\u062D\u062F\u062F')}</p>\n                                    </div>\n                                </div>\n                                \n                                <h5 class=\"mb-3\"><i class=\"fa fa-clock\"></i> ${__('\u0627\u0644\u0623\u0648\u0642\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629')}</h5>\n                                <div class=\"slots-grid\"></div>\n                            </div>\n                        </div>\n                    `);\n\n                    this.renderTimeSlots(roomCard.find('.slots-grid'), room.slots || []);\n                    container.append(roomCard);\n                    \n                } catch (error) {\n                    console.error(`\u274C \u062E\u0637\u0623 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u063A\u0631\u0641\u0629 ${index}:`, error);\n                }\n            });\n\n            this.setupSlotSelectionHandlers();\n            console.log(\"\uD83C\uDF89 \u062A\u0645 \u0639\u0631\u0636 \u062C\u0645\u064A\u0639 \u0627\u0644\u063A\u0631\u0641 \u0628\u0646\u062C\u0627\u062D\");\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u063A\u0631\u0641:\", error);\n            this.showError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0639\u0631\u0636 \u0627\u0644\u063A\u0631\u0641'));\n        }\n    }\n\n    validateRoomData(room) {\n        if (!room || typeof room !== 'object') {\n            console.warn(\"\u274C \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 (\u0644\u064A\u0633\u062A \u0643\u0627\u0626\u0646)\");\n            return false;\n        }\n        \n        const requiredFields = ['id', 'name', 'capacity', 'price_per_hour', 'status'];\n        const missingFields = requiredFields.filter(field => !room[field]);\n        \n        if (missingFields.length > 0) {\n            console.warn(`\u26A0\uFE0F \u062D\u0642\u0648\u0644 \u0646\u0627\u0642\u0635\u0629 \u0641\u064A \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641\u0629: ${missingFields.join(', ')}`);\n            return false;\n        }\n        \n        return true;\n    }\n\n    renderTimeSlots(container, slots) {\n        console.log(`\u23F1\uFE0F \u0639\u0631\u0636 ${slots.length} \u0641\u062A\u0631\u0629 \u0632\u0645\u0646\u064A\u0629...`);\n        \n        try {\n            if (!slots || !Array.isArray(slots)) {\n                console.warn(\"\u26A0\uFE0F \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0641\u062A\u0631\u0627\u062A \u0627\u0644\u0632\u0645\u0646\u064A\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629\");\n                return;\n            }\n\n            if (slots.length === 0) {\n                container.html(`\n                    <div class=\"alert alert-info mb-0\">\n                        <i class=\"fa fa-info-circle\"></i> ${__('\u0644\u0627 \u062A\u0648\u062C\u062F \u0641\u062A\u0631\u0627\u062A \u0645\u062A\u0627\u062D\u0629 \u0644\u0647\u0630\u0647 \u0627\u0644\u063A\u0631\u0641\u0629')}\n                    </div>\n                `);\n                return;\n            }\n\n            slots.forEach((slot, index) => {\n                try {\n                    if (!this.validateSlotData(slot)) {\n                        console.warn(`\u26A0\uFE0F \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 \u0641\u064A \u0627\u0644\u0641\u0647\u0631\u0633 ${index}:`, slot);\n                        return;\n                    }\n\n                    const slotElement = $(`\n                        <div class=\"time-slot ${slot.status.toLowerCase()} mb-2\" \n                             data-start=\"${slot.start}\" \n                             data-end=\"${slot.end}\"\n                             data-status=\"${slot.status}\"\n                             title=\"${slot.status === 'Available' ? __('\u0627\u062D\u062C\u0632 \u0647\u0630\u0647 \u0627\u0644\u0641\u062A\u0631\u0629') : __('\u0647\u0630\u0647 \u0627\u0644\u0641\u062A\u0631\u0629 \u0645\u062D\u062C\u0648\u0632\u0629')}\">\n                            <div class=\"time-range\">\n                                <i class=\"fa fa-clock\"></i> ${slot.start} - ${slot.end}\n                            </div>\n                            <div class=\"slot-meta\">\n                                <span class=\"badge badge-light\">\n                                    <i class=\"fa fa-hourglass\"></i> ${slot.duration} ${__('\u0633\u0627\u0639\u0629')}\n                                </span>\n                                <span class=\"badge badge-primary\">\n                                    <i class=\"fa fa-money-bill-wave\"></i> ${this.formatPrice(slot.price)}\n                                </span>\n                            </div>\n                            ${slot.status === 'Available' ? `\n                                <button class=\"btn btn-sm btn-success btn-book-slot\">\n                                    <i class=\"fa fa-calendar-plus\"></i> ${__('\u062D\u062C\u0632')}\n                                </button>` : ''\n                            }\n                        </div>\n                    `);\n\n                    container.append(slotElement);\n                    \n                } catch (error) {\n                    console.error(`\u274C \u062E\u0637\u0623 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629 ${index}:`, error);\n                }\n            });\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u0641\u062A\u0631\u0627\u062A \u0627\u0644\u0632\u0645\u0646\u064A\u0629:\", error);\n            throw error;\n        }\n    }\n\n    validateSlotData(slot) {\n        if (!slot || typeof slot !== 'object') {\n            console.warn(\"\u274C \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 (\u0644\u064A\u0633\u062A \u0643\u0627\u0626\u0646)\");\n            return false;\n        }\n        \n        const requiredFields = ['start', 'end', 'status', 'duration', 'price'];\n        const missingFields = requiredFields.filter(field => !slot[field]);\n        \n        if (missingFields.length > 0) {\n            console.warn(`\u26A0\uFE0F \u062D\u0642\u0648\u0644 \u0646\u0627\u0642\u0635\u0629 \u0641\u064A \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0641\u062A\u0631\u0629: ${missingFields.join(', ')}`);\n            return false;\n        }\n        \n        return true;\n    }\n\n    setupSlotSelectionHandlers() {\n        console.log(\"\uD83D\uDDB1\uFE0F \u0625\u0639\u062F\u0627\u062F \u0645\u0639\u0627\u0644\u062C\u0627\u062A \u0623\u062D\u062F\u0627\u062B \u0627\u0644\u0641\u062A\u0631\u0627\u062A \u0627\u0644\u0632\u0645\u0646\u064A\u0629...\");\n        \n        this.parent.find('.btn-book-slot').on('click', (e) => {\n            e.stopPropagation();\n            \n            try {\n                const slotElement = $(e.currentTarget).closest('.time-slot');\n                const roomCard = slotElement.closest('.room-card');\n                \n                const roomId = roomCard.data('room-id');\n                const roomName = roomCard.find('.card-header h3').text().trim();\n                \n                const slotData = {\n                    start: slotElement.data('start'),\n                    end: slotElement.data('end'),\n                    price: slotElement.find('.badge-primary').text().replace(/[^\\d.]/g, ''),\n                    duration: slotElement.find('.badge-light').text().replace(/[^\\d.]/g, '')\n                };\n                \n                console.log(\"\uD83C\uDFAF \u062A\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 \u0641\u062A\u0631\u0629:\", {\n                    roomId,\n                    roomName,\n                    slotData\n                });\n                \n                this.onSlotSelect(roomId, slotData);\n                \n            } catch (error) {\n                console.error(\"\u274C \u062E\u0637\u0623 \u0641\u064A \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0641\u062A\u0631\u0629:\", error);\n                this.showError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629'));\n            }\n        });\n    }\n\n    showLoading(show) {\n        try {\n            const loader = this.parent.find('.loading-state');\n            if (show) {\n                loader.show();\n                this.parent.find('.rooms-list').hide();\n            } else {\n                loader.hide();\n                this.parent.find('.rooms-list').show();\n            }\n        } catch (error) {\n            console.error(\"\u274C \u062E\u0637\u0623 \u0641\u064A \u0639\u0631\u0636 \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u062D\u0645\u064A\u0644:\", error);\n        }\n    }\n\n    showError(msg) {\n        try {\n            console.error(\"\uD83D\uDCA5 \u0639\u0631\u0636 \u0631\u0633\u0627\u0644\u0629 \u062E\u0637\u0623:\", msg);\n            \n            this.parent.find('.rooms-list').html(`\n                <div class=\"error-state text-center py-5\">\n                    <i class=\"fa fa-exclamation-triangle fa-4x text-danger mb-4\"></i>\n                    <h4 class=\"text-danger\">${__('\u062D\u062F\u062B \u062E\u0637\u0623')}</h4>\n                    <p class=\"text-muted\">${msg}</p>\n                    <button class=\"btn btn-danger btn-retry mt-3\">\n                        <i class=\"fa fa-sync-alt\"></i> ${__('\u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629')}\n                    </button>\n                </div>\n            `);\n            \n            this.parent.find('.btn-retry').on('click', () => {\n                console.log(\"\uD83D\uDD04 \u0625\u0639\u0627\u062F\u0629 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0639\u062F \u0627\u0644\u062E\u0637\u0623...\");\n                this.loadRooms();\n            });\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u0639\u0631\u0636 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062E\u0637\u0623:\", error);\n            frappe.msgprint({\n                title: __('\u062E\u0637\u0623'),\n                message: msg,\n                indicator: 'red'\n            });\n        }\n    }\n\nshowFatalError(msg) {\n    try {\n        console.error(\"\uD83D\uDC80 \u062E\u0637\u0623 \u0641\u0627\u062F\u062D:\", msg);\n        \n        // \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0648\u062C\u0648\u062F this.parent \u0628\u0634\u0643\u0644 \u0635\u062D\u064A\u062D\n        if (!this.parent || !this.parent.length) {\n            console.error(\"\u0644\u0627 \u064A\u0645\u0643\u0646 \u0639\u0631\u0636 \u0627\u0644\u062E\u0637\u0623 - \u0639\u0646\u0635\u0631 parent \u063A\u064A\u0631 \u0645\u062A\u0627\u062D\");\n            document.write(`<div class=\"alert alert-danger\">${msg}</div>`);\n            return;\n        }\n        \n        this.parent.html(`\n            <div class=\"fatal-error text-center py-5\">\n                <i class=\"fa fa-skull-crossbones fa-4x text-danger mb-4\"></i>\n                <h3 class=\"text-danger\">${__('\u062E\u0637\u0623 \u0641\u0627\u062F\u062D')}</h3>\n                <p class=\"lead\">${msg}</p>\n                <div class=\"mt-4\">\n                    <button class=\"btn btn-danger btn-refresh mr-2\">\n                        <i class=\"fa fa-sync-alt\"></i> ${__('\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0635\u0641\u062D\u0629')}\n                    </button>\n                </div>\n            </div>\n        `);\n        \n        this.parent.find('.btn-refresh').on('click', () => location.reload());\n    } catch (error) {\n        console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u0639\u0631\u0636 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062E\u0637\u0623 \u0627\u0644\u0641\u0627\u062F\u062D:\", error);\n        alert(msg); // Fallback \u0628\u0633\u064A\u0637\n    }\n}\n\n    getStatusText(status) {\n        const statusMap = {\n            'Available': __('\u0645\u062A\u0627\u062D\u0629'),\n            'Booked': __('\u0645\u062D\u062C\u0648\u0632\u0629'),\n            'Maintenance': __('\u0635\u064A\u0627\u0646\u0629'),\n            'Reserved': __('\u0645\u062D\u062C\u0648\u0632\u0629 \u0645\u0633\u0628\u0642\u0627\u064B')\n        };\n        return statusMap[status] || status;\n    }\n\n    formatPrice(amount) {\n        try {\n            return room_booking.RoomBooking.helpers.formatCurrency(amount);\n        } catch (error) {\n            console.warn(\"\u26A0\uFE0F \u062E\u0637\u0623 \u0641\u064A \u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u0633\u0639\u0631\u060C \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u0642\u064A\u0645\u0629 \u0627\u0644\u0623\u0635\u0644\u064A\u0629\");\n            return amount;\n        }\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\nroom_booking.RoomBooking.BookingManager = class {\nconstructor({ wrapper, events = {} }) {\n    if (!wrapper || !$(wrapper).length) {\n        console.error('\u0639\u0646\u0635\u0631 \u0627\u0644\u0640 wrapper \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F \u0641\u064A \u0627\u0644\u0635\u0641\u062D\u0629');\n        return;\n    }\n\n    this.wrapper = $(wrapper);\n    this.events = events;\n\n    // \u062B\u0645 \u062A\u0633\u062A\u062E\u062F\u0645 \u0627\u0644\u0623\u062D\u062F\u0627\u062B \u0643\u0627\u0644\u062A\u0627\u0644\u064A:\n    this.events.bookingUpdated && this.events.bookingUpdated();\n}\n\n\n    init() {\n        this.renderBaseLayout();\n        this.loadInitialBookings();\n        this.setupEventListeners();\n    }\n\n    renderBaseLayout() {\n        this.wrapper.html(`\n            <div class=\"booking-manager\">\n                <div class=\"manager-header\">\n                    <h2><i class=\"fa fa-calendar-alt\"></i> ${__('\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A')}</h2>\n                    <div class=\"header-actions\">\n                        <button class=\"btn btn-refresh\">\n                            <i class=\"fa fa-sync-alt\"></i> ${__('\u062A\u062D\u062F\u064A\u062B')}\n                        </button>\n                        <button class=\"btn btn-add-booking\">\n                            <i class=\"fa fa-plus\"></i> ${__('\u062D\u062C\u0632 \u062C\u062F\u064A\u062F')}\n                        </button>\n                    </div>\n                </div>\n                \n                <div class=\"loading-state\" style=\"display:none;\">\n                    <div class=\"spinner\"></div>\n                    <p>${__('\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...')}</p>\n                </div>\n                \n                <div class=\"bookings-list\">\n                    <div class=\"list-header\">\n                        <div>${__('\u0627\u0644\u063A\u0631\u0641\u0629')}</div>\n                        <div>${__('\u0627\u0644\u062A\u0627\u0631\u064A\u062E')}</div>\n                        <div>${__('\u0627\u0644\u0648\u0642\u062A')}</div>\n                        <div>${__('\u0627\u0644\u062D\u0627\u0644\u0629')}</div>\n                    </div>\n                    <div class=\"list-items\"></div>\n                </div>\n                \n                <div class=\"booking-details\">\n                    <div class=\"details-header\">\n                        <h3>${__('\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u062C\u0632')}</h3>\n                    </div>\n                    <div class=\"details-content\">\n                        <div class=\"empty-state\">\n                            <i class=\"fa fa-calendar fa-3x\"></i>\n                            <p>${__('\u0627\u062E\u062A\u0631 \u062D\u062C\u0632\u0627\u064B \u0644\u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644')}</p>\n                        </div>\n                    </div>\n                    <div class=\"details-actions\">\n                        <button class=\"btn btn-modify\">\n                            <i class=\"fa fa-edit\"></i> ${__('\u062A\u0639\u062F\u064A\u0644')}\n                        </button>\n                        <button class=\"btn btn-cancel\">\n                            <i class=\"fa fa-times\"></i> ${__('\u0625\u0644\u063A\u0627\u0621')}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `);\n    }\n\n    async loadInitialBookings() {\n        this.showLoading(true);\n        \n        const today = frappe.datetime.get_today();\n        const start_date = frappe.datetime.add_days(today, -30);\n        const end_date = frappe.datetime.add_days(today, 60);\n        \n        this.state.bookings = await this.fetchBookings(start_date, end_date);\n        this.renderBookingsList();\n        \n        this.showLoading(false);\n    }\n\n    async fetchBookings(from_date, to_date) {\n        const response = await frappe.call({\n            method: 'room_booking.api.get_user_bookings',\n            args: { from_date, to_date }\n        });\n\n        if (!response || !response.message) {\n            console.error('\u0627\u0633\u062A\u062C\u0627\u0628\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 \u0645\u0646 \u0627\u0644\u062E\u0627\u062F\u0645');\n            return [];\n        }\n\n        return response.message.map(booking => ({\n            id: booking.name,\n            room: booking.rental_room,\n            room_name: booking.room_name,\n            date: booking.booking_date,\n            start_time: booking.start_time,\n            end_time: booking.end_time,\n            customer: booking.customer_name,\n            status: booking.status,\n            amount: booking.total_amount\n        }));\n    }\n\n    renderBookingsList() {\n        const $list = this.wrapper.find('.list-items').empty();\n        \n        this.state.bookings.forEach(booking => {\n            $list.append(`\n                <div class=\"booking-item\" data-booking-id=\"${booking.id}\">\n                    <div>${booking.room_name}</div>\n                    <div>${frappe.datetime.str_to_user(booking.date)}</div>\n                    <div>${booking.start_time} - ${booking.end_time}</div>\n                    <div class=\"status-badge ${booking.status.toLowerCase()}\">\n                        ${this.getStatusText(booking.status)}\n                    </div>\n                </div>\n            `);\n        });\n    }\n\n    showBookingDetails(bookingId) {\n        const booking = this.state.bookings.find(b => b.id === bookingId);\n        if (!booking) return;\n\n        this.currentBooking = booking;\n        \n        this.wrapper.find('.details-content').html(`\n            <div class=\"booking-info\">\n                <h4>${booking.room_name}</h4>\n                <div class=\"info-row\">\n                    <label>${__('\u0627\u0644\u062A\u0627\u0631\u064A\u062E')}:</label>\n                    <span>${frappe.datetime.str_to_user(booking.date)}</span>\n                </div>\n                <div class=\"info-row\">\n                    <label>${__('\u0627\u0644\u0648\u0642\u062A')}:</label>\n                    <span>${booking.start_time} - ${booking.end_time}</span>\n                </div>\n                <div class=\"info-row\">\n                    <label>${__('\u0627\u0644\u062D\u0627\u0644\u0629')}:</label>\n                    <span class=\"status-badge ${booking.status.toLowerCase()}\">\n                        ${this.getStatusText(booking.status)}\n                    </span>\n                </div>\n                <div class=\"info-row\">\n                    <label>${__('\u0627\u0644\u0645\u0628\u0644\u063A')}:</label>\n                    <span>${booking.amount}</span>\n                </div>\n            </div>\n        `);\n        \n        this.toggleActions(booking.status);\n    }\n\n    toggleActions(status) {\n        const $actions = this.wrapper.find('.details-actions');\n        \n        if (status === 'Confirmed') {\n            $actions.show();\n        } else {\n            $actions.hide();\n        }\n    }\n\n    async cancelCurrentBooking() {\n        if (!this.currentBooking) return;\n\n        const confirmed = confirm(__('\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0625\u0644\u063A\u0627\u0621 \u0647\u0630\u0627 \u0627\u0644\u062D\u062C\u0632\u061F'));\n        if (!confirmed) return;\n\n        this.showLoading(true, __('\u062C\u0627\u0631\u064A \u0627\u0644\u0625\u0644\u063A\u0627\u0621...'));\n        \n        await frappe.call({\n            method: 'room_booking.api.cancel_booking',\n            args: { booking_id: this.currentBooking.id }\n        });\n        \n        this.showLoading(false);\n        this.loadInitialBookings();\n        this.wrapper.find('.details-content').html(`\n            <div class=\"empty-state\">\n                <i class=\"fa fa-calendar fa-3x\"></i>\n                <p>${__('\u0627\u062E\u062A\u0631 \u062D\u062C\u0632\u0627\u064B \u0644\u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644')}</p>\n            </div>\n        `);\n    }\n\n    setupEventListeners() {\n        this.wrapper.on('click', '.btn-refresh', () => this.loadInitialBookings());\n        this.wrapper.on('click', '.btn-cancel', () => this.cancelCurrentBooking());\n        this.wrapper.on('click', '.btn-add-booking', () => frappe.set_route('app/room-booking'));\n        \n        this.wrapper.on('click', '.booking-item', (e) => {\n            const bookingId = $(e.currentTarget).data('booking-id');\n            this.showBookingDetails(bookingId);\n        });\n    }\n\n    showLoading(show, message = __('\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...')) {\n        const $loader = this.wrapper.find('.loading-state');\n        show ? $loader.show() : $loader.hide();\n        if (message) $loader.find('p').text(message);\n    }\n\n    getStatusText(status) {\n        const statusMap = {\n            'Confirmed': __('\u0645\u0624\u0643\u062F'),\n            'Cancelled': __('\u0645\u0644\u063A\u0649'),\n            'Completed': __('\u0645\u0643\u062A\u0645\u0644')\n        };\n        return statusMap[status] || status;\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \u0645\u0643\u0648\u0646 \u0633\u0644\u0629 \u0627\u0644\u062D\u062C\u0632 \u0644\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A \u0627\u0644\u0645\u062D\u062F\u062F\u0629\n * @class room_booking.RoomBooking.BookingCart\n */\nroom_booking.RoomBooking.BookingCart = class {\n    constructor({ wrapper, events = {}, settings = {} }) {\n        this.wrapper = $(wrapper);\n        this.events = events;\n        this.settings = settings;\n        this.state = { \n            bookings: [], \n            customer: null,\n            selectedRoom: null\n        };\n        this.init_component();\n    }\n\n    init_component() {\n        this.render();\n        this.add_styles();\n        this.bind_events();\n    }\n\n    render() {\n        this.wrapper.html(`\n            <div class=\"booking-cart-container\">\n                <div class=\"cart-header\">\n                    <h4><i class=\"fa fa-shopping-cart\"></i> ${__('Booking Cart')}</h4>\n                </div>\n                \n                <div class=\"cart-items-container\">\n                    <div class=\"empty-cart-message\">\n                        <i class=\"fa fa-clock\"></i>\n                        <p>${__('No bookings selected yet')}</p>\n                    </div>\n                </div>\n                \n                <div class=\"cart-summary\">\n                    <div class=\"summary-row\">\n                        <span>${__('Total Duration')}:</span>\n                        <strong class=\"total-duration\">0 ${__('hours')}</strong>\n                    </div>\n                    <div class=\"summary-row\">\n                        <span>${__('Total Price')}:</span>\n                        <strong class=\"total-price\">${room_booking.RoomBooking.helpers.formatCurrency(0)}</strong>\n                    </div>\n                    \n                    <div class=\"customer-selection mt-3\">\n                        <label>${__('Customer')}</label>\n                        <div class=\"input-group\">\n                            <select class=\"form-control customer-select\" \n                                    data-placeholder=\"${__('Select customer')}\">\n                                <option value=\"\">${__('Select customer')}</option>\n                            </select>\n                            <div class=\"input-group-append\">\n                                <button class=\"btn btn-outline-secondary refresh-customers\" \n                                        title=\"${__('Refresh customers list')}\">\n                                    <i class=\"fa fa-sync-alt\"></i>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <button class=\"btn btn-primary btn-checkout mt-3\" disabled>\n                        <i class=\"fa fa-calendar-check\"></i> ${__('Confirm Booking')}\n                    </button>\n                </div>\n            </div>\n        `);\n        \n        this.$cartItems = this.wrapper.find('.cart-items-container');\n        this.$emptyMessage = this.wrapper.find('.empty-cart-message');\n        this.$customerSelect = this.wrapper.find('.customer-select');\n        this.$checkoutBtn = this.wrapper.find('.btn-checkout');\n    }\n\n    add_styles() {\n        const styles = `\n            <style>\n                .booking-cart-container {\n                    background: #fff;\n                    border-radius: 8px;\n                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n                    padding: 20px;\n                    height: 100%;\n                }\n                \n                .cart-header {\n                    border-bottom: 1px solid #eee;\n                    padding-bottom: 15px;\n                    margin-bottom: 15px;\n                }\n                \n                .cart-header h4 {\n                    color: #333;\n                    font-weight: 600;\n                }\n                \n                .cart-items-container {\n                    min-height: 200px;\n                    position: relative;\n                }\n                \n                .empty-cart-message {\n                    text-align: center;\n                    padding: 40px 0;\n                    color: #999;\n                }\n                \n                .empty-cart-message i {\n                    font-size: 40px;\n                    margin-bottom: 10px;\n                    opacity: 0.6;\n                }\n                \n                .cart-item {\n                    background: #f9f9f9;\n                    border-radius: 6px;\n                    padding: 12px;\n                    margin-bottom: 10px;\n                    border-left: 3px solid #4CAF50;\n                    transition: all 0.3s;\n                }\n                \n                .cart-item:hover {\n                    background: #f1f1f1;\n                }\n                \n                .cart-item-header {\n                    display: flex;\n                    justify-content: space-between;\n                    margin-bottom: 8px;\n                }\n                \n                .cart-item-title {\n                    font-weight: 600;\n                    color: #333;\n                }\n                \n                .cart-item-duration {\n                    background: rgba(0,0,0,0.1);\n                    padding: 2px 8px;\n                    border-radius: 10px;\n                    font-size: 12px;\n                }\n                \n                .cart-item-time {\n                    color: #666;\n                    font-size: 13px;\n                }\n                \n                .cart-item-price {\n                    font-weight: 600;\n                    color: #4CAF50;\n                }\n                \n                .cart-summary {\n                    border-top: 1px solid #eee;\n                    padding-top: 15px;\n                    margin-top: 15px;\n                }\n                \n                .summary-row {\n                    display: flex;\n                    justify-content: space-between;\n                    margin-bottom: 8px;\n                }\n                \n                .btn-checkout {\n                    width: 100%;\n                    padding: 10px;\n                    font-weight: 600;\n                }\n                \n                .btn-checkout:disabled {\n                    opacity: 0.7;\n                }\n            </style>\n        `;\n        this.wrapper.append(styles);\n    }\n\n    bind_events() {\n        this.$checkoutBtn.on('click', () => this.handle_checkout());\n        this.$customerSelect.on('change', () => this.handle_customer_change());\n        this.wrapper.on('click', '.remove-item', (e) => this.remove_booking($(e.target).data('id')));\n        this.wrapper.on('click', '.refresh-customers', () => this.load_customers());\n    }\n\n    async load_customers() {\n        try {\n            this.$customerSelect.prop('disabled', true);\n            const { message: customers } = await frappe.call('room_booking.api.get_customers');\n            \n            this.$customerSelect.empty().append('<option value=\"\">Select customer</option>');\n            customers.forEach(c => {\n                this.$customerSelect.append(`<option value=\"${c.name}\">${c.customer_name}</option>`);\n            });\n            \n            if (this.state.customer) {\n                this.$customerSelect.val(this.state.customer);\n            }\n        } catch (error) {\n            console.error('Failed to load customers:', error);\n            frappe.msgprint(__('Failed to load customers list'));\n        } finally {\n            this.$customerSelect.prop('disabled', false);\n        }\n    }\n\n    handle_customer_change() {\n        this.state.customer = this.$customerSelect.val();\n        this.update_checkout_button();\n    }\n\n    update_checkout_button() {\n        const canCheckout = this.state.bookings.length > 0 && this.state.customer;\n        this.$checkoutBtn.prop('disabled', !canCheckout);\n    }\n\n    handle_checkout() {\n        if (this.events.checkout) {\n            this.events.checkout({\n                bookings: this.state.bookings,\n                customer: this.state.customer,\n                room: this.state.selectedRoom\n            });\n        }\n    }\n\n    add_booking(room, slot) {\n        if (!this.state.selectedRoom) {\n            this.state.selectedRoom = room;\n        }\n        \n        // \u062A\u062C\u0646\u0628 \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0643\u0631\u0631\u0629\n        const exists = this.state.bookings.some(b => \n            b.start === slot.start && b.end === slot.end\n        );\n        \n        if (!exists) {\n            this.state.bookings.push({\n                ...slot,\n                room_name: room.room_name,\n                id: Date.now().toString()\n            });\n            this.render_bookings();\n        }\n        \n        this.update_checkout_button();\n    }\n\n    remove_booking(bookingId) {\n        this.state.bookings = this.state.bookings.filter(b => b.id !== bookingId);\n        this.render_bookings();\n        this.update_checkout_button();\n    }\n\n    render_bookings() {\n        this.$cartItems.empty();\n        \n        if (this.state.bookings.length === 0) {\n            this.$emptyMessage.show();\n            return;\n        }\n        \n        this.$emptyMessage.hide();\n        \n        let totalDuration = 0;\n        let totalPrice = 0;\n        \n        this.state.bookings.forEach(booking => {\n            const duration = room_booking.RoomBooking.helpers.calculateDuration(booking.start, booking.end);\n            totalDuration += duration;\n            totalPrice += parseFloat(booking.price || 0);\n            \n            const $item = $(`\n                <div class=\"cart-item\" data-id=\"${booking.id}\">\n                    <div class=\"cart-item-header\">\n                        <span class=\"cart-item-title\">${booking.room_name}</span>\n                        <span class=\"cart-item-duration\">${duration} ${__('hours')}</span>\n                    </div>\n                    <div class=\"cart-item-time\">\n                        ${room_booking.RoomBooking.helpers.formatTimeForFrontend(booking.start)} - \n                        ${room_booking.RoomBooking.helpers.formatTimeForFrontend(booking.end)}\n                    </div>\n                    <div class=\"d-flex justify-content-between align-items-center mt-2\">\n                        <span class=\"cart-item-price\">\n                            ${room_booking.RoomBooking.helpers.formatCurrency(booking.price)}\n                        </span>\n                        <button class=\"btn btn-sm btn-outline-danger remove-item\" \n                                data-id=\"${booking.id}\"\n                                title=\"${__('Remove')}\">\n                            <i class=\"fa fa-trash\"></i>\n                        </button>\n                    </div>\n                </div>\n            `);\n            \n            this.$cartItems.append($item);\n        });\n        \n        // \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0644\u062E\u0635\n        this.wrapper.find('.total-duration').text(`${totalDuration.toFixed(2)} ${__('hours')}`);\n        this.wrapper.find('.total-price').text(room_booking.RoomBooking.helpers.formatCurrency(totalPrice));\n    }\n\n    clear() {\n        this.state.bookings = [];\n        this.state.customer = null;\n        this.state.selectedRoom = null;\n        this.$customerSelect.val('');\n        this.render_bookings();\n        this.update_checkout_button();\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \u0645\u0643\u0648\u0646 \u062F\u0627\u064A\u0627\u0644\u0648\u062C \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u062C\u0632\n * @class room_booking.RoomBooking.BookingDialog\n */\nroom_booking.RoomBooking.BookingDialog = class {\n    constructor({ events = {}, settings = {} }) {\n        this.events = events;\n        this.settings = settings;\n        this.dialog = null;\n        this.currentBooking = null;\n    }\n\n    /**\n     * \u0639\u0631\u0636 \u062F\u0627\u064A\u0627\u0644\u0648\u062C \u0627\u0644\u062D\u062C\u0632\n     * @param {object} room - \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641\u0629\n     * @param {object} slot - \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629\n     * @param {function} [onSuccess] - \u062F\u0627\u0644\u0629 \u0627\u0633\u062A\u062F\u0639\u0627\u0621 \u0639\u0646\u062F \u0646\u062C\u0627\u062D \u0627\u0644\u062D\u062C\u0632\n     * @param {object} [booking] - \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u062C\u0632 \u0627\u0644\u062D\u0627\u0644\u064A\u0629 (\u0644\u0644\u062A\u0639\u062F\u064A\u0644)\n     */\n    show(room, slot, onSuccess, booking = null) {\n        this.currentBooking = booking;\n        const isEditMode = !!booking;\n        const duration = room_booking.RoomBooking.helpers.calculateDuration(slot.start, slot.end);\n        const pricePerHour = room.price_per_hour || 0;\n        const defaultDate = booking ? booking.start_datetime.split(' ')[0] : frappe.datetime.get_today();\n\n        this.dialog = new frappe.ui.Dialog({\n            title: isEditMode ? __('Edit Booking') : __('New Booking'),\n            size: 'large',\n            fields: [\n                {\n                    label: __('Room'),\n                    fieldname: 'room',\n                    fieldtype: 'Data',\n                    read_only: true,\n                    default: room.room_name,\n                    description: __('Selected room')\n                },\n                {\n                    label: __('Customer'),\n                    fieldname: 'customer',\n                    fieldtype: 'Link',\n                    options: 'Customer',\n                    reqd: 1,\n                    default: booking ? booking.customer_name : null,\n                    get_query: () => ({ filters: { 'disabled': 0 } })\n                },\n                {\n                    label: __('Date'),\n                    fieldname: 'date',\n                    fieldtype: 'Date',\n                    reqd: true,\n                    default: defaultDate,\n                    min_date: frappe.datetime.get_today(),\n                    change: () => this.validate_booking()\n                },\n                {\n                    label: __('Start Time'),\n                    fieldname: 'start_time',\n                    fieldtype: 'Time',\n                    default: room_booking.RoomBooking.helpers.formatTimeForFrontend(slot.start),\n                    reqd: 1,\n                    change: () => {\n                        this.validate_time_input('start_time');\n                        this.update_end_time();\n                        this.validate_booking();\n                    }\n                },\n                {\n                    label: __('Duration (hours)'),\n                    fieldname: 'duration',\n                    fieldtype: 'Float',\n                    default: duration,\n                    reqd: 1,\n                    min: 0.5,\n                    max: 24,\n                    change: () => {\n                        this.update_end_time();\n                        this.validate_booking();\n                    }\n                },\n                {\n                    label: __('End Time'),\n                    fieldname: 'end_time',\n                    fieldtype: 'Time',\n                    read_only: true,\n                    reqd: 1\n                },\n                {\n                    label: __('Price per Hour'),\n                    fieldname: 'price_per_hour',\n                    fieldtype: 'Currency',\n                    read_only: true,\n                    default: pricePerHour\n                },\n                {\n                    label: __('Total Price'),\n                    fieldname: 'amount',\n                    fieldtype: 'Currency',\n                    read_only: true,\n                    default: slot.price\n                },\n                {\n                    label: __('Notes'),\n                    fieldname: 'notes',\n                    fieldtype: 'Text Area',\n                    rows: 3,\n                    default: booking ? booking.notes : ''\n                },\n                {\n                    fieldname: 'validation_section',\n                    fieldtype: 'Section Break',\n                    label: __('Validation'),\n                    collapsible: 1,\n                    collapsed: 1,\n                    depends_on: 'eval:!doc.__islocal'\n                },\n                {\n                    label: __('Availability Check'),\n                    fieldname: 'availability_status',\n                    fieldtype: 'HTML',\n                    read_only: true\n                }\n            ],\n            primary_action_label: isEditMode ? __('Update Booking') : __('Confirm Booking'),\n            primary_action: (values) => this.submit_booking(room, values, onSuccess, isEditMode),\n            secondary_action_label: __('Cancel')\n        });\n\n        this.setup_event_listeners();\n        this.update_end_time();\n        this.validate_booking();\n        this.dialog.show();\n    }\n\n    setup_event_listeners() {\n        this.dialog.fields_dict.start_time.$input.on('input', () => {\n            this.validate_time_input('start_time');\n        });\n    }\n\n    validate_time_input(fieldname) {\n        const value = this.dialog.get_value(fieldname);\n        const $input = this.dialog.fields_dict[fieldname].$input;\n        \n        if (!room_booking.RoomBooking.helpers.validateTimeFormat(value)) {\n            $input.addClass('invalid-input');\n            return false;\n        }\n        \n        $input.removeClass('invalid-input');\n        return true;\n    }\n\n    update_end_time() {\n        const duration = parseFloat(this.dialog.get_value('duration')) || 1;\n        const startTime = this.dialog.get_value('start_time');\n        \n        if (!this.validate_time_input('start_time')) return;\n        \n        const endTime = room_booking.RoomBooking.helpers.calculateEndTime(startTime, duration);\n        this.dialog.set_value('end_time', endTime);\n        this.update_calculations();\n    }\n\n    update_calculations() {\n        const duration = parseFloat(this.dialog.get_value('duration')) || 0;\n        const pricePerHour = parseFloat(this.dialog.get_value('price_per_hour')) || 0;\n        const totalPrice = pricePerHour * duration;\n        \n        this.dialog.set_value('amount', totalPrice);\n    }\n\n    async validate_booking() {\n        const values = this.dialog.get_values();\n        if (!values || !values.date || !values.start_time || !values.end_time) return;\n\n        try {\n            const isAvailable = await frappe.call({\n                method: 'room_booking.api.check_slot_availability',\n                args: {\n                    room: this.currentBooking?.rental_room || '',\n                    date: values.date,\n                    start_time: room_booking.RoomBooking.helpers.formatTimeForBackend(values.start_time),\n                    end_time: room_booking.RoomBooking.helpers.formatTimeForBackend(values.end_time),\n                    exclude_booking: this.currentBooking?.name\n                }\n            });\n\n            const statusField = this.dialog.fields_dict.availability_status;\n            if (isAvailable.message) {\n                statusField.$wrapper.html(`\n                    <div class=\"alert alert-success\">\n                        <i class=\"fa fa-check-circle\"></i>\n                        ${__('This time slot is available for booking')}\n                    </div>\n                `);\n            } else {\n                statusField.$wrapper.html(`\n                    <div class=\"alert alert-danger\">\n                        <i class=\"fa fa-exclamation-circle\"></i>\n                        ${__('This time slot is not available')}\n                    </div>\n                `);\n            }\n        } catch (error) {\n            console.error('Validation error:', error);\n        }\n    }\n\n    async submit_booking(room, values, onSuccess, isEditMode = false) {\n        // \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0635\u062D\u0629 \u0627\u0644\u0645\u062F\u062E\u0644\u0627\u062A\n        if (!this.validate_time_input('start_time')) {\n            frappe.msgprint(__('Please enter a valid start time in HH:mm format'));\n            return;\n        }\n\n        if (!values.customer) {\n            frappe.msgprint(__('Please select a customer'));\n            return;\n        }\n\n        try {\n            const bookingData = {\n                rental_room: room.name,\n                start_datetime: `${values.date} ${room_booking.RoomBooking.helpers.formatTimeForBackend(values.start_time)}`,\n                end_datetime: `${values.date} ${room_booking.RoomBooking.helpers.formatTimeForBackend(values.end_time)}`,\n                customer_name: values.customer,\n                notes: values.notes || '',\n                amount: values.amount\n            };\n\n            if (isEditMode && this.currentBooking) {\n                bookingData.name = this.currentBooking.name;\n                await frappe.call({\n                    method: 'room_booking.api.update_booking',\n                    args: { booking: bookingData },\n                    freeze: true\n                });\n            } else {\n                await frappe.call({\n                    method: 'room_booking.api.create_booking',\n                    args: { bookings: [bookingData] },\n                    freeze: true\n                });\n            }\n\n            frappe.show_alert({\n                message: isEditMode ? __('Booking updated successfully') : __('Booking created successfully'),\n                indicator: 'green'\n            });\n            \n            this.dialog.hide();\n            if (onSuccess) onSuccess();\n\n        } catch (error) {\n            console.error('Booking error:', error);\n            frappe.msgprint({\n                title: __('Booking Failed'),\n                message: __('An error occurred while processing your booking. Please try again.'),\n                indicator: 'red'\n            });\n        }\n    }\n};\n\n", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83D\uDCE6 \u0645\u062C\u0645\u0648\u0639\u0629 \u0623\u062F\u0648\u0627\u062A \u0645\u0633\u0627\u0639\u062F\u0629 \u0644\u0646\u0638\u0627\u0645 \u062D\u062C\u0632 \u0627\u0644\u063A\u0631\u0641\n * @namespace room_booking.RoomBooking.helpers\n */\nroom_booking.RoomBooking.helpers = {\n    /**\n     * \u062D\u0633\u0627\u0628 \u0648\u0642\u062A \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621 \u0628\u0646\u0627\u0621\u064B \u0639\u0644\u0649 \u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0627\u064A\u0629 \u0648\u0627\u0644\u0645\u062F\u0629\n     * @param {string} startTime - \u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0627\u064A\u0629 (HH:mm)\n     * @param {number} durationHours - \u0627\u0644\u0645\u062F\u0629 \u0628\u0627\u0644\u0633\u0627\u0639\u0627\u062A\n     * @returns {string} \u0648\u0642\u062A \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621 (HH:mm)\n     */\n    calculateEndTime: function(startTime, durationHours) {\n        try {\n            if (!startTime || isNaN(durationHours)) return '00:00';\n            \n            const [hours = 0, minutes = 0] = String(startTime).split(':').map(Number);\n            const totalMinutes = hours * 60 + minutes + Math.round(durationHours * 60);\n            const endHours = Math.floor(totalMinutes / 60) % 24;\n            const endMinutes = totalMinutes % 60;\n            \n            return `${endHours.toString().padStart(2, '0')}:${endMinutes.toString().padStart(2, '0')}`;\n        } catch (error) {\n            console.error('Error calculating end time:', error);\n            return '00:00';\n        }\n    },\n\n    /**\n     * \u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u0648\u0642\u062A \u0644\u0644\u0639\u0631\u0636 \u0641\u064A \u0627\u0644\u0648\u0627\u062C\u0647\u0629 \u0627\u0644\u0623\u0645\u0627\u0645\u064A\u0629 (HH:mm)\n     * @param {string} timeStr - \u0648\u0642\u062A \u0628\u062A\u0646\u0633\u064A\u0642 HH:mm:ss \u0623\u0648 HH:mm\n     * @returns {string} \u0648\u0642\u062A \u0628\u062A\u0646\u0633\u064A\u0642 HH:mm\n     */\n    formatTimeForFrontend: function(timeStr) {\n        if (!timeStr) return '00:00';\n        try {\n            return String(timeStr).split(':').slice(0, 2)\n                .map(part => part.padStart(2, '0'))\n                .join(':');\n        } catch (error) {\n            console.error('Error formatting time:', error);\n            return '00:00';\n        }\n    },\n\n    /**\n     * \u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u0648\u0642\u062A \u0644\u0644\u062A\u062E\u0632\u064A\u0646 \u0641\u064A \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A (HH:mm:ss)\n     * @param {string} timeStr - \u0648\u0642\u062A \u0628\u062A\u0646\u0633\u064A\u0642 HH:mm\n     * @returns {string} \u0648\u0642\u062A \u0628\u062A\u0646\u0633\u064A\u0642 HH:mm:ss\n     */\n    formatTimeForBackend: function(timeStr) {\n        return `${this.formatTimeForFrontend(timeStr)}:00`;\n    },\n\n    /**\n     * \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0635\u062D\u0629 \u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u0648\u0642\u062A\n     * @param {string} timeStr - \u0648\u0642\u062A \u0644\u0644\u062A\u062D\u0642\u0642 \u0645\u0646\u0647\n     * @returns {boolean} true \u0625\u0630\u0627 \u0643\u0627\u0646 \u0627\u0644\u062A\u0646\u0633\u064A\u0642 \u0635\u062D\u064A\u062D\u0627\u064B\n     */\n    validateTimeFormat: function(timeStr) {\n        return /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(timeStr);\n    },\n\n    /**\n     * \u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0627\u0644\u064A \u062D\u0633\u0628 \u0627\u0644\u0639\u0645\u0644\u0629\n     * @param {number} amount - \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0627\u0644\u064A\n     * @param {string} [currency='SAR'] - \u0631\u0645\u0632 \u0627\u0644\u0639\u0645\u0644\u0629\n     * @param {string} [locale='ar-SA'] - \u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0645\u062D\u0644\u064A\u0629\n     * @returns {string} \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0646\u0633\u0642\n     */\n    formatCurrency: function(amount, currency = 'SAR', locale = 'ar-SA') {\n        try {\n            return new Intl.NumberFormat(locale, {\n                style: 'currency',\n                currency: currency,\n                minimumFractionDigits: 2,\n                maximumFractionDigits: 2\n            }).format(amount || 0);\n        } catch (error) {\n            console.error('Error formatting currency:', error);\n            return `${(amount || 0).toFixed(2)} ${currency}`;\n        }\n    },\n\n    /**\n     * \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u062F\u0629 \u0628\u064A\u0646 \u0648\u0642\u062A\u064A\u0646 \u0628\u062F\u0642\u0629\n     * @param {string} start - \u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0627\u064A\u0629 (HH:mm)\n     * @param {string} end - \u0648\u0642\u062A \u0627\u0644\u0646\u0647\u0627\u064A\u0629 (HH:mm)\n     * @returns {string} \u0627\u0644\u0645\u062F\u0629 \u0628\u062A\u0646\u0633\u064A\u0642 HH:mm\n     */\n    calculateDuration: function(start, end) {\n        try {\n            const startDate = new Date(`2000-01-01T${start}:00`);\n            const endDate = new Date(`2000-01-01T${end}:00`);\n            const diffMs = endDate - startDate;\n            \n            if (diffMs <= 0) return '00:00';\n            \n            const totalMinutes = Math.floor(diffMs / (1000 * 60));\n            const hours = Math.floor(totalMinutes / 60);\n            const minutes = totalMinutes % 60;\n            \n            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;\n        } catch (error) {\n            console.error('Error calculating duration:', error);\n            return '00:00';\n        }\n    },\n\n    /**\n     * \u062A\u062D\u0648\u064A\u0644 \u0627\u0644\u0645\u062F\u0629 \u0645\u0646 \u062A\u0646\u0633\u064A\u0642 HH:mm \u0625\u0644\u0649 \u062F\u0642\u0627\u0626\u0642\n     * @param {string} duration - \u0627\u0644\u0645\u062F\u0629 \u0628\u062A\u0646\u0633\u064A\u0642 HH:mm\n     * @returns {number} \u0627\u0644\u0645\u062F\u0629 \u0628\u0627\u0644\u062F\u0642\u0627\u0626\u0642\n     */\n    durationToMinutes: function(duration) {\n        try {\n            const [hours = 0, minutes = 0] = String(duration).split(':').map(Number);\n            return hours * 60 + minutes;\n        } catch (error) {\n            console.error('Error converting duration:', error);\n            return 0;\n        }\n    },\n\n    /**\n     * \u062A\u062D\u0645\u064A\u0644 \u0645\u0643\u062A\u0628\u0629 \u062E\u0627\u0631\u062C\u064A\u0629 \u0628\u0634\u0643\u0644 \u062F\u064A\u0646\u0627\u0645\u064A\u0643\u064A\n     * @param {string} url - \u0631\u0627\u0628\u0637 \u0627\u0644\u0645\u0643\u062A\u0628\u0629\n     * @param {string} [type='script'] - \u0646\u0648\u0639 \u0627\u0644\u0645\u0643\u062A\u0628\u0629 (script/css)\n     * @returns {Promise} Promise \u064A\u062D\u0644 \u0639\u0646\u062F \u0646\u062C\u0627\u062D \u0627\u0644\u062A\u062D\u0645\u064A\u0644\n     */\n    loadLibrary: function(url, type = 'script') {\n        return new Promise((resolve, reject) => {\n            try {\n                let element;\n                if (type === 'script') {\n                    element = document.createElement('script');\n                    element.src = url;\n                    element.onload = resolve;\n                    element.onerror = reject;\n                } else if (type === 'css') {\n                    element = document.createElement('link');\n                    element.rel = 'stylesheet';\n                    element.href = url;\n                    element.onload = resolve;\n                    element.onerror = reject;\n                }\n                \n                if (element) {\n                    document.head.appendChild(element);\n                } else {\n                    reject(new Error('\u0646\u0648\u0639 \u0627\u0644\u0645\u0643\u062A\u0628\u0629 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641'));\n                }\n            } catch (error) {\n                reject(error);\n            }\n        });\n    },\n\n    /**\n     * \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062C\u0644\u0633\u0629 \u0627\u0644\u0645\u0624\u0642\u062A\u0629\n     * @param {string} key - \u0645\u0641\u062A\u0627\u062D \u0627\u0644\u062C\u0644\u0633\u0629\n     * @param {*} [value] - \u0642\u064A\u0645\u0629 \u0627\u0644\u062C\u0644\u0633\u0629 (\u0625\u0630\u0627 \u0644\u0645 \u064A\u062A\u0645 \u062A\u0648\u0641\u064A\u0631\u0647\u060C \u064A\u062A\u0645 \u0627\u0633\u062A\u0631\u062C\u0627\u0639 \u0627\u0644\u0642\u064A\u0645\u0629)\n     * @param {number} [expiry] - \u0645\u062F\u0629 \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621 \u0628\u0627\u0644\u062B\u0648\u0627\u0646\u064A\n     * @returns {*} \u0642\u064A\u0645\u0629 \u0627\u0644\u062C\u0644\u0633\u0629 \u0625\u0630\u0627 \u0643\u0627\u0646 key \u0641\u0642\u0637\n     */\n    session: function(key, value, expiry = 3600) {\n        try {\n            if (value === undefined) {\n                // \u0627\u0633\u062A\u0631\u062C\u0627\u0639 \u0627\u0644\u0642\u064A\u0645\u0629\n                const item = localStorage.getItem(key);\n                if (!item) return null;\n                \n                const { value: storedValue, expiry: storedExpiry } = JSON.parse(item);\n                if (storedExpiry && Date.now() > storedExpiry) {\n                    localStorage.removeItem(key);\n                    return null;\n                }\n                return storedValue;\n            } else {\n                // \u062A\u062E\u0632\u064A\u0646 \u0627\u0644\u0642\u064A\u0645\u0629\n                const item = {\n                    value,\n                    expiry: expiry ? Date.now() + (expiry * 1000) : null\n                };\n                localStorage.setItem(key, JSON.stringify(item));\n                return value;\n            }\n        } catch (error) {\n            console.error('Error managing session:', error);\n            return null;\n        }\n    },\n\n    /**\n     * \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u0623\u062E\u0637\u0627\u0621 \u0648\u0639\u0631\u0636 \u0631\u0633\u0627\u0626\u0644 \u0644\u0644\u0645\u0633\u062A\u062E\u062F\u0645\n     * @param {Error} error - \u0643\u0627\u0626\u0646 \u0627\u0644\u062E\u0637\u0623\n     * @param {string} [customMessage] - \u0631\u0633\u0627\u0644\u0629 \u0645\u062E\u0635\u0635\u0629\n     */\n    handleError: function(error, customMessage) {\n        console.error('System Error:', error);\n        \n        const userMessage = customMessage || __('\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0644\u0627\u062D\u0642\u0627\u064B.');\n        frappe.msgprint({\n            title: __('\u062E\u0637\u0623'),\n            message: userMessage,\n            indicator: 'red'\n        });\n        \n        // \u064A\u0645\u0643\u0646 \u0625\u0636\u0627\u0641\u0629 \u0625\u0631\u0633\u0627\u0644 \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u062E\u0637\u0623 \u0644\u0644\u062E\u0627\u062F\u0645 \u0647\u0646\u0627\n    },\n\n    /**\n     * \u0625\u0646\u0634\u0627\u0621 \u0645\u0639\u0631\u0641 \u0641\u0631\u064A\u062F\n     * @param {string} [prefix] - \u0628\u0627\u062F\u0626\u0629 \u0644\u0644\u062A\u0639\u0631\u064A\u0641\n     * @returns {string} \u0645\u0639\u0631\u0641 \u0641\u0631\u064A\u062F\n     */\n    generateId: function(prefix = '') {\n        return `${prefix}${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    },\n\n    /**\n     * \u062A\u062D\u0645\u064A\u0644 \u0623\u064A\u0642\u0648\u0646\u0627\u062A FontAwesome \u062F\u064A\u0646\u0627\u0645\u064A\u0643\u064A\u0627\u064B\n     * @param {string[]} icons - \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u064A\u0642\u0648\u0646\u0627\u062A \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629\n     */\n    loadIcons: function(icons) {\n        try {\n            if (!Array.isArray(icons) || !icons.length) return;\n            \n            const iconLoader = document.createElement('div');\n            iconLoader.style.display = 'none';\n            iconLoader.innerHTML = icons.map(icon => \n                `<i class=\"fa ${icon}\"></i>`\n            ).join('');\n            document.body.appendChild(iconLoader);\n        } catch (error) {\n            console.error('Error loading icons:', error);\n        }\n    },\n\n    /**\n     * \u062A\u062D\u0648\u064A\u0644 \u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0644\u062A\u0646\u0633\u064A\u0642 \u0642\u0627\u0628\u0644 \u0644\u0644\u0642\u0631\u0627\u0621\u0629\n     * @param {string} dateStr - \u062A\u0627\u0631\u064A\u062E \u0628\u062A\u0646\u0633\u064A\u0642 YYYY-MM-DD\n     * @returns {string} \u062A\u0627\u0631\u064A\u062E \u0645\u0646\u0633\u0642 \u062D\u0633\u0628 \u0644\u063A\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\n     */\n    formatDate: function(dateStr) {\n        try {\n            return frappe.datetime.str_to_user(dateStr);\n        } catch (error) {\n            console.error('Error formatting date:', error);\n            return dateStr || '';\n        }\n    },\n\n    /**\n     * \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u062A\u0648\u0641\u0631 \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629\n     * @param {string} startTime - \u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0627\u064A\u0629\n     * @param {string} endTime - \u0648\u0642\u062A \u0627\u0644\u0646\u0647\u0627\u064A\u0629\n     * @param {string[]} bookedSlots - \u0627\u0644\u0641\u062A\u0631\u0627\u062A \u0627\u0644\u0645\u062D\u062C\u0648\u0632\u0629\n     * @returns {boolean} true \u0625\u0630\u0627 \u0643\u0627\u0646\u062A \u0627\u0644\u0641\u062A\u0631\u0629 \u0645\u062A\u0627\u062D\u0629\n     */\n    isSlotAvailable: function(startTime, endTime, bookedSlots = []) {\n        try {\n            const newStart = new Date(`2000-01-01T${startTime}:00`);\n            const newEnd = new Date(`2000-01-01T${endTime}:00`);\n            \n            if (newStart >= newEnd) return false;\n            \n            return !bookedSlots.some(slot => {\n                const slotStart = new Date(`2000-01-01T${slot.start}:00`);\n                const slotEnd = new Date(`2000-01-01T${slot.end}:00`);\n                return (newStart < slotEnd && newEnd > slotStart);\n            });\n        } catch (error) {\n            console.error('Error checking slot availability:', error);\n            return false;\n        }\n    }\n};\n\n// \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0623\u064A\u0642\u0648\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 \u0639\u0646\u062F \u0627\u0644\u062A\u0647\u064A\u0626\u0629\nroom_booking.RoomBooking.helpers.loadIcons([\n    'fa-door-open',\n    'fa-calendar',\n    'fa-clock',\n    'fa-user',\n    'fa-money-bill-wave',\n    'fa-check-circle',\n    'fa-times-circle',\n    'fa-sync-alt',\n    'fa-plus',\n    'fa-edit',\n    'fa-eye'\n]);", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \u0627\u0644\u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0631\u0626\u064A\u0633\u064A \u0644\u0646\u0638\u0627\u0645 \u062D\u062C\u0632 \u0627\u0644\u063A\u0631\u0641\n * @class\n */\nroom_booking.RoomBooking.Application = class {\n    constructor(wrapper) {\n        this._initProperties(wrapper);\n        this._setupDOM();\n        this._setupEventDelegation();\n        this._initializeComponents();\n        this._applyStyles();\n    }\n\n    // ----------------------------------------\n    // Initialization Methods\n    // ----------------------------------------\n\n    /**\n     * \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u062E\u0635\u0627\u0626\u0635 \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629\n     * @private\n     */\n    _initProperties(wrapper) {\n        this.wrapper = $(wrapper).find(\".layout-main-section\");\n        this.page = wrapper.page;\n        this._state = {\n            selectedRoom: null,\n            selectedSlot: null,\n            isLoading: false,\n            currentView: 'booking'\n        };\n        this._components = {};\n    }\n\n    /**\n     * \u0625\u0639\u062F\u0627\u062F \u0647\u064A\u0643\u0644 DOM \u0627\u0644\u0623\u0633\u0627\u0633\u064A\n     * @private\n     */\n    _setupDOM() {\n        this.wrapper.html(`\n            <div class=\"room-booking-app\">\n                <!-- \u0634\u0631\u064A\u0637 \u0627\u0644\u062A\u062D\u0643\u0645 -->\n                <div class=\"app-controls\">\n                    ${this._renderControlBar()}\n                </div>\n                \n                <!-- \u0627\u0644\u0645\u062D\u062A\u0648\u0649 \u0627\u0644\u0631\u0626\u064A\u0633\u064A -->\n                <div class=\"app-content\">\n                    ${this._renderMainContent()}\n                </div>\n                \n                <!-- \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u062D\u0645\u064A\u0644 -->\n                ${this._renderLoadingState()}\n            </div>\n        `);\n    }\n\n    // ----------------------------------------\n    // Rendering Methods\n    // ----------------------------------------\n\n    /**\n     * \u0639\u0631\u0636 \u0634\u0631\u064A\u0637 \u0627\u0644\u062A\u062D\u0643\u0645\n     * @private\n     */\n    _renderControlBar() {\n        return `\n            <div class=\"view-switcher\">\n                <button class=\"btn btn-booking-view active\" data-action=\"switch-view\" data-view=\"booking\">\n                    <i class=\"fa fa-calendar-plus\"></i> ${__('\u062D\u062C\u0632 \u062C\u062F\u064A\u062F')}\n                </button>\n                <button class=\"btn btn-management-view\" data-action=\"switch-view\" data-view=\"management\">\n                    <i class=\"fa fa-list\"></i> ${__('\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A')}\n                </button>\n            </div>\n            <div class=\"app-actions\">\n                <button class=\"btn btn-refresh\" data-action=\"refresh\">\n                    <i class=\"fa fa-sync-alt\"></i>\n                </button>\n                <button class=\"btn btn-fullscreen\" data-action=\"fullscreen\">\n                    <i class=\"fa fa-expand\"></i>\n                </button>\n            </div>\n        `;\n    }\n\n    /**\n     * \u0639\u0631\u0636 \u0627\u0644\u0645\u062D\u062A\u0648\u0649 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\n     * @private\n     */\n    _renderMainContent() {\n        return `\n            <div class=\"booking-view\">\n                <div class=\"row\">\n                    <div class=\"col-md-8 room-selector-container\"></div>\n                    <div class=\"col-md-4 booking-summary-container\"></div>\n                </div>\n            </div>\n            <div class=\"management-view\" style=\"display:none;\">\n                <div class=\"booking-manager-container\"></div>\n            </div>\n        `;\n    }\n\n    /**\n     * \u0639\u0631\u0636 \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u062D\u0645\u064A\u0644\n     * @private\n     */\n    _renderLoadingState() {\n        return `\n            <div class=\"app-loading-state\">\n                <div class=\"spinner\"></div>\n                <p>${__('\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...')}</p>\n            </div>\n        `;\n    }\n\n    // ----------------------------------------\n    // Event Handling\n    // ----------------------------------------\n\n    /**\n     * \u0625\u0639\u062F\u0627\u062F \u062A\u0641\u0648\u064A\u0636 \u0627\u0644\u0623\u062D\u062F\u0627\u062B\n     * @private\n     */\n    _setupEventDelegation() {\n        this.wrapper.on('click', '[data-action]', (e) => {\n            const action = $(e.currentTarget).data('action');\n            this._handleAction(action, $(e.currentTarget).data());\n        });\n    }\n\n    /**\n     * \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u0623\u062D\u062F\u0627\u062B \u0628\u0646\u0627\u0621 \u0639\u0644\u0649 data-action\n     * @private\n     */\n    _handleAction(action, data) {\n        const actions = {\n            'switch-view': () => this._switchView(data.view),\n            'refresh': () => this._refreshData(),\n            'fullscreen': () => this._toggleFullscreen()\n        };\n\n        if (actions[action]) {\n            actions[action]();\n        }\n    }\n\n    // ----------------------------------------\n    // Component Initialization\n    // ----------------------------------------\n\n    /**\n     * \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629\n     * @private\n     */\n    _initializeComponents() {\n        this._initRoomSelector();\n        this._initBookingSummary();\n        this._initBookingDialog();\n        this._initBookingManager();\n    }\n\n    /**\n     * \u062A\u0647\u064A\u0626\u0629 \u0645\u062D\u062F\u062F \u0627\u0644\u063A\u0631\u0641\n     * @private\n     */\n    _initRoomSelector() {\n        this._components.roomSelector = new room_booking.RoomBooking.RoomSelector({\n            wrapper: this.wrapper.find('.room-selector-container'),\n            events: {\n                slotSelected: (args) => this._handleSlotSelected(args),\n                bookedSlotClicked: (args) => this._handleBookedSlotClick(args)\n            }\n        });\n    }\n\n    // ... (\u0628\u0642\u064A\u0629 \u062F\u0648\u0627\u0644 \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A \u0628\u0646\u0641\u0633 \u0627\u0644\u0646\u0645\u0637)\n    \n    // ----------------------------------------\n    // State Management\n    // ----------------------------------------\n\n    /**\n     * \u062A\u0628\u062F\u064A\u0644 \u0628\u064A\u0646 \u0648\u0627\u062C\u0647\u0627\u062A \u0627\u0644\u062A\u0637\u0628\u064A\u0642\n     * @private\n     */\n    _switchView(view) {\n        if (this._state.currentView === view) return;\n        \n        this._state.currentView = view;\n        \n        const viewActions = {\n            'booking': () => {\n                this.wrapper.find('.booking-view').show();\n                this.wrapper.find('.management-view').hide();\n                this._updateActiveViewButtons('booking');\n            },\n            'management': () => {\n                this.wrapper.find('.booking-view').hide();\n                this.wrapper.find('.management-view').show();\n                this._updateActiveViewButtons('management');\n                this._refreshBookings();\n            }\n        };\n\n        viewActions[view]();\n    }\n\n    /**\n     * \u062A\u062D\u062F\u064A\u062B \u0623\u0632\u0631\u0627\u0631 \u0639\u0631\u0636 \u0627\u0644\u0648\u0627\u062C\u0647\u0629\n     * @private\n     */\n    _updateActiveViewButtons(activeView) {\n        this.wrapper.find('.btn-booking-view').toggleClass('active', activeView === 'booking');\n        this.wrapper.find('.btn-management-view').toggleClass('active', activeView === 'management');\n    }\n\n    // ... (\u0628\u0642\u064A\u0629 \u0627\u0644\u062F\u0648\u0627\u0644 \u0628\u0646\u0641\u0633 \u0627\u0644\u0646\u0645\u0637 \u0645\u0639 \u062A\u062D\u0633\u064A\u0646 \u0627\u0644\u062A\u0635\u0645\u064A\u0645)\n    \n    // ----------------------------------------\n    // Styles\n    // ----------------------------------------\n\n    /**\n     * \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0623\u0646\u0645\u0627\u0637 \u0639\u0644\u0649 \u0627\u0644\u062A\u0637\u0628\u064A\u0642\n     * @private\n     */\n    _applyStyles() {\n        const styles = `\n            .room-booking-app {\n                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n                padding: 20px;\n            }\n            \n            .app-controls {\n                display: flex;\n                justify-content: space-between;\n                margin-bottom: 20px;\n                background: #f8f9fa;\n                padding: 10px 15px;\n                border-radius: 5px;\n                align-items: center;\n            }\n            \n            .view-switcher .btn {\n                margin-right: 5px;\n                transition: all 0.3s ease;\n            }\n            \n            .btn.active {\n                background-color: var(--primary-color, #4CAF50);\n                color: white;\n            }\n            \n            .app-loading-state {\n                position: fixed;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background: rgba(255,255,255,0.9);\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                z-index: 1000;\n                backdrop-filter: blur(2px);\n            }\n            \n            .app-loading-state .spinner {\n                border: 5px solid #f3f3f3;\n                border-top: 5px solid var(--primary-color, #3498db);\n                border-radius: 50%;\n                width: 50px;\n                height: 50px;\n                animation: spin 1s linear infinite;\n            }\n            \n            @keyframes spin {\n                0% { transform: rotate(0deg); }\n                100% { transform: rotate(360deg); }\n            }\n        `;\n\n        $('<style>').text(styles).appendTo('head');\n    }\n};\n\n// \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u062A\u0637\u0628\u064A\u0642 \u0639\u0646\u062F \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0635\u0641\u062D\u0629\nfrappe.pages['roombooking'].on_page_load = function(wrapper) {\n    new room_booking.RoomBooking.Application(wrapper);\n};"],
  "mappings": "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",
  "names": []
}
