{
  "version": 3,
  "sources": ["../../../../../apps/room_booking/room_booking/public/js/room_selector.js", "../../../../../apps/room_booking/room_booking/public/js/room_explorer.js", "../../../../../apps/room_booking/room_booking/public/js/payment_processor.js", "../../../../../apps/room_booking/room_booking/public/js/theme_manager.js", "../../../../../apps/room_booking/room_booking/public/js/booking_manager.js", "../../../../../apps/room_booking/room_booking/public/js/3d_room_viewer.js", "../../../../../apps/room_booking/room_booking/public/js/booking_analytics.js", "../../../../../apps/room_booking/room_booking/public/js/equipment_manager.js", "../../../../../apps/room_booking/room_booking/public/js/notification_center.js", "../../../../../apps/room_booking/room_booking/public/js/voice_controller.js", "../../../../../apps/room_booking/room_booking/public/js/booking_cart.js", "../../../../../apps/room_booking/room_booking/public/js/booking_dialog.js", "../../../../../apps/room_booking/room_booking/public/js/helpers.js", "../../../../../apps/room_booking/room_booking/public/js/room_booking_app.js"],
  "sourcesContent": ["frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \u0645\u0643\u0648\u0646 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u063A\u0631\u0641\u0629 \u0648\u0627\u0644\u0641\u062A\u0631\u0627\u062A \u0627\u0644\u0632\u0645\u0646\u064A\u0629\n * @class room_booking.RoomBooking.RoomSelector\n */\nroom_booking.RoomBooking.RoomSelector = class {\n    constructor({ wrapper, events = {}, settings = {} }) {\n        this.wrapper = $(wrapper);\n        this.events = events;\n        this.settings = settings;\n        this.state = { \n            branches: [], \n            slotsData: {}, \n            isLoading: false,\n            selectedSlots: []\n        };\n        this.init_component();\n    }\n\n    init_component() {\n        this.render();\n        this.add_styles();\n        this.load_branches();\n        this.bind_events();\n    }\n\n    render() {\n        this.wrapper.html(`\n            <div class=\"room-booking-container\">\n                <div class=\"row filter-section\">\n                    <div class=\"col-md-4\">\n                        <label>${__('Branch')}</label>\n                        <select class=\"form-control branch-filter\"></select>\n                    </div>\n                    <div class=\"col-md-4\">\n                        <label>${__('Date')}</label>\n                        <input type=\"date\" class=\"form-control date-filter\" \n                               value=\"${frappe.datetime.get_today()}\" \n                               min=\"${frappe.datetime.get_today()}\">\n                    </div>\n                    <div class=\"col-md-4\">\n                        <label>${__('Capacity')}</label>\n                        <select class=\"form-control capacity-filter\">\n                            <option value=\"\">${__('Any')}</option>\n                            <option value=\"5\">5+</option>\n                            <option value=\"10\">10+</option>\n                            <option value=\"20\">20+</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class=\"loading-state text-center\" style=\"display:none;\">\n                    <div class=\"spinner-border\"></div>\n                    <p>${__('Loading rooms...')}</p>\n                </div>\n\n                <div class=\"selection-summary alert alert-info mt-3\" style=\"display:none;\">\n                    <div class=\"d-flex justify-content-between align-items-center\">\n                        <div>\n                            <strong>${__('Selected')}:</strong> \n                            <span class=\"selected-period\"></span> | \n                            <span class=\"selected-duration\"></span> | \n                            <span class=\"selected-price\"></span>\n                        </div>\n                        <button class=\"btn btn-primary btn-book\">\n                            <i class=\"fa fa-calendar-check\"></i> ${__('Book Now')}\n                        </button>\n                    </div>\n                </div>\n\n                <div class=\"room-list-container row mt-4\"></div>\n\n                <div class=\"help-section mt-4\">\n                    <div class=\"card\">\n                        <div class=\"card-header\"><h5>${__('How to Book')}</h5></div>\n                        <div class=\"card-body\">\n                            <ol>\n                                <li>${__('Select branch, date and capacity')}</li>\n                                <li>${__('Click on available time slots')}</li>\n                                <li>${__('Review your selection in the summary')}</li>\n                                <li>${__('Click \"Book Now\" to confirm')}</li>\n                            </ol>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `);\n    }\n\n    add_styles() {\n        if ($(\"#room-booking-style\").length) return;\n        const styles = `\n            <style id=\"room-booking-style\">\n                .room-booking-container {\n                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n                }\n                \n                .slots-grid {\n                    display: grid;\n                    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n                    gap: 10px;\n                    margin-top: 15px;\n                }\n                \n                .time-slot {\n                    padding: 10px;\n                    border-radius: 6px;\n                    text-align: center;\n                    cursor: pointer;\n                    font-size: 13px;\n                    border: 1px solid #ddd;\n                    transition: all 0.3s ease;\n                    position: relative;\n                    overflow: hidden;\n                }\n                \n                .time-slot::after {\n                    content: '';\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    height: 3px;\n                    background: rgba(0,0,0,0.1);\n                }\n                \n                .time-slot.available {\n                    background-color: #e8f5e9;\n                    border-color: #a5d6a7;\n                    color: #2e7d32;\n                }\n                \n                .time-slot.available:hover {\n                    background-color: #c8e6c9;\n                    transform: translateY(-2px);\n                    box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n                }\n                \n                .time-slot.available.selected {\n                    background-color: #4caf50;\n                    color: white;\n                    font-weight: bold;\n                }\n                \n                .time-slot.booked {\n                    background-color: #e3f2fd;\n                    border-color: #90caf9;\n                    color: #1565c0;\n                }\n                \n                .time-slot.booked:hover {\n                    background-color: #bbdefb;\n                }\n                \n                .time-slot .duration-badge {\n                    display: inline-block;\n                    background: rgba(0,0,0,0.1);\n                    padding: 2px 8px;\n                    border-radius: 10px;\n                    font-size: 11px;\n                    margin-top: 5px;\n                }\n                \n                .selection-summary {\n                    animation: fadeIn 0.3s ease;\n                    background-color: #e3f2fd;\n                    border-color: #bbdefb;\n                }\n                \n                @keyframes fadeIn {\n                    from { opacity: 0; transform: translateY(10px); }\n                    to { opacity: 1; transform: translateY(0); }\n                }\n                \n                .badge-available {\n                    background-color: #4caf50;\n                }\n                \n                .badge-booked {\n                    background-color: #2196f3;\n                }\n            </style>\n        `;\n        $(\"head\").append(styles);\n    }\n\n    bind_events() {\n        this.wrapper.on('change', '.branch-filter, .date-filter, .capacity-filter', () => this.load_rooms());\n        this.wrapper.on('click', '.time-slot.available', (e) => this.handle_available_slot_click(e));\n        this.wrapper.on('click', '.time-slot.booked', (e) => this.handle_booked_slot_click(e));\n        this.wrapper.on('click', '.btn-book', () => this.handle_book_click());\n    }\n\n    async load_branches() {\n        try {\n            const { message: branches = [] } = await frappe.call('room_booking.api.get_branches');\n            const $select = this.wrapper.find('.branch-filter').empty();\n            $select.append(`<option value=\"\">${__('All Branches')}</option>`);\n            branches.forEach(b => $select.append(`<option value=\"${b}\">${b}</option>`));\n            this.load_rooms();\n        } catch (error) {\n            console.error('Failed to load branches:', error);\n            this.show_error(__('Failed to load branches. Please try again.'));\n        }\n    }\n\n    async load_rooms() {\n        if (this.state.isLoading) return;\n        \n        this.set_loading(true);\n        this.clear_selection();\n        \n        try {\n            const filters = {\n                branch: this.wrapper.find('.branch-filter').val(),\n                date: this.wrapper.find('.date-filter').val(),\n                capacity: this.wrapper.find('.capacity-filter').val()\n            };\n            \n            const { message: rooms = [] } = await frappe.call({\n                method: 'room_booking.api.get_available_rooms_with_slots',\n                args: filters\n            });\n            \n            this.state.slotsData = {};\n            this.render_rooms(rooms);\n            \n        } catch (error) {\n            console.error('Failed to load rooms:', error);\n            this.show_error(__('Failed to load rooms. Please try again.'));\n        } finally {\n            this.set_loading(false);\n        }\n    }\n\n    render_rooms(rooms) {\n        const $container = this.wrapper.find('.room-list-container').empty();\n        \n        if (!rooms.length) {\n            $container.html(`\n                <div class=\"col-12\">\n                    <div class=\"alert alert-info\">\n                        <i class=\"fa fa-info-circle\"></i>\n                        ${__('No rooms available for selected criteria. Please try different filters.')}\n                    </div>\n                </div>\n            `);\n            return;\n        }\n        \n        rooms.forEach(room => {\n            this.state.slotsData[room.name] = room.available_slots || [];\n            \n            const $card = $(`\n                <div class=\"col-md-6 col-lg-4 mb-4\">\n                    <div class=\"card h-100\">\n                        <div class=\"card-header d-flex justify-content-between align-items-center\">\n                            <h5 class=\"mb-0\">${room.room_name}</h5>\n                            <span class=\"badge ${room.status === 'Available' ? 'badge-available' : 'badge-booked'}\">\n                                ${room.status}\n                            </span>\n                        </div>\n                        <div class=\"card-body\">\n                            <p><i class=\"fa fa-users text-muted\"></i> ${room.no_of_seats} ${__('seats')}</p>\n                            <p><i class=\"fa fa-money-bill-wave text-muted\"></i> \n                                ${room_booking.RoomBooking.helpers.formatCurrency(room.price_per_hour)}/${__('hour')}\n                            </p>\n                            <hr>\n                            <h6>${__('Available Time Slots')}</h6>\n                            <div class=\"slots-grid\" data-room=\"${room.name}\"></div>\n                        </div>\n                    </div>\n                </div>\n            `);\n            \n            $container.append($card);\n            this.render_slots(room.name);\n        });\n    }\n\n    render_slots(roomName) {\n        const slots = this.state.slotsData[roomName] || [];\n        const $container = this.wrapper.find(`.slots-grid[data-room=\"${roomName}\"]`).empty();\n        \n        if (!slots.length) {\n            $container.html(`\n                <div class=\"col-12\">\n                    <div class=\"alert alert-warning\">\n                        <i class=\"fa fa-exclamation-circle\"></i>\n                        ${__('No slots available for this room')}\n                    </div>\n                </div>\n            `);\n            return;\n        }\n        \n        slots.forEach(slot => {\n            const isBooked = (slot.status || '').toLowerCase() === 'booked';\n            const isAvailable = !isBooked;\n            const duration = room_booking.RoomBooking.helpers.calculateDuration(slot.start_time, slot.end_time);\n            \n            $container.append(`\n                <div class=\"time-slot ${isBooked ? 'booked' : 'available'}\" \n                     data-room=\"${roomName}\"\n                     data-start=\"${slot.start_time}\"\n                     data-end=\"${slot.end_time}\"\n                     data-status=\"${slot.status}\"\n                     data-price=\"${slot.price}\"\n                     data-booking-id=\"${slot.booking_id || ''}\"\n                     data-duration=\"${duration}\">\n                    <div class=\"time-range\">\n                        ${room_booking.RoomBooking.helpers.formatTimeForFrontend(slot.start_time)} - \n                        ${room_booking.RoomBooking.helpers.formatTimeForFrontend(slot.end_time)}\n                    </div>\n                    <div class=\"duration-badge\">\n                        ${duration} ${__('hours')}\n                    </div>\n                    <div class=\"price\">\n                        ${room_booking.RoomBooking.helpers.formatCurrency(slot.price)}\n                    </div>\n                </div>\n            `);\n        });\n    }\n\n    handle_available_slot_click(e) {\n        const $slot = $(e.currentTarget);\n        const room = $slot.data('room');\n        const slot = {\n            room,\n            start: $slot.data('start'),\n            end: $slot.data('end'),\n            price: $slot.data('price'),\n            duration: $slot.data('duration'),\n            status: $slot.data('status')\n        };\n        \n        // \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0645\u062E\u062A\u0627\u0631\u0629\n        this.state.selectedSlots = [slot];\n        this.update_selection_summary();\n        \n        // \u0641\u062A\u062D \u0646\u0645\u0648\u0630\u062C \u0627\u0644\u062D\u062C\u0632 \u0645\u0628\u0627\u0634\u0631\u0629\n        if (this.events.slot_selected) {\n            this.events.slot_selected({ room, slot });\n        }\n    }\n\n    handle_booked_slot_click(e) {\n        const $slot = $(e.currentTarget);\n        const bookingInfo = {\n            room: $slot.data('room'),\n            start: $slot.data('start'),\n            end: $slot.data('end'),\n            booking_id: $slot.data('booking-id'),\n            status: $slot.data('status')\n        };\n        \n        if (this.events.booked_slot_clicked) {\n            this.events.booked_slot_clicked(bookingInfo);\n        }\n    }\n\n    handle_book_click() {\n        if (this.state.selectedSlots.length && this.events.book_now_clicked) {\n            this.events.book_now_clicked(this.state.selectedSlots);\n        }\n    }\n\n    update_selection_summary() {\n        const $summary = this.wrapper.find('.selection-summary');\n        \n        if (!this.state.selectedSlots.length) {\n            $summary.hide();\n            return;\n        }\n        \n        const slot = this.state.selectedSlots[0];\n        const duration = slot.duration;\n        const price = slot.price;\n        \n        this.wrapper.find('.selected-period').text(\n            `${room_booking.RoomBooking.helpers.formatTimeForFrontend(slot.start)} - \n             ${room_booking.RoomBooking.helpers.formatTimeForFrontend(slot.end)}`\n        );\n        \n        this.wrapper.find('.selected-duration').text(`${duration} ${__('hours')}`);\n        this.wrapper.find('.selected-price').text(room_booking.RoomBooking.helpers.formatCurrency(price));\n        \n        $summary.show();\n    }\n\n    clear_selection() {\n        this.state.selectedSlots = [];\n        this.wrapper.find('.selection-summary').hide();\n        this.wrapper.find('.time-slot').removeClass('selected');\n    }\n\n    set_loading(loading) {\n        this.state.isLoading = loading;\n        this.wrapper.find('.loading-state').toggle(loading);\n        this.wrapper.find('.filter-section, .room-list-container, .help-section').toggle(!loading);\n    }\n\n    reload_rooms() {\n        this.load_rooms();\n    }\n\n    show_error(message) {\n        frappe.msgprint({\n            title: __('Error'),\n            message: message,\n            indicator: 'red'\n        });\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83C\uDFE8 \u0646\u0638\u0627\u0645 \u0627\u0633\u062A\u0643\u0634\u0627\u0641 \u0627\u0644\u063A\u0631\u0641 - \u0627\u0644\u0625\u0635\u062F\u0627\u0631 \u0627\u0644\u0645\u062D\u0633\u0646 \u0645\u0639 \u062A\u062A\u0628\u0639 \u0643\u0627\u0645\u0644 \u0644\u0644\u0639\u0645\u0644\u064A\u0627\u062A\n * @class room_booking.RoomBooking.RoomExplorer\n */\nroom_booking.RoomBooking.RoomExplorer = class {\n    constructor({ parent, onSlotSelect, onFilterChange }) {\n        console.log(\"\uD83D\uDE80 \u0628\u062F\u0621 \u062A\u0647\u064A\u0626\u0629 \u0645\u0633\u062A\u0643\u0634\u0641 \u0627\u0644\u063A\u0631\u0641...\");\n        \n        try {\n            // \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u0644\u0639\u0646\u0635\u0631 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\n            if (!parent || !parent.length) {\n                throw new Error(\"\u0639\u0646\u0635\u0631 \u0627\u0644\u0640 parent \u063A\u064A\u0631 \u0635\u0627\u0644\u062D \u0623\u0648 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F \u0641\u064A \u0627\u0644\u0640 DOM\");\n            }\n\n            this.parent = parent;\n            this.onSlotSelect = onSlotSelect || function() {\n                console.warn(\"\u26A0\uFE0F \u0644\u0645 \u064A\u062A\u0645 \u062A\u0648\u0641\u064A\u0631 \u062F\u0627\u0644\u0629 onSlotSelect\");\n            };\n            \n            this.onFilterChange = onFilterChange || function() {\n                console.warn(\"\u26A0\uFE0F \u0644\u0645 \u064A\u062A\u0645 \u062A\u0648\u0641\u064A\u0631 \u062F\u0627\u0644\u0629 onFilterChange\");\n            };\n            \n            this.heatmapData = {};\n            this.currentDate = frappe.datetime.get_today();\n            \n            console.log(\"\u2705 \u062A\u0645 \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u0645\u062A\u063A\u064A\u0631\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 \u0628\u0646\u062C\u0627\u062D\");\n            this.init();\n            \n        } catch (error) {\n            console.error(\"\u274C \u062E\u0637\u0623 \u0641\u064A \u0628\u0646\u0627\u0621 \u0645\u0633\u062A\u0643\u0634\u0641 \u0627\u0644\u063A\u0631\u0641:\", error);\n            this.showFatalError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u0627\u062F\u062D \u0623\u062B\u0646\u0627\u0621 \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u0646\u0638\u0627\u0645'));\n        }\n    }\n\n    init() {\n        console.log(\"\uD83D\uDD27 \u0628\u062F\u0621 \u062A\u0647\u064A\u0626\u0629 \u0645\u0643\u0648\u0646\u0627\u062A \u0645\u0633\u062A\u0643\u0634\u0641 \u0627\u0644\u063A\u0631\u0641...\");\n        \n        try {\n            this.renderSkeleton();\n            console.log(\"\uD83C\uDFA8 \u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0647\u064A\u0643\u0644 \u0627\u0644\u0623\u0633\u0627\u0633\u064A \u0644\u0648\u0627\u062C\u0647\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\");\n            \n            this.loadRooms();\n            console.log(\"\uD83D\uDCE6 \u0628\u062F\u0621 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641...\");\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u0645\u0633\u062A\u0643\u0634\u0641:\", error);\n            this.showError(__('\u062A\u0639\u0630\u0631 \u062A\u062D\u0645\u064A\u0644 \u0648\u0627\u062C\u0647\u0629 \u0645\u0633\u062A\u0643\u0634\u0641 \u0627\u0644\u063A\u0631\u0641'));\n        }\n    }\n\n    renderSkeleton() {\n        console.log(\"\uD83D\uDEE0\uFE0F \u0628\u0646\u0627\u0621 \u0627\u0644\u0647\u064A\u0643\u0644 \u0627\u0644\u0623\u0633\u0627\u0633\u064A \u0644\u0644\u0648\u0627\u062C\u0647\u0629...\");\n        \n        try {\n            this.parent.html(`\n                <div class=\"room-explorer\">\n                    <!-- \u0641\u0644\u062A\u0631\u0627\u062A \u0627\u0644\u0628\u062D\u062B -->\n                    <div class=\"advanced-filters card mb-4\">\n                        <div class=\"card-header\">\n                            <h4><i class=\"fa fa-filter\"></i> ${__('\u0641\u0644\u0627\u062A\u0631 \u0627\u0644\u0628\u062D\u062B')}</h4>\n                        </div>\n                        <div class=\"card-body\">\n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label><i class=\"fa fa-building\"></i> ${__('\u0627\u0644\u0641\u0631\u0639')}</label>\n                                        <select class=\"form-control branch-filter\">\n                                            <option value=\"\">${__('\u062C\u0645\u064A\u0639 \u0627\u0644\u0641\u0631\u0648\u0639')}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label><i class=\"fa fa-users\"></i> ${__('\u0627\u0644\u0633\u0639\u0629')}</label>\n                                        <select class=\"form-control capacity-filter\">\n                                            <option value=\"\">${__('\u062C\u0645\u064A\u0639 \u0627\u0644\u0633\u0639\u0627\u062A')}</option>\n                                            <option value=\"5\">5+ ${__('\u0623\u0634\u062E\u0627\u0635')}</option>\n                                            <option value=\"10\">10+ ${__('\u0623\u0634\u062E\u0627\u0635')}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u062D\u0645\u064A\u0644 -->\n                    <div class=\"loading-state text-center py-5\" style=\"display:none;\">\n                        <div class=\"spinner-border text-primary\" role=\"status\">\n                            <span class=\"sr-only\">${__('\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...')}</span>\n                        </div>\n                        <p class=\"mt-3\">${__('\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641...')}</p>\n                    </div>\n\n                    <!-- \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u063A\u0631\u0641 -->\n                    <div class=\"rooms-list\"></div>\n                </div>\n            `);\n            \n            console.log(\"\uD83C\uDFAF \u0625\u0639\u062F\u0627\u062F \u0645\u0633\u062A\u0645\u0639\u064A \u0627\u0644\u0623\u062D\u062F\u0627\u062B \u0644\u0644\u0641\u0644\u0627\u062A\u0631...\");\n            this.parent.find('.branch-filter, .capacity-filter').on('change', () => {\n                console.log(\"\uD83D\uDD0E \u062A\u063A\u064A\u064A\u0631 \u0641\u064A \u0627\u0644\u0641\u0644\u0627\u062A\u0631\u060C \u062C\u0627\u0631\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0646\u062A\u0627\u0626\u062C...\");\n                try {\n                    this.loadRooms();\n                } catch (error) {\n                    console.error(\"\u274C \u062E\u0637\u0623 \u0641\u064A \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0641\u0644\u0627\u062A\u0631:\", error);\n                    this.showError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0641\u0644\u0627\u062A\u0631'));\n                }\n            });\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u0628\u0646\u0627\u0621 \u0627\u0644\u0647\u064A\u0643\u0644 \u0627\u0644\u0623\u0633\u0627\u0633\u064A:\", error);\n            throw error;\n        }\n    }\n\n    async loadRooms() {\n        console.log(\"\uD83C\uDF10 \u0628\u062F\u0621 \u062C\u0644\u0628 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641 \u0645\u0646 \u0627\u0644\u062E\u0627\u062F\u0645...\");\n        \n        try {\n            this.showLoading(true);\n            \n            const filters = {\n                date: this.currentDate,\n                branch: this.parent.find('.branch-filter').val(),\n                capacity: this.parent.find('.capacity-filter').val()\n            };\n            \n            console.log(\"\uD83D\uDD0D \u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u0628\u062D\u062B \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u0629:\", filters);\n            \n            const { message: rooms } = await frappe.call({\n                method: 'room_booking.api.get_available_rooms_with_slots',\n                args: filters,\n                freeze: true,\n                callback: (response) => {\n                    if (response.exc) {\n                        console.error(\"\uD83D\uDEA8 \u062E\u0637\u0623 \u0641\u064A \u0627\u0633\u062A\u062C\u0627\u0628\u0629 \u0627\u0644\u062E\u0627\u062F\u0645:\", response.exc);\n                        throw new Error(__('\u0627\u0633\u062A\u062C\u0627\u0628\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 \u0645\u0646 \u0627\u0644\u062E\u0627\u062F\u0645'));\n                    }\n                }\n            });\n\n            if (!rooms || !Array.isArray(rooms)) {\n                console.warn(\"\u26A0\uFE0F \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 \u0623\u0648 \u0641\u0627\u0631\u063A\u0629\");\n                throw new Error(__('\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u063A\u0631\u0641 \u0645\u062A\u0627\u062D\u0629'));\n            }\n\n            console.log(`\u2705 \u062A\u0645 \u062A\u062D\u0645\u064A\u0644 ${rooms.length} \u063A\u0631\u0641\u0629 \u0628\u0646\u062C\u0627\u062D`);\n            this.renderRooms(rooms);\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u063A\u0631\u0641:\", error);\n            this.showError(__('\u062A\u0639\u0630\u0631 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641: ') + error.message);\n        } finally {\n            this.showLoading(false);\n        }\n    }\n\n    renderRooms(rooms) {\n        console.log(`\uD83C\uDFA8 \u0628\u062F\u0621 \u0639\u0631\u0636 ${rooms.length} \u063A\u0631\u0641\u0629...`);\n        \n        try {\n            const container = this.parent.find('.rooms-list');\n            container.empty();\n\n            if (rooms.length === 0) {\n                console.log(\"\u2139\uFE0F \u0644\u0627 \u062A\u0648\u062C\u062F \u063A\u0631\u0641 \u0645\u062A\u0627\u062D\u0629 \u0644\u0644\u0639\u0631\u0636\");\n                container.html(`\n                    <div class=\"no-rooms-message text-center py-5\">\n                        <i class=\"fa fa-door-closed fa-4x text-muted mb-4\"></i>\n                        <h4 class=\"text-muted\">${__('\u0644\u0627 \u062A\u0648\u062C\u062F \u063A\u0631\u0641 \u0645\u062A\u0627\u062D\u0629')}</h4>\n                        <p class=\"text-muted\">${__('\u062D\u0627\u0648\u0644 \u062A\u063A\u064A\u064A\u0631 \u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u0628\u062D\u062B')}</p>\n                        <button class=\"btn btn-primary btn-refresh mt-3\">\n                            <i class=\"fa fa-sync-alt\"></i> ${__('\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0646\u062A\u0627\u0626\u062C')}\n                        </button>\n                    </div>\n                `);\n                \n                container.find('.btn-refresh').on('click', () => this.loadRooms());\n                return;\n            }\n\n            rooms.forEach((room, index) => {\n                try {\n                    if (!this.validateRoomData(room)) {\n                        console.warn(`\u26A0\uFE0F \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 \u0641\u064A \u0627\u0644\u0641\u0647\u0631\u0633 ${index}:`, room);\n                        return;\n                    }\n\n                    console.log(`\uD83D\uDECF\uFE0F \u0639\u0631\u0636 \u0627\u0644\u063A\u0631\u0641\u0629 ${room.name} (${room.id})`);\n                    \n                    const roomCard = $(`\n                        <div class=\"room-card card mb-4\" data-room-id=\"${room.id}\">\n                            <div class=\"card-header d-flex justify-content-between align-items-center\">\n                                <h3 class=\"mb-0\">\n                                    <i class=\"fa fa-door-open\"></i> ${room.name}\n                                </h3>\n                                <span class=\"badge badge-${room.status === 'Available' ? 'success' : 'danger'}\">\n                                    ${this.getStatusText(room.status)}\n                                </span>\n                            </div>\n                            \n                            <div class=\"card-body\">\n                                <div class=\"room-meta row mb-3\">\n                                    <div class=\"col-md-4\">\n                                        <p><i class=\"fa fa-users\"></i> <strong>${__('\u0627\u0644\u0633\u0639\u0629')}:</strong> ${room.capacity}</p>\n                                    </div>\n                                    <div class=\"col-md-4\">\n                                        <p><i class=\"fa fa-money-bill-wave\"></i> <strong>${__('\u0627\u0644\u0633\u0639\u0631')}:</strong> ${this.formatPrice(room.price_per_hour)}</p>\n                                    </div>\n                                    <div class=\"col-md-4\">\n                                        <p><i class=\"fa fa-map-marker-alt\"></i> <strong>${__('\u0627\u0644\u0641\u0631\u0639')}:</strong> ${room.branch || __('\u063A\u064A\u0631 \u0645\u062D\u062F\u062F')}</p>\n                                    </div>\n                                </div>\n                                \n                                <h5 class=\"mb-3\"><i class=\"fa fa-clock\"></i> ${__('\u0627\u0644\u0623\u0648\u0642\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629')}</h5>\n                                <div class=\"slots-grid\"></div>\n                            </div>\n                        </div>\n                    `);\n\n                    this.renderTimeSlots(roomCard.find('.slots-grid'), room.slots || []);\n                    container.append(roomCard);\n                    \n                } catch (error) {\n                    console.error(`\u274C \u062E\u0637\u0623 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u063A\u0631\u0641\u0629 ${index}:`, error);\n                }\n            });\n\n            this.setupSlotSelectionHandlers();\n            console.log(\"\uD83C\uDF89 \u062A\u0645 \u0639\u0631\u0636 \u062C\u0645\u064A\u0639 \u0627\u0644\u063A\u0631\u0641 \u0628\u0646\u062C\u0627\u062D\");\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u063A\u0631\u0641:\", error);\n            this.showError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0639\u0631\u0636 \u0627\u0644\u063A\u0631\u0641'));\n        }\n    }\n\n    validateRoomData(room) {\n        if (!room || typeof room !== 'object') {\n            console.warn(\"\u274C \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 (\u0644\u064A\u0633\u062A \u0643\u0627\u0626\u0646)\");\n            return false;\n        }\n        \n        const requiredFields = ['id', 'name', 'capacity', 'price_per_hour', 'status'];\n        const missingFields = requiredFields.filter(field => !room[field]);\n        \n        if (missingFields.length > 0) {\n            console.warn(`\u26A0\uFE0F \u062D\u0642\u0648\u0644 \u0646\u0627\u0642\u0635\u0629 \u0641\u064A \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641\u0629: ${missingFields.join(', ')}`);\n            return false;\n        }\n        \n        return true;\n    }\n\n    renderTimeSlots(container, slots) {\n        console.log(`\u23F1\uFE0F \u0639\u0631\u0636 ${slots.length} \u0641\u062A\u0631\u0629 \u0632\u0645\u0646\u064A\u0629...`);\n        \n        try {\n            if (!slots || !Array.isArray(slots)) {\n                console.warn(\"\u26A0\uFE0F \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0641\u062A\u0631\u0627\u062A \u0627\u0644\u0632\u0645\u0646\u064A\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629\");\n                return;\n            }\n\n            if (slots.length === 0) {\n                container.html(`\n                    <div class=\"alert alert-info mb-0\">\n                        <i class=\"fa fa-info-circle\"></i> ${__('\u0644\u0627 \u062A\u0648\u062C\u062F \u0641\u062A\u0631\u0627\u062A \u0645\u062A\u0627\u062D\u0629 \u0644\u0647\u0630\u0647 \u0627\u0644\u063A\u0631\u0641\u0629')}\n                    </div>\n                `);\n                return;\n            }\n\n            slots.forEach((slot, index) => {\n                try {\n                    if (!this.validateSlotData(slot)) {\n                        console.warn(`\u26A0\uFE0F \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 \u0641\u064A \u0627\u0644\u0641\u0647\u0631\u0633 ${index}:`, slot);\n                        return;\n                    }\n\n                    const slotElement = $(`\n                        <div class=\"time-slot ${slot.status.toLowerCase()} mb-2\" \n                             data-start=\"${slot.start}\" \n                             data-end=\"${slot.end}\"\n                             data-status=\"${slot.status}\"\n                             title=\"${slot.status === 'Available' ? __('\u0627\u062D\u062C\u0632 \u0647\u0630\u0647 \u0627\u0644\u0641\u062A\u0631\u0629') : __('\u0647\u0630\u0647 \u0627\u0644\u0641\u062A\u0631\u0629 \u0645\u062D\u062C\u0648\u0632\u0629')}\">\n                            <div class=\"time-range\">\n                                <i class=\"fa fa-clock\"></i> ${slot.start} - ${slot.end}\n                            </div>\n                            <div class=\"slot-meta\">\n                                <span class=\"badge badge-light\">\n                                    <i class=\"fa fa-hourglass\"></i> ${slot.duration} ${__('\u0633\u0627\u0639\u0629')}\n                                </span>\n                                <span class=\"badge badge-primary\">\n                                    <i class=\"fa fa-money-bill-wave\"></i> ${this.formatPrice(slot.price)}\n                                </span>\n                            </div>\n                            ${slot.status === 'Available' ? `\n                                <button class=\"btn btn-sm btn-success btn-book-slot\">\n                                    <i class=\"fa fa-calendar-plus\"></i> ${__('\u062D\u062C\u0632')}\n                                </button>` : ''\n                            }\n                        </div>\n                    `);\n\n                    container.append(slotElement);\n                    \n                } catch (error) {\n                    console.error(`\u274C \u062E\u0637\u0623 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629 ${index}:`, error);\n                }\n            });\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u0641\u062A\u0631\u0627\u062A \u0627\u0644\u0632\u0645\u0646\u064A\u0629:\", error);\n            throw error;\n        }\n    }\n\n    validateSlotData(slot) {\n        if (!slot || typeof slot !== 'object') {\n            console.warn(\"\u274C \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 (\u0644\u064A\u0633\u062A \u0643\u0627\u0626\u0646)\");\n            return false;\n        }\n        \n        const requiredFields = ['start', 'end', 'status', 'duration', 'price'];\n        const missingFields = requiredFields.filter(field => !slot[field]);\n        \n        if (missingFields.length > 0) {\n            console.warn(`\u26A0\uFE0F \u062D\u0642\u0648\u0644 \u0646\u0627\u0642\u0635\u0629 \u0641\u064A \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0641\u062A\u0631\u0629: ${missingFields.join(', ')}`);\n            return false;\n        }\n        \n        return true;\n    }\n\n    setupSlotSelectionHandlers() {\n        console.log(\"\uD83D\uDDB1\uFE0F \u0625\u0639\u062F\u0627\u062F \u0645\u0639\u0627\u0644\u062C\u0627\u062A \u0623\u062D\u062F\u0627\u062B \u0627\u0644\u0641\u062A\u0631\u0627\u062A \u0627\u0644\u0632\u0645\u0646\u064A\u0629...\");\n        \n        this.parent.find('.btn-book-slot').on('click', (e) => {\n            e.stopPropagation();\n            \n            try {\n                const slotElement = $(e.currentTarget).closest('.time-slot');\n                const roomCard = slotElement.closest('.room-card');\n                \n                const roomId = roomCard.data('room-id');\n                const roomName = roomCard.find('.card-header h3').text().trim();\n                \n                const slotData = {\n                    start: slotElement.data('start'),\n                    end: slotElement.data('end'),\n                    price: slotElement.find('.badge-primary').text().replace(/[^\\d.]/g, ''),\n                    duration: slotElement.find('.badge-light').text().replace(/[^\\d.]/g, '')\n                };\n                \n                console.log(\"\uD83C\uDFAF \u062A\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 \u0641\u062A\u0631\u0629:\", {\n                    roomId,\n                    roomName,\n                    slotData\n                });\n                \n                this.onSlotSelect(roomId, slotData);\n                \n            } catch (error) {\n                console.error(\"\u274C \u062E\u0637\u0623 \u0641\u064A \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0641\u062A\u0631\u0629:\", error);\n                this.showError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629'));\n            }\n        });\n    }\n\n    showLoading(show) {\n        try {\n            const loader = this.parent.find('.loading-state');\n            if (show) {\n                loader.show();\n                this.parent.find('.rooms-list').hide();\n            } else {\n                loader.hide();\n                this.parent.find('.rooms-list').show();\n            }\n        } catch (error) {\n            console.error(\"\u274C \u062E\u0637\u0623 \u0641\u064A \u0639\u0631\u0636 \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u062D\u0645\u064A\u0644:\", error);\n        }\n    }\n\n    showError(msg) {\n        try {\n            console.error(\"\uD83D\uDCA5 \u0639\u0631\u0636 \u0631\u0633\u0627\u0644\u0629 \u062E\u0637\u0623:\", msg);\n            \n            this.parent.find('.rooms-list').html(`\n                <div class=\"error-state text-center py-5\">\n                    <i class=\"fa fa-exclamation-triangle fa-4x text-danger mb-4\"></i>\n                    <h4 class=\"text-danger\">${__('\u062D\u062F\u062B \u062E\u0637\u0623')}</h4>\n                    <p class=\"text-muted\">${msg}</p>\n                    <button class=\"btn btn-danger btn-retry mt-3\">\n                        <i class=\"fa fa-sync-alt\"></i> ${__('\u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629')}\n                    </button>\n                </div>\n            `);\n            \n            this.parent.find('.btn-retry').on('click', () => {\n                console.log(\"\uD83D\uDD04 \u0625\u0639\u0627\u062F\u0629 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0639\u062F \u0627\u0644\u062E\u0637\u0623...\");\n                this.loadRooms();\n            });\n            \n        } catch (error) {\n            console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u0639\u0631\u0636 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062E\u0637\u0623:\", error);\n            frappe.msgprint({\n                title: __('\u062E\u0637\u0623'),\n                message: msg,\n                indicator: 'red'\n            });\n        }\n    }\n\nshowFatalError(msg) {\n    try {\n        console.error(\"\uD83D\uDC80 \u062E\u0637\u0623 \u0641\u0627\u062F\u062D:\", msg);\n        \n        // \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0648\u062C\u0648\u062F this.parent \u0628\u0634\u0643\u0644 \u0635\u062D\u064A\u062D\n        if (!this.parent || !this.parent.length) {\n            console.error(\"\u0644\u0627 \u064A\u0645\u0643\u0646 \u0639\u0631\u0636 \u0627\u0644\u062E\u0637\u0623 - \u0639\u0646\u0635\u0631 parent \u063A\u064A\u0631 \u0645\u062A\u0627\u062D\");\n            document.write(`<div class=\"alert alert-danger\">${msg}</div>`);\n            return;\n        }\n        \n        this.parent.html(`\n            <div class=\"fatal-error text-center py-5\">\n                <i class=\"fa fa-skull-crossbones fa-4x text-danger mb-4\"></i>\n                <h3 class=\"text-danger\">${__('\u062E\u0637\u0623 \u0641\u0627\u062F\u062D')}</h3>\n                <p class=\"lead\">${msg}</p>\n                <div class=\"mt-4\">\n                    <button class=\"btn btn-danger btn-refresh mr-2\">\n                        <i class=\"fa fa-sync-alt\"></i> ${__('\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0635\u0641\u062D\u0629')}\n                    </button>\n                </div>\n            </div>\n        `);\n        \n        this.parent.find('.btn-refresh').on('click', () => location.reload());\n    } catch (error) {\n        console.error(\"\u274C \u0641\u0634\u0644 \u0641\u064A \u0639\u0631\u0636 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062E\u0637\u0623 \u0627\u0644\u0641\u0627\u062F\u062D:\", error);\n        alert(msg); // Fallback \u0628\u0633\u064A\u0637\n    }\n}\n\n    getStatusText(status) {\n        const statusMap = {\n            'Available': __('\u0645\u062A\u0627\u062D\u0629'),\n            'Booked': __('\u0645\u062D\u062C\u0648\u0632\u0629'),\n            'Maintenance': __('\u0635\u064A\u0627\u0646\u0629'),\n            'Reserved': __('\u0645\u062D\u062C\u0648\u0632\u0629 \u0645\u0633\u0628\u0642\u0627\u064B')\n        };\n        return statusMap[status] || status;\n    }\n\n    formatPrice(amount) {\n        try {\n            return room_booking.RoomBooking.helpers.formatCurrency(amount);\n        } catch (error) {\n            console.warn(\"\u26A0\uFE0F \u062E\u0637\u0623 \u0641\u064A \u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u0633\u0639\u0631\u060C \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u0642\u064A\u0645\u0629 \u0627\u0644\u0623\u0635\u0644\u064A\u0629\");\n            return amount;\n        }\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83D\uDCB3 \u0646\u0638\u0627\u0645 \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u062F\u0641\u0639 - \u0645\u0639 \u062F\u0641\u0639 QR \u0648\u0645\u062F\u0641\u0648\u0639\u0627\u062A \u0645\u062A\u0639\u062F\u062F\u0629\n */\nroom_booking.RoomBooking.PaymentProcessor = class {\n    constructor({ onSuccess, onCancel }) {\n        this.onSuccess = onSuccess;\n        this.onCancel = onCancel;\n        this.paymentMethods = [];\n        this.initPaymentMethods();\n    }\n\n    initPaymentMethods() {\n        this.paymentMethods = [\n            {\n                id: 'cash',\n                name: __('\u0646\u0642\u062F\u064A'),\n                icon: 'fa-money-bill-wave',\n                handler: () => this.processCashPayment()\n            },\n            {\n                id: 'credit_card',\n                name: __('\u0628\u0637\u0627\u0642\u0629 \u0627\u0626\u062A\u0645\u0627\u0646'),\n                icon: 'fa-credit-card',\n                handler: () => this.processCardPayment()\n            },\n            {\n                id: 'qr_payment',\n                name: __('\u062F\u0641\u0639 \u0628\u0627\u0644QR'),\n                icon: 'fa-qrcode',\n                handler: () => this.processQRPayment()\n            }\n        ];\n    }\n\n    startPayment({ items, customer, total }) {\n        this.currentPayment = { items, customer, total };\n        this.showPaymentDialog();\n    }\n\n    showPaymentDialog() {\n        this.dialog = new frappe.ui.Dialog({\n            title: __('\u0625\u062A\u0645\u0627\u0645 \u0627\u0644\u062F\u0641\u0639'),\n            size: 'extra-large',\n            fields: [\n                {\n                    fieldname: 'payment_method',\n                    label: __('\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639'),\n                    fieldtype: 'Select',\n                    options: this.paymentMethods.map(m => m.name).join('\\n'),\n                    default: this.paymentMethods[0].name,\n                    reqd: 1\n                },\n                {\n                    fieldname: 'qr_container',\n                    label: __('\u0645\u0633\u062D QR Code'),\n                    fieldtype: 'HTML',\n                    depends_on: \"eval:doc.payment_method == '\u062F\u0641\u0639 \u0628\u0627\u0644QR'\",\n                    html: `<div class=\"qr-payment-container\">\n                              <div class=\"qr-code\"></div>\n                              <p>${__('\u0627\u0633\u062A\u062E\u062F\u0645 \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0628\u0646\u0643 \u0644\u0645\u0633\u062D \u0627\u0644\u0643\u0648\u062F')}</p>\n                           </div>`\n                },\n                {\n                    fieldname: 'split_payment',\n                    label: __('\u062A\u0642\u0633\u064A\u0645 \u0627\u0644\u062F\u0641\u0639'),\n                    fieldtype: 'Check',\n                    description: __('\u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0623\u0643\u062B\u0631 \u0645\u0646 \u0637\u0631\u064A\u0642\u0629 \u062F\u0641\u0639')\n                },\n                {\n                    fieldname: 'split_methods',\n                    label: __('\u0637\u0631\u0642 \u0627\u0644\u062F\u0641\u0639 \u0627\u0644\u0625\u0636\u0627\u0641\u064A\u0629'),\n                    fieldtype: 'Table',\n                    depends_on: \"eval:doc.split_payment\",\n                    fields: [\n                        {\n                            fieldname: 'method',\n                            label: __('\u0627\u0644\u0637\u0631\u064A\u0642\u0629'),\n                            fieldtype: 'Select',\n                            options: this.paymentMethods.map(m => m.name).join('\\n')\n                        },\n                        {\n                            fieldname: 'amount',\n                            label: __('\u0627\u0644\u0645\u0628\u0644\u063A'),\n                            fieldtype: 'Currency'\n                        }\n                    ]\n                }\n            ],\n            primary_action: (values) => this.processPayment(values),\n            primary_action_label: __('\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639')\n        });\n\n        this.dialog.show();\n        this.generateQRCodeIfNeeded();\n    }\n\n    async processPayment(values) {\n        try {\n            const paymentResult = await this.validatePayment(values);\n            \n            if (paymentResult.success) {\n                this.onSuccess({\n                    amount: this.currentPayment.total,\n                    method: values.payment_method,\n                    reference: paymentResult.reference,\n                    timestamp: frappe.datetime.now_datetime()\n                });\n            } else {\n                frappe.msgprint(__('\u0641\u0634\u0644 \u0641\u064A \u0639\u0645\u0644\u064A\u0629 \u0627\u0644\u062F\u0641\u0639'));\n            }\n        } catch (error) {\n            console.error(\"Payment error:\", error);\n            frappe.msgprint(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629'));\n        } finally {\n            this.dialog.hide();\n        }\n    }\n\n    // ... (\u0637\u0631\u0642 \u0627\u0644\u062F\u0641\u0639 \u0627\u0644\u0623\u062E\u0631\u0649)\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83C\uDFA8 \u0645\u062F\u064A\u0631 \u0627\u0644\u0633\u0645\u0627\u062A \u0627\u0644\u0645\u0631\u0626\u064A\u0629 \u0645\u0639 \u0648\u0636\u0639 \u0627\u0644\u0638\u0644\u0627\u0645 \u0648\u0627\u0644\u0645\u0638\u0647\u0631 \u0627\u0644\u0645\u062E\u0635\u0635\n */\nroom_booking.RoomBooking.ThemeManager = class {\n    constructor({ themes, defaultTheme }) {\n        this.themes = themes;\n        this.currentTheme = defaultTheme;\n        this.init();\n    }\n\n    init() {\n        this.loadSavedTheme();\n        this.applyTheme(this.currentTheme);\n        this.initThemeSwitcher();\n    }\n\n    loadSavedTheme() {\n        const savedTheme = localStorage.getItem('roomBookingTheme');\n        if (savedTheme && this.themes.includes(savedTheme)) {\n            this.currentTheme = savedTheme;\n        }\n    }\n\n    applyTheme(theme) {\n        $('body').removeClass(this.themes.map(t => `theme-${t}`).join(' '));\n        $('body').addClass(`theme-${theme}`);\n        localStorage.setItem('roomBookingTheme', theme);\n        \n        // \u062A\u062D\u062F\u064A\u062B \u0648\u0627\u062C\u0647\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u062D\u0633\u0628 \u0627\u0644\u0633\u0645\u0629\n        // this.updateUIForTheme(theme);\n    }\n\n    initThemeSwitcher() {\n        this.switcher = $(`\n            <div class=\"theme-switcher\">\n                <div class=\"theme-options\">\n                    ${this.themes.map(theme => `\n                        <div class=\"theme-option ${theme === this.currentTheme ? 'active' : ''}\" \n                             data-theme=\"${theme}\">\n                            <div class=\"theme-preview ${theme}\"></div>\n                            <span>${this.getThemeName(theme)}</span>\n                        </div>\n                    `).join('')}\n                </div>\n                <button class=\"btn btn-toggle-theme\">\n                    <i class=\"fa fa-moon\"></i>\n                </button>\n            </div>\n        `);\n\n        $('body').append(this.switcher);\n        this.bindEvents();\n    }\n\n    getThemeName(theme) {\n        const names = {\n            'light': __('\u0641\u0627\u062A\u062D'),\n            'dark': __('\u062F\u0627\u0643\u0646'),\n            'corporate': __('\u0634\u0631\u0643\u0627\u062A')\n        };\n        return names[theme] || theme;\n    }\n\n    bindEvents() {\n        this.switcher.on('click', '.theme-option', (e) => {\n            const theme = $(e.currentTarget).data('theme');\n            this.switchTheme(theme);\n        });\n\n        this.switcher.on('click', '.btn-toggle-theme', () => {\n            this.toggleDarkMode();\n        });\n    }\n\n    toggleDarkMode() {\n        const newTheme = this.currentTheme === 'dark' ? 'light' : 'dark';\n        this.switchTheme(newTheme);\n    }\n\n    switchTheme(theme) {\n        this.currentTheme = theme;\n        this.applyTheme(theme);\n        this.switcher.find('.theme-option').removeClass('active');\n        this.switcher.find(`.theme-option[data-theme=\"${theme}\"]`).addClass('active');\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83D\uDCC5 \u0646\u0638\u0627\u0645 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A \u0627\u0644\u0645\u062A\u0643\u0627\u0645\u0644 - \u0627\u0644\u0625\u0635\u062F\u0627\u0631 \u0627\u0644\u0646\u0647\u0627\u0626\u064A \u0627\u0644\u0645\u0639\u062F\u0644\n * @class room_booking.RoomBooking.BookingManager\n */\nroom_booking.RoomBooking.BookingManager = class {\n    constructor({ wrapper, onBookingUpdate }) {\n        // \u0627\u0644\u062A\u062D\u0642\u0642 \u0627\u0644\u0623\u0633\u0627\u0633\u064A \u0645\u0646 \u0627\u0644\u0639\u0646\u0635\u0631 \u0627\u0644\u0645\u063A\u0644\u0641\n        if (!wrapper || !$(wrapper).length) {\n            this.showFatalError(__('\u0639\u0646\u0635\u0631 \u0627\u0644\u0640 wrapper \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F \u0641\u064A \u0627\u0644\u0635\u0641\u062D\u0629'));\n            return;\n        }\n\n        try {\n            this.wrapper = $(wrapper);\n            this.onBookingUpdate = onBookingUpdate || function() {};\n            this.currentBooking = null;\n            \n            // \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u0637\u0628\u064A\u0642 \u0645\u0639 \u0642\u064A\u0645 \u0627\u0641\u062A\u0631\u0627\u0636\u064A\u0629\n            this.state = {\n                isLoading: false,\n                calendarInitialized: false,\n                bookings: [],\n                errorContainer: null\n            };\n\n            this.init();\n            \n        } catch (error) {\n            console.error(\"\u062A\u0639\u0630\u0631 \u062A\u0647\u064A\u0626\u0629 \u0645\u062F\u064A\u0631 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A:\", error);\n            this.showFatalError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u062A\u0648\u0642\u0639 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062A\u0647\u064A\u0626\u0629'));\n        }\n    }\n\n    async init() {\n        try {\n            // \u0625\u0646\u0634\u0627\u0621 \u0639\u0646\u0627\u0635\u0631 \u0648\u0627\u062C\u0647\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\n            this.renderBaseLayout();\n            \n            // \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0643\u062A\u0628\u0627\u062A \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629\n            const libLoaded = await this.loadCalendarLibrary();\n            if (!libLoaded) return;\n            \n            // \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0623\u0648\u0644\u064A\u0629\n            await this.loadInitialBookings();\n            \n            // \u0625\u0639\u062F\u0627\u062F \u0645\u0633\u062A\u0645\u0639\u064A \u0627\u0644\u0623\u062D\u062F\u0627\u062B\n            this.setupEventListeners();\n            \n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u062A\u0647\u064A\u0626\u0629:\", error);\n            this.showError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0645\u062F\u064A\u0631 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A'));\n        }\n    }\n\n    renderBaseLayout() {\n        try {\n            // HTML \u0623\u0633\u0627\u0633\u064A \u0645\u0639 \u062A\u062D\u0633\u064A\u0646\u0627\u062A \u0644\u0644\u0639\u0631\u0636 \u0639\u0644\u0649 \u0627\u0644\u0623\u062C\u0647\u0632\u0629 \u0627\u0644\u0645\u062E\u062A\u0644\u0641\u0629\n            this.wrapper.html(`\n                <div class=\"booking-manager\">\n                    <!-- \u0634\u0631\u064A\u0637 \u0627\u0644\u062A\u062D\u0643\u0645 -->\n                    <div class=\"manager-header\">\n                        <h2><i class=\"fa fa-calendar-alt\"></i> ${__('\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A')}</h2>\n                        <div class=\"header-actions\">\n                            <button class=\"btn btn-refresh\">\n                                <i class=\"fa fa-sync-alt\"></i> ${__('\u062A\u062D\u062F\u064A\u062B')}\n                            </button>\n                            <button class=\"btn btn-add-booking\">\n                                <i class=\"fa fa-plus\"></i> ${__('\u062D\u062C\u0632 \u062C\u062F\u064A\u062F')}\n                            </button>\n                        </div>\n                    </div>\n                    \n                    <!-- \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u062D\u0645\u064A\u0644 -->\n                    <div class=\"loading-state\" style=\"display:none;\">\n                        <div class=\"spinner\"></div>\n                        <p>${__('\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...')}</p>\n                    </div>\n                    \n                    <!-- \u0627\u0644\u062A\u0642\u0648\u064A\u0645 -->\n                    <div class=\"calendar-container\">\n                        <div class=\"calendar-view\"></div>\n                        <div class=\"calendar-error alert alert-danger\" style=\"display:none;\"></div>\n                    </div>\n                    \n                    <!-- \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u062C\u0632 -->\n                    <div class=\"booking-details card mt-4\">\n                        <div class=\"card-header\">\n                            <h3 class=\"card-title\">${__('\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u062C\u0632')}</h3>\n                        </div>\n                        <div class=\"card-body\">\n                            <div class=\"detail-content empty-state\">\n                                <i class=\"fa fa-calendar fa-3x text-muted\"></i>\n                                <p class=\"text-muted\">${__('\u0627\u062E\u062A\u0631 \u062D\u062C\u0632\u0627\u064B \u0644\u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644')}</p>\n                            </div>\n                            <div class=\"detail-actions mt-3\" style=\"display:none;\">\n                                <button class=\"btn btn-modify btn-sm btn-primary\">\n                                    <i class=\"fa fa-edit\"></i> ${__('\u062A\u0639\u062F\u064A\u0644')}\n                                </button>\n                                <button class=\"btn btn-cancel btn-sm btn-danger\">\n                                    <i class=\"fa fa-times\"></i> ${__('\u0625\u0644\u063A\u0627\u0621')}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `);\n            \n            // \u062A\u062E\u0632\u064A\u0646 \u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0645\u0647\u0645\u0629 \u0644\u0644\u0648\u0635\u0648\u0644 \u0627\u0644\u0633\u0631\u064A\u0639\n            this.state.errorContainer = this.wrapper.find('.calendar-error');\n            \n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u0648\u0627\u062C\u0647\u0629:\", error);\n            throw error;\n        }\n    }\n\n    async loadCalendarLibrary() {\n        try {\n            // \u0625\u0630\u0627 \u0643\u0627\u0646\u062A \u0627\u0644\u0645\u0643\u062A\u0628\u0629 \u0645\u062D\u0645\u0644\u0629 \u0645\u0633\u0628\u0642\u0627\u064B\n            if (typeof FullCalendar !== 'undefined') return true;\n            \n            this.showLoading(true, __('\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062A\u0642\u0648\u064A\u0645...'));\n            \n            // \u062A\u062D\u0645\u064A\u0644 \u0645\u0643\u062A\u0628\u0629 FullCalendar \u0628\u0634\u0643\u0644 \u062F\u064A\u0646\u0627\u0645\u064A\u0643\u064A\n            await new Promise((resolve, reject) => {\n                const script = document.createElement('script');\n                script.src = 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js';\n                script.onload = resolve;\n                script.onerror = () => reject(new Error('\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0645\u0643\u062A\u0628\u0629 \u0627\u0644\u062A\u0642\u0648\u064A\u0645'));\n                document.head.appendChild(script);\n            });\n            \n            // \u062A\u062D\u0645\u064A\u0644 \u0645\u0644\u0641\u0627\u062A CSS \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629\n            const link = document.createElement('link');\n            link.rel = 'stylesheet';\n            link.href = 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css';\n            document.head.appendChild(link);\n            \n            // \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062A\u0631\u062C\u0645\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0625\u0630\u0627 \u0644\u0632\u0645 \u0627\u0644\u0623\u0645\u0631\n            await this.loadArabicLocale();\n            \n            return true;\n            \n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0643\u062A\u0628\u0629:\", error);\n            this.showCalendarError(__('\u062A\u0639\u0630\u0631 \u062A\u062D\u0645\u064A\u0644 \u0646\u0638\u0627\u0645 \u0627\u0644\u062A\u0642\u0648\u064A\u0645. \u064A\u0631\u062C\u0649 \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u062A\u0635\u0627\u0644 \u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A.'));\n            return false;\n            \n        } finally {\n            this.showLoading(false);\n        }\n    }\n\n    async loadArabicLocale() {\n        try {\n            if (FullCalendar.locales.ar) return;\n            \n            await new Promise((resolve) => {\n                const script = document.createElement('script');\n                script.src = 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/locales/ar.min.js';\n                script.onload = resolve;\n                document.head.appendChild(script);\n            });\n            \n        } catch (error) {\n            console.warn(\"\u062A\u0639\u0630\u0631 \u062A\u062D\u0645\u064A\u0644 \u0645\u0644\u0641 \u0627\u0644\u062A\u0631\u062C\u0645\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629:\", error);\n        }\n    }\n\n    async initCalendar() {\n        try {\n            if (this.state.calendarInitialized) return;\n            \n            const calendarEl = this.wrapper.find('.calendar-view')[0];\n            if (!calendarEl) {\n                throw new Error('\u0639\u0646\u0635\u0631 \u0627\u0644\u062A\u0642\u0648\u064A\u0645 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F');\n            }\n            \n            this.calendar = new FullCalendar.Calendar(calendarEl, {\n                initialView: 'timeGridWeek',\n                locale: 'ar',\n                direction: 'rtl',\n                headerToolbar: {\n                    left: 'prev,next today',\n                    center: 'title',\n                    right: 'timeGridWeek,timeGridDay,listWeek'\n                },\n                eventClick: (info) => {\n                    try {\n                        this.showBookingDetails(info.event);\n                    } catch (error) {\n                        console.error(\"\u062E\u0637\u0623 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644:\", error);\n                        this.showError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0639\u0631\u0636 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u062C\u0632'));\n                    }\n                },\n                events: async (fetchInfo, successCallback) => {\n                    try {\n                        const bookings = await this.fetchBookings(fetchInfo);\n                        successCallback(bookings);\n                    } catch (error) {\n                        console.error(\"\u062E\u0637\u0623 \u0641\u064A \u062C\u0644\u0628 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A:\", error);\n                        successCallback([]);\n                    }\n                },\n                eventContent: this.renderEventContent.bind(this)\n            });\n            \n            this.calendar.render();\n            this.state.calendarInitialized = true;\n            \n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u062A\u0642\u0648\u064A\u0645:\", error);\n            this.showCalendarError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062A\u0642\u0648\u064A\u0645'));\n            throw error;\n        }\n    }\n\n    async loadInitialBookings() {\n        try {\n            this.showLoading(true, __('\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A...'));\n            \n            // \u0646\u0637\u0627\u0642 \u0632\u0645\u0646\u064A \u0623\u0648\u0633\u0639 \u0644\u0636\u0645\u0627\u0646 \u0631\u0624\u064A\u0629 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A \u0627\u0644\u0642\u0631\u064A\u0628\u0629\n            const today = frappe.datetime.get_today();\n            const startDate = frappe.datetime.add_days(today, -30);\n            const endDate = frappe.datetime.add_days(today, 60);\n            \n            this.state.bookings = await this.fetchBookings({\n                start: new Date(startDate),\n                end: new Date(endDate)\n            });\n            \n            if (this.state.calendarInitialized) {\n                this.calendar.refetchEvents();\n            } else {\n                await this.initCalendar();\n            }\n            \n            this.onBookingUpdate(this.state.bookings);\n            \n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A:\", error);\n            this.showError(__('\u062A\u0639\u0630\u0631 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A'));\n            \n        } finally {\n            this.showLoading(false);\n        }\n    }\n\n    async fetchBookings(fetchInfo) {\n        try {\n            const { message: bookings } = await frappe.call({\n                method: 'room_booking.api.get_user_bookings',\n                args: {\n                    start_date: frappe.datetime.obj_to_str(fetchInfo.start),\n                    end_date: frappe.datetime.obj_to_str(fetchInfo.end)\n                },\n                freeze: this.state.isLoading,\n                always: () => this.showLoading(false)\n            });\n            \n            // \u062A\u062D\u0642\u0642 \u0645\u0646 \u0635\u062D\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0642\u0628\u0644 \u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629\n            if (!Array.isArray(bookings)) {\n                throw new Error('\u0627\u0633\u062A\u062C\u0627\u0628\u0629 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629 \u0645\u0646 \u0627\u0644\u062E\u0627\u062F\u0645');\n            }\n            \n            return bookings.map(booking => {\n                // \u062A\u062D\u0642\u0642 \u0645\u0646 \u0648\u062C\u0648\u062F \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629\n                if (!booking.name || !booking.start_time || !booking.end_time) {\n                    console.warn('\u062D\u062C\u0632 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D:', booking);\n                    return null;\n                }\n                \n                return {\n                    id: booking.name,\n                    title: `${booking.room_name || __('\u063A\u0631\u0641\u0629 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641\u0629')} - ${booking.customer_name || __('\u0639\u0645\u064A\u0644 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641')}`,\n                    start: booking.start_time,\n                    end: booking.end_time,\n                    extendedProps: {\n                        booking: booking,\n                        amount: booking.total_amount || 0,\n                        status: booking.status || 'Pending'\n                    },\n                    color: this.getStatusColor(booking.status),\n                    textColor: '#ffffff'\n                };\n            }).filter(Boolean); // \u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u0642\u064A\u0645 \u0627\u0644\u0641\u0627\u0631\u063A\u0629\n            \n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u062C\u0644\u0628 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A:\", error);\n            throw error;\n        }\n    }\n\n    renderEventContent(eventInfo) {\n        try {\n            const booking = eventInfo.event.extendedProps.booking;\n            return {\n                html: `\n                    <div class=\"fc-event-content\">\n                        <div class=\"fc-event-title\">${booking.room_name || __('\u063A\u0631\u0641\u0629')}</div>\n                        <div class=\"fc-event-time\">\n                            ${frappe.datetime.str_to_user(eventInfo.event.startStr).split(' ')[1]} - \n                            ${frappe.datetime.str_to_user(eventInfo.event.endStr).split(' ')[1]}\n                        </div>\n                        <div class=\"fc-event-status ${(booking.status || '').toLowerCase()}\">\n                            ${this.getStatusText(booking.status)}\n                        </div>\n                    </div>\n                `\n            };\n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u062D\u062F\u062B:\", error);\n            return { html: '<div class=\"fc-event-content\">\u062D\u062C\u0632</div>' };\n        }\n    }\n\n    showBookingDetails(calendarEvent) {\n        try {\n            const booking = calendarEvent.extendedProps.booking;\n            if (!booking) {\n                throw new Error('\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u062D\u062C\u0632 \u0644\u0639\u0631\u0636\u0647\u0627');\n            }\n            \n            this.currentBooking = booking;\n            \n            this.wrapper.find('.detail-content').html(`\n                <div class=\"booking-info\">\n                    <h4>${booking.room_name || __('\u063A\u0631\u0641\u0629 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641\u0629')}</h4>\n                    <div class=\"booking-meta\">\n                        <p>\n                            <i class=\"fa fa-calendar\"></i> \n                            ${frappe.datetime.str_to_user(booking.start_time) || __('\u063A\u064A\u0631 \u0645\u062D\u062F\u062F')}\n                        </p>\n                        <p>\n                            <i class=\"fa fa-clock\"></i> \n                            ${this.calculateDuration(booking.start_time, booking.end_time)}\n                        </p>\n                        <p>\n                            <i class=\"fa fa-user\"></i> \n                            ${booking.customer_name || __('\u063A\u064A\u0631 \u0645\u062D\u062F\u062F')}\n                        </p>\n                        <p>\n                            <i class=\"fa fa-money-bill-wave\"></i> \n                            ${room_booking.RoomBooking.helpers.formatCurrency(booking.total_amount) || '0.00'}\n                        </p>\n                    </div>\n                    <div class=\"status-badge ${(booking.status || '').toLowerCase()}\">\n                        ${this.getStatusText(booking.status)}\n                    </div>\n                </div>\n            `);\n            \n            this.wrapper.find('.detail-actions').show();\n            \n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644:\", error);\n            this.showError(__('\u062A\u0639\u0630\u0631 \u062A\u062D\u0645\u064A\u0644 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u062C\u0632'));\n        }\n    }\n\n    async cancelCurrentBooking() {\n        try {\n            if (!this.currentBooking) {\n                this.showError(__('\u0644\u0645 \u064A\u062A\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 \u0623\u064A \u062D\u062C\u0632 \u0644\u0644\u0625\u0644\u063A\u0627\u0621'));\n                return;\n            }\n            \n            frappe.confirm(\n                __('\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0625\u0644\u063A\u0627\u0621 \u0647\u0630\u0627 \u0627\u0644\u062D\u062C\u0632\u061F'),\n                () => this.processCancellation(this.currentBooking.id),\n                __('\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u062C\u0632')\n            );\n            \n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u0639\u0645\u0644\u064A\u0629 \u0627\u0644\u0625\u0644\u063A\u0627\u0621:\", error);\n            this.showError(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0645\u062D\u0627\u0648\u0644\u0629 \u0627\u0644\u0625\u0644\u063A\u0627\u0621'));\n        }\n    }\n\n    async processCancellation(bookingId) {\n        try {\n            this.showLoading(true, __('\u062C\u0627\u0631\u064A \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u0625\u0644\u063A\u0627\u0621...'));\n            \n            const { message: result } = await frappe.call({\n                method: 'room_booking.api.cancel_booking',\n                args: { booking_id: bookingId },\n                freeze: true\n            });\n            \n            if (result.success) {\n                frappe.show_alert({\n                    message: __('\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u062C\u0632 \u0628\u0646\u062C\u0627\u062D'),\n                    indicator: 'green'\n                }, 5);\n                \n                // \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A\n                this.calendar.refetchEvents();\n                this.resetDetailsView();\n            } else {\n                throw new Error(result.message || __('\u0641\u0634\u0644 \u0641\u064A \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u062C\u0632'));\n            }\n            \n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u062C\u0632:\", error);\n            this.showError(__('\u0641\u0634\u0644 \u0641\u064A \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u062C\u0632: ') + error.message);\n            \n        } finally {\n            this.showLoading(false);\n        }\n    }\n\n    resetDetailsView() {\n        this.wrapper.find('.detail-content').html(`\n            <div class=\"empty-state\">\n                <i class=\"fa fa-calendar fa-3x text-muted\"></i>\n                <p class=\"text-muted\">${__('\u0627\u062E\u062A\u0631 \u062D\u062C\u0632\u0627\u064B \u0644\u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644')}</p>\n            </div>\n        `);\n        this.wrapper.find('.detail-actions').hide();\n        this.currentBooking = null;\n    }\n\n    setupEventListeners() {\n        // \u0625\u0632\u0627\u0644\u0629 \u0623\u064A \u0645\u0633\u062A\u0645\u0639\u064A\u0646 \u0633\u0627\u0628\u0642\u064A\u0646 \u0644\u0645\u0646\u0639 \u0627\u0644\u062A\u0643\u0631\u0627\u0631\n        this.wrapper.off('click', '.btn-refresh');\n        this.wrapper.off('click', '.btn-cancel');\n        this.wrapper.off('click', '.btn-modify');\n        this.wrapper.off('click', '.btn-add-booking');\n        \n        // \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A\n        this.wrapper.on('click', '.btn-refresh', () => {\n            this.loadInitialBookings().catch(console.error);\n        });\n        \n        // \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062D\u062C\u0632\n        this.wrapper.on('click', '.btn-cancel', () => {\n            this.cancelCurrentBooking().catch(console.error);\n        });\n        \n        // \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062D\u062C\u0632\n        this.wrapper.on('click', '.btn-modify', () => {\n            frappe.msgprint(__('\u0647\u0630\u0647 \u0627\u0644\u0645\u064A\u0632\u0629 \u0642\u064A\u062F \u0627\u0644\u062A\u0637\u0648\u064A\u0631 \u062D\u0627\u0644\u064A\u0627\u064B'));\n        });\n        \n        // \u062D\u062C\u0632 \u062C\u062F\u064A\u062F\n        this.wrapper.on('click', '.btn-add-booking', () => {\n            frappe.set_route('app/room-booking');\n        });\n    }\n\n    showLoading(show, message) {\n        const loader = this.wrapper.find('.loading-state');\n        if (show) {\n            if (message) loader.find('p').text(message);\n            loader.show();\n        } else {\n            loader.hide();\n        }\n    }\n\n    showError(message) {\n        frappe.msgprint({\n            title: __('\u062E\u0637\u0623'),\n            message: message,\n            indicator: 'red'\n        });\n    }\n\n    showCalendarError(message) {\n        if (this.state.errorContainer) {\n            this.state.errorContainer\n                .html(`<i class=\"fa fa-exclamation-triangle\"></i> ${message}`)\n                .show();\n        } else {\n            this.showError(message);\n        }\n    }\n\n    showFatalError(message = __('\u062A\u0639\u0630\u0631 \u062A\u062D\u0645\u064A\u0644 \u0646\u0638\u0627\u0645 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A. \u064A\u0631\u062C\u0649 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0635\u0641\u062D\u0629 \u0623\u0648 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A.')) {\n        this.wrapper.html(`\n            <div class=\"alert alert-danger\">\n                <h3><i class=\"fa fa-exclamation-circle\"></i> ${__('\u062E\u0637\u0623 \u0641\u0627\u062F\u062D')}</h3>\n                <p>${message}</p>\n                <button class=\"btn btn-danger btn-refresh-page mt-2\">\n                    <i class=\"fa fa-sync-alt\"></i> ${__('\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0635\u0641\u062D\u0629')}\n                </button>\n            </div>\n        `);\n        \n        this.wrapper.find('.btn-refresh-page').on('click', () => location.reload());\n    }\n\n    getStatusText(status) {\n        const statusMap = {\n            'Confirmed': __('\u0645\u0624\u0643\u062F'),\n            'Cancelled': __('\u0645\u0644\u063A\u0649'),\n            'Completed': __('\u0645\u0643\u062A\u0645\u0644'),\n            'Pending': __('\u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631'),\n            'Draft': __('\u0645\u0633\u0648\u062F\u0629')\n        };\n        return statusMap[status] || status || __('\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641');\n    }\n\n    getStatusColor(status) {\n        const colors = {\n            'Confirmed': '#4CAF50',  // \u0623\u062E\u0636\u0631\n            'Cancelled': '#F44336',  // \u0623\u062D\u0645\u0631\n            'Completed': '#2196F3',  // \u0623\u0632\u0631\u0642\n            'Pending': '#FFC107',    // \u0623\u0635\u0641\u0631\n            'Draft': '#9E9E9E'       // \u0631\u0645\u0627\u062F\u064A\n        };\n        return colors[status] || '#757575';\n    }\n\n    calculateDuration(start, end) {\n        try {\n            if (!start || !end) return __('\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641');\n            \n            const startTime = frappe.datetime.str_to_obj(start);\n            const endTime = frappe.datetime.str_to_obj(end);\n            const diff = endTime - startTime;\n            \n            const hours = Math.floor(diff / (1000 * 60 * 60));\n            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n            \n            return `${hours} ${__('\u0633\u0627\u0639\u0629')} ${minutes} ${__('\u062F\u0642\u064A\u0642\u0629')}`;\n            \n        } catch (error) {\n            console.error(\"\u062E\u0637\u0623 \u0641\u064A \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u062F\u0629:\", error);\n            return __('\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641');\n        }\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83E\uDE9F \u0639\u0627\u0631\u0636 \u063A\u0631\u0641 \u062B\u0644\u0627\u062B\u064A \u0627\u0644\u0623\u0628\u0639\u0627\u062F \u0645\u0639 \u062A\u0641\u0627\u0639\u0644\u0627\u062A \u0648\u0627\u0642\u0639\u064A\u0629\n */\nroom_booking.RoomBooking.Room3DViewer = class {\n    constructor() {\n        this.currentRoom = null;\n        this.initViewer();\n    }\n\n    initViewer() {\n        this.container = $(`\n            <div class=\"3d-room-viewer\">\n                <div class=\"viewer-header\">\n                    <h3 class=\"room-title\"></h3>\n                    <button class=\"btn-close\"><i class=\"fa fa-times\"></i></button>\n                </div>\n                <div class=\"3d-container\"></div>\n                <div class=\"room-controls\">\n                    <button class=\"btn-control\" data-action=\"rotate\"><i class=\"fa fa-sync-alt\"></i></button>\n                    <button class=\"btn-control\" data-action=\"zoom-in\"><i class=\"fa fa-search-plus\"></i></button>\n                    <button class=\"btn-control\" data-action=\"zoom-out\"><i class=\"fa fa-search-minus\"></i></button>\n                    <button class=\"btn-control\" data-action=\"fullscreen\"><i class=\"fa fa-expand\"></i></button>\n                </div>\n            </div>\n        `).hide();\n        \n        $('body').append(this.container);\n        this.bindEvents();\n    }\n\n    loadRoom(roomData) {\n        this.currentRoom = roomData;\n        this.container.find('.room-title').text(roomData.name);\n        \n        // \u0645\u062D\u0627\u0643\u0627\u0629 \u062A\u062D\u0645\u064A\u0644 \u0646\u0645\u0648\u0630\u062C 3D (\u064A\u0645\u0643\u0646 \u0627\u0633\u062A\u0628\u062F\u0627\u0644\u0647\u0627 \u0628\u0645\u0643\u062A\u0628\u0629 \u0645\u062B\u0644 Three.js)\n        this.container.find('.3d-container').html(`\n            <div class=\"3d-placeholder\">\n                <img src=\"${roomData.image || '/assets/room_booking/images/3d_placeholder.jpg'}\" \n                     alt=\"${roomData.name}\">\n                <div class=\"hotspots\">\n                    ${roomData.equipment.map(item => `\n                        <div class=\"hotspot\" style=\"top:${item.y}%;left:${item.x}%\" \n                             data-tooltip=\"${item.name}\">\n                            <i class=\"fa ${item.icon || 'fa-info-circle'}\"></i>\n                        </div>\n                    `).join('')}\n                </div>\n            </div>\n        `);\n\n        this.show();\n    }\n\n    show() {\n        this.container.fadeIn();\n        $('body').addClass('no-scroll');\n    }\n\n    hide() {\n        this.container.fadeOut();\n        $('body').removeClass('no-scroll');\n    }\n\n    bindEvents() {\n        // \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0639\u0627\u0631\u0636\n        this.container.find('.btn-close').click(() => this.hide());\n\n        // \u0627\u0644\u062A\u062D\u0643\u0645 \u0641\u064A \u0627\u0644\u0645\u0634\u0647\u062F\n        this.container.on('click', '.btn-control', (e) => {\n            const action = $(e.currentTarget).data('action');\n            this.handleControlAction(action);\n        });\n\n        // \u0627\u0644\u062A\u0641\u0627\u0639\u0644 \u0645\u0639 \u0627\u0644\u0646\u0642\u0627\u0637 \u0627\u0644\u0633\u0627\u062E\u0646\u0629\n        this.container.on('mouseenter', '.hotspot', function() {\n            $(this).append(`<div class=\"tooltip\">${$(this).data('tooltip')}</div>`);\n        }).on('mouseleave', '.hotspot', function() {\n            $(this).find('.tooltip').remove();\n        });\n    }\n\n    handleControlAction(action) {\n        const placeholder = this.container.find('.3d-placeholder');\n        \n        switch(action) {\n            case 'rotate':\n                placeholder.toggleClass('rotate');\n                break;\n            case 'zoom-in':\n                placeholder.css('transform', (i, val) => {\n                    const scale = parseFloat(val.replace('scale(', '')) || 1;\n                    return `scale(${scale + 0.1})`;\n                });\n                break;\n            case 'zoom-out':\n                placeholder.css('transform', (i, val) => {\n                    const scale = parseFloat(val.replace('scale(', '')) || 1;\n                    return `scale(${Math.max(0.5, scale - 0.1)})`;\n                });\n                break;\n            case 'fullscreen':\n                this.container.toggleClass('fullscreen');\n                break;\n        }\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83D\uDCCA \u0646\u0638\u0627\u0645 \u062A\u062D\u0644\u064A\u0644\u0627\u062A \u0645\u062A\u0642\u062F\u0645 \u0645\u0639 \u0631\u0633\u0648\u0645 \u0628\u064A\u0627\u0646\u064A\u0629 \u062A\u0641\u0627\u0639\u0644\u064A\u0629\n */\nroom_booking.RoomBooking.AnalyticsDashboard = class {\n    constructor() {\n        this.charts = {};\n        this.init();\n    }\n\n    async init() {\n        await this.loadData();\n        this.render();\n        this.initCharts();\n    }\n\n    async loadData() {\n        try {\n            const { message } = await frappe.call({\n                method: 'room_booking.api.get_booking_analytics'\n            });\n            this.analyticsData = message;\n        } catch (error) {\n            console.error(\"Failed to load analytics:\", error);\n        }\n    }\n\n    render() {\n        this.container = $(`\n            <div class=\"analytics-dashboard\">\n                <div class=\"dashboard-header\">\n                    <h3><i class=\"fa fa-chart-bar\"></i> ${__('\u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A')}</h3>\n                    <div class=\"time-filters\">\n                        <select class=\"form-control period-filter\">\n                            <option value=\"day\">${__('\u0627\u0644\u064A\u0648\u0645')}</option>\n                            <option value=\"week\">${__('\u0627\u0644\u0623\u0633\u0628\u0648\u0639')}</option>\n                            <option value=\"month\" selected>${__('\u0627\u0644\u0634\u0647\u0631')}</option>\n                            <option value=\"year\">${__('\u0627\u0644\u0633\u0646\u0629')}</option>\n                        </select>\n                    </div>\n                </div>\n                \n                <div class=\"stats-cards\">\n                    <div class=\"stat-card total-bookings\">\n                        <h4>${__('\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A')}</h4>\n                        <div class=\"value\">0</div>\n                    </div>\n                    <div class=\"stat-card revenue\">\n                        <h4>${__('\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A')}</h4>\n                        <div class=\"value\">0 SAR</div>\n                    </div>\n                    <div class=\"stat-card occupancy-rate\">\n                        <h4>${__('\u0645\u0639\u062F\u0644 \u0627\u0644\u0625\u0634\u063A\u0627\u0644')}</h4>\n                        <div class=\"value\">0%</div>\n                    </div>\n                </div>\n                \n                <div class=\"charts-container\">\n                    <div class=\"chart-container bookings-chart\">\n                        <canvas id=\"bookingsTrendChart\"></canvas>\n                    </div>\n                    <div class=\"chart-container revenue-chart\">\n                        <canvas id=\"revenueTrendChart\"></canvas>\n                    </div>\n                </div>\n            </div>\n        `);\n\n        this.bindEvents();\n    }\n\n    initCharts() {\n        // \u0645\u062E\u0637\u0637 \u0627\u062A\u062C\u0627\u0647 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A\n        this.charts.bookingsTrend = new Chart(\n            this.container.find('#bookingsTrendChart')[0].getContext('2d'),\n            {\n                type: 'line',\n                data: this.prepareBookingsData(),\n                options: this.getChartOptions(__('\u062A\u0637\u0648\u0631 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A'))\n            }\n        );\n\n        // \u0645\u062E\u0637\u0637 \u0627\u062A\u062C\u0627\u0647 \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A\n        this.charts.revenueTrend = new Chart(\n            this.container.find('#revenueTrendChart')[0].getContext('2d'),\n            {\n                type: 'bar',\n                data: this.prepareRevenueData(),\n                options: this.getChartOptions(__('\u062A\u0637\u0648\u0631 \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A'), 'SAR')\n            }\n        );\n    }\n\n    prepareBookingsData() {\n        return {\n            labels: this.analyticsData.labels,\n            datasets: [{\n                label: __('\u0639\u062F\u062F \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A'),\n                data: this.analyticsData.bookings,\n                borderColor: '#4e73df',\n                backgroundColor: 'rgba(78, 115, 223, 0.05)',\n                tension: 0.3\n            }]\n        };\n    }\n\n    prepareRevenueData() {\n        return {\n            labels: this.analyticsData.labels,\n            datasets: [{\n                label: __('\u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A'),\n                data: this.analyticsData.revenue,\n                backgroundColor: '#1cc88a',\n                borderRadius: 3\n            }]\n        };\n    }\n\n    getChartOptions(title, unit='') {\n        return {\n            responsive: true,\n            plugins: {\n                title: { display: true, text: title },\n                tooltip: {\n                    callbacks: {\n                        label: (context) => `${context.dataset.label}: ${context.raw} ${unit}`\n                    }\n                }\n            },\n            scales: {\n                y: { beginAtZero: true }\n            }\n        };\n    }\n\n    bindEvents() {\n        this.container.on('change', '.period-filter', async () => {\n            await this.loadData();\n            this.updateCharts();\n            this.updateStats();\n        });\n    }\n\n    updateCharts() {\n        this.charts.bookingsTrend.data = this.prepareBookingsData();\n        this.charts.revenueTrend.data = this.prepareRevenueData();\n        this.charts.bookingsTrend.update();\n        this.charts.revenueTrend.update();\n    }\n\n    updateStats() {\n        this.container.find('.total-bookings .value').text(\n            this.analyticsData.total_bookings\n        );\n        \n        this.container.find('.revenue .value').text(\n            room_booking.RoomBooking.helpers.formatCurrency(this.analyticsData.total_revenue)\n        );\n        \n        this.container.find('.occupancy-rate .value').text(\n            `${this.analyticsData.occupancy_rate}%`\n        );\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83D\uDDA5\uFE0F \u0646\u0638\u0627\u0645 \u0625\u062F\u0627\u0631\u0629 \u062A\u062C\u0647\u064A\u0632\u0627\u062A \u0627\u0644\u063A\u0631\u0641 \u0645\u0639 \u0645\u0639\u0627\u064A\u0646\u0629 \u062D\u064A\u0629\n */\nroom_booking.RoomBooking.EquipmentManager = class {\n    constructor(roomId) {\n        this.roomId = roomId;\n        this.equipment = [];\n        this.init();\n    }\n\n    async init() {\n        await this.loadEquipment();\n        this.render();\n    }\n\n    async loadEquipment() {\n        try {\n            const { message } = await frappe.call({\n                method: 'room_booking.api.get_room_equipment',\n                args: { room_id: this.roomId }\n            });\n            this.equipment = message;\n        } catch (error) {\n            console.error(\"Failed to load equipment:\", error);\n        }\n    }\n\n    render() {\n        this.container = $(`\n            <div class=\"equipment-manager\">\n                <h4><i class=\"fa fa-tv\"></i> ${__('\u062A\u062C\u0647\u064A\u0632\u0627\u062A \u0627\u0644\u063A\u0631\u0641\u0629')}</h4>\n                <div class=\"equipment-grid\"></div>\n                <div class=\"equipment-preview\">\n                    <div class=\"preview-placeholder\">\n                        ${__('\u0627\u062E\u062A\u0631 \u062C\u0647\u0627\u0632\u0627\u064B \u0644\u0644\u0645\u0639\u0627\u064A\u0646\u0629')}\n                    </div>\n                </div>\n            </div>\n        `);\n\n        this.equipment.forEach(item => {\n            this.container.find('.equipment-grid').append(`\n                <div class=\"equipment-item\" data-id=\"${item.name}\">\n                    <i class=\"fa ${item.icon || 'fa-cube'}\"></i>\n                    <span>${item.equipment_name}</span>\n                </div>\n            `);\n        });\n\n        this.bindEvents();\n    }\n\n    bindEvents() {\n        this.container.on('click', '.equipment-item', (e) => {\n            const equipmentId = $(e.currentTarget).data('id');\n            this.showPreview(equipmentId);\n        });\n    }\n\n    showPreview(equipmentId) {\n        const item = this.equipment.find(e => e.name === equipmentId);\n        if (!item) return;\n\n        this.container.find('.equipment-preview').html(`\n            <div class=\"preview-content\">\n                <h5>${item.equipment_name}</h5>\n                <div class=\"preview-image\">\n                    <img src=\"${item.image || '/assets/room_booking/images/equipment_placeholder.jpg'}\" \n                         alt=\"${item.equipment_name}\">\n                </div>\n                <div class=\"preview-details\">\n                    <p><strong>${__('\u0627\u0644\u0646\u0648\u0639')}:</strong> ${item.equipment_type}</p>\n                    <p><strong>${__('\u0627\u0644\u0643\u0645\u064A\u0629')}:</strong> ${item.quantity}</p>\n                    <p><strong>${__('\u0627\u0644\u062D\u0627\u0644\u0629')}:</strong> ${item.status}</p>\n                    <p class=\"description\">${item.description || __('\u0644\u0627 \u064A\u0648\u062C\u062F \u0648\u0635\u0641 \u0645\u062A\u0627\u062D')}</p>\n                </div>\n            </div>\n        `);\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83D\uDD14 \u0646\u0638\u0627\u0645 \u0625\u0634\u0639\u0627\u0631\u0627\u062A \u0645\u062A\u0637\u0648\u0631 \u0645\u0639 \u062A\u0623\u062B\u064A\u0631\u0627\u062A \u0645\u0631\u0626\u064A\u0629\n */\nroom_booking.RoomBooking.NotificationCenter = class {\n    constructor() {\n        this.notifications = [];\n        this.initContainer();\n        this.initSound();\n    }\n\n    initContainer() {\n        this.container = $(`\n            <div class=\"notification-center\">\n                <div class=\"notification-bell\">\n                    <i class=\"fa fa-bell\"></i>\n                    <span class=\"badge\">0</span>\n                </div>\n                <div class=\"notifications-dropdown\"></div>\n            </div>\n        `);\n        \n        $('body').append(this.container);\n        this.bindEvents();\n    }\n\n    initSound() {\n        this.sounds = {\n            info: new Audio('/assets/room_booking/sounds/notification.mp3'),\n            success: new Audio('/assets/room_booking/sounds/success.mp3'),\n            error: new Audio('/assets/room_booking/sounds/error.mp3')\n        };\n    }\n\n    show(message, type='info', duration=3000) {\n        const id = Date.now();\n        const notification = $(`\n            <div class=\"notification ${type}\" data-id=\"${id}\">\n                <i class=\"fa ${this.getIcon(type)}\"></i>\n                <div class=\"message\">${message}</div>\n                <button class=\"btn-close\"><i class=\"fa fa-times\"></i></button>\n            </div>\n        `);\n\n        // \u0625\u0636\u0627\u0641\u0629 \u0644\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062A \u0627\u0644\u0639\u0627\u062C\u0644\u0629\n        if (type === 'urgent') {\n            this.container.find('.notifications-dropdown').prepend(notification);\n        } else {\n            this.container.find('.notifications-dropdown').append(notification);\n        }\n\n        // \u062A\u0623\u062B\u064A\u0631 \u0627\u0644\u0638\u0647\u0648\u0631\n        notification.hide().fadeIn(200);\n\n        // \u062A\u0634\u063A\u064A\u0644 \u0627\u0644\u0635\u0648\u062A\n        if (this.sounds[type]) {\n            this.sounds[type].cloneNode(true).play();\n        }\n\n        // \u0627\u0644\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A\n        this.updateBadge();\n\n        // \u0627\u0644\u0625\u062E\u0641\u0627\u0621 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A\n        if (duration > 0) {\n            setTimeout(() => {\n                notification.fadeOut(() => notification.remove());\n                this.updateBadge();\n            }, duration);\n        }\n\n        // \u062A\u062E\u0632\u064A\u0646 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\n        this.notifications.push({ id, message, type, timestamp: new Date() });\n    }\n\n    getIcon(type) {\n        const icons = {\n            info: 'fa-info-circle',\n            success: 'fa-check-circle',\n            warning: 'fa-exclamation-triangle',\n            error: 'fa-times-circle',\n            urgent: 'fa-bell'\n        };\n        return icons[type] || icons.info;\n    }\n\n    updateBadge() {\n        const count = this.container.find('.notification').length;\n        this.container.find('.badge').text(count).toggle(count > 0);\n    }\n\n    bindEvents() {\n        // \u0641\u062A\u062D/\u0625\u063A\u0644\u0627\u0642 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062A\n        this.container.find('.notification-bell').click(() => {\n            this.container.find('.notifications-dropdown').toggleClass('show');\n        });\n\n        // \u0625\u063A\u0644\u0627\u0642 \u0625\u0634\u0639\u0627\u0631 \u064A\u062F\u0648\u064A\u0627\u064B\n        this.container.on('click', '.btn-close', (e) => {\n            $(e.currentTarget).closest('.notification').fadeOut(() => {\n                $(e.currentTarget).remove();\n                this.updateBadge();\n            });\n        });\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \uD83C\uDFA4 \u0646\u0638\u0627\u0645 \u062A\u062D\u0643\u0645 \u0635\u0648\u062A\u064A \u0630\u0643\u064A \u0628\u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0635\u0648\u062A\u064A\u0629\n */\nroom_booking.RoomBooking.VoiceController = class {\n    constructor(app) {\n        this.app = app;\n        this.commands = {\n            '\u0627\u062D\u062C\u0632 \u063A\u0631\u0641\u0629': () => this.app.switchView('room_selection'),\n            '\u0639\u0631\u0636 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A': () => this.app.switchView('booking_management'),\n            '\u0628\u062D\u062B \u0639\u0646 \u063A\u0631\u0641\u0629': (query) => this.searchRooms(query),\n            '\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0635\u0641\u062D\u0629': () => location.reload(),\n            '\u0645\u0633\u0627\u0639\u062F\u0629': () => this.showHelp()\n        };\n        \n        this.init();\n    }\n\n    init() {\n        this.recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\n        this.recognition.lang = 'ar-SA';\n        this.recognition.interimResults = false;\n        \n        this.setupUI();\n        this.bindEvents();\n    }\n\n    setupUI() {\n        this.container = $(`\n            <div class=\"voice-controller\">\n                <button class=\"btn-voice-command\">\n                    <i class=\"fa fa-microphone\"></i>\n                </button>\n                <div class=\"voice-status\">\n                    <span class=\"listening-status\">${__('\u0627\u0646\u0642\u0631 \u0644\u0644\u062A\u062D\u062F\u062B')}</span>\n                    <div class=\"voice-wave\">\n                        <span class=\"wave-dot\"></span>\n                        <span class=\"wave-dot\"></span>\n                        <span class=\"wave-dot\"></span>\n                    </div>\n                </div>\n            </div>\n        `);\n        \n        $('body').append(this.container);\n    }\n\n    bindEvents() {\n        this.container.on('click', '.btn-voice-command', () => {\n            if (this.isListening) {\n                this.stopListening();\n            } else {\n                this.startListening();\n            }\n        });\n\n        this.recognition.onresult = (event) => {\n            const transcript = event.results[0][0].transcript;\n            this.processCommand(transcript);\n        };\n\n        this.recognition.onerror = (event) => {\n            console.error(\"Voice recognition error:\", event.error);\n            this.showStatus(__('\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u062A\u0639\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0635\u0648\u062A'), 'error');\n        };\n    }\n\n    startListening() {\n        this.recognition.start();\n        this.isListening = true;\n        this.showStatus(__('\u064A\u0633\u062A\u0645\u0639 \u0627\u0644\u0622\u0646...'), 'listening');\n        this.container.find('.btn-voice-command').addClass('active');\n    }\n\n    stopListening() {\n        this.recognition.stop();\n        this.isListening = false;\n        this.showStatus(__('\u0627\u0646\u0642\u0631 \u0644\u0644\u062A\u062D\u062F\u062B'), 'idle');\n        this.container.find('.btn-voice-command').removeClass('active');\n    }\n\n    processCommand(transcript) {\n        this.showStatus(__('\u064A\u0639\u0627\u0644\u062C \u0627\u0644\u0623\u0645\u0631...'), 'processing');\n        \n        let commandMatched = false;\n        for (const [cmd, action] of Object.entries(this.commands)) {\n            if (transcript.includes(cmd)) {\n                const query = transcript.replace(cmd, '').trim();\n                action(query);\n                commandMatched = true;\n                break;\n            }\n        }\n        \n        if (!commandMatched) {\n            this.showStatus(__('\u0644\u0645 \u0623\u0641\u0647\u0645 \u0627\u0644\u0623\u0645\u0631'), 'error');\n            frappe.msgprint(__('\u0644\u0645 \u0623\u062A\u0639\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0645\u0631 \u0627\u0644\u0635\u0648\u062A\u064A\u060C \u062D\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649'));\n        } else {\n            this.showStatus(__('\u062A\u0645 \u0627\u0644\u062A\u0646\u0641\u064A\u0630'), 'success');\n        }\n        \n        setTimeout(() => this.stopListening(), 2000);\n    }\n\n    showStatus(message, status) {\n        this.container.find('.listening-status').text(message);\n        this.container.removeClass('idle listening processing error success');\n        this.container.addClass(status);\n    }\n\n    searchRooms(query) {\n        // \u062A\u0646\u0641\u064A\u0630 \u0627\u0644\u0628\u062D\u062B \u062D\u0633\u0628 \u0627\u0644\u0627\u0633\u062A\u0639\u0644\u0627\u0645 \u0627\u0644\u0635\u0648\u062A\u064A\n        frappe.show_alert(__(`\u062C\u0627\u0631\u064A \u0627\u0644\u0628\u062D\u062B \u0639\u0646: ${query}`));\n        this.app.roomExplorer.applySearchFilter(query);\n    }\n\n    showHelp() {\n        const commandsList = Object.keys(this.commands).join('<br>');\n        frappe.msgprint({\n            title: __('\u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0635\u0648\u062A\u064A\u0629 \u0627\u0644\u0645\u062A\u0627\u062D\u0629'),\n            message: commandsList\n        });\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \u0645\u0643\u0648\u0646 \u0633\u0644\u0629 \u0627\u0644\u062D\u062C\u0632 \u0644\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A \u0627\u0644\u0645\u062D\u062F\u062F\u0629\n * @class room_booking.RoomBooking.BookingCart\n */\nroom_booking.RoomBooking.BookingCart = class {\n    constructor({ wrapper, events = {}, settings = {} }) {\n        this.wrapper = $(wrapper);\n        this.events = events;\n        this.settings = settings;\n        this.state = { \n            bookings: [], \n            customer: null,\n            selectedRoom: null\n        };\n        this.init_component();\n    }\n\n    init_component() {\n        this.render();\n        this.add_styles();\n        this.bind_events();\n    }\n\n    render() {\n        this.wrapper.html(`\n            <div class=\"booking-cart-container\">\n                <div class=\"cart-header\">\n                    <h4><i class=\"fa fa-shopping-cart\"></i> ${__('Booking Cart')}</h4>\n                </div>\n                \n                <div class=\"cart-items-container\">\n                    <div class=\"empty-cart-message\">\n                        <i class=\"fa fa-clock\"></i>\n                        <p>${__('No bookings selected yet')}</p>\n                    </div>\n                </div>\n                \n                <div class=\"cart-summary\">\n                    <div class=\"summary-row\">\n                        <span>${__('Total Duration')}:</span>\n                        <strong class=\"total-duration\">0 ${__('hours')}</strong>\n                    </div>\n                    <div class=\"summary-row\">\n                        <span>${__('Total Price')}:</span>\n                        <strong class=\"total-price\">${room_booking.RoomBooking.helpers.formatCurrency(0)}</strong>\n                    </div>\n                    \n                    <div class=\"customer-selection mt-3\">\n                        <label>${__('Customer')}</label>\n                        <div class=\"input-group\">\n                            <select class=\"form-control customer-select\" \n                                    data-placeholder=\"${__('Select customer')}\">\n                                <option value=\"\">${__('Select customer')}</option>\n                            </select>\n                            <div class=\"input-group-append\">\n                                <button class=\"btn btn-outline-secondary refresh-customers\" \n                                        title=\"${__('Refresh customers list')}\">\n                                    <i class=\"fa fa-sync-alt\"></i>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <button class=\"btn btn-primary btn-checkout mt-3\" disabled>\n                        <i class=\"fa fa-calendar-check\"></i> ${__('Confirm Booking')}\n                    </button>\n                </div>\n            </div>\n        `);\n        \n        this.$cartItems = this.wrapper.find('.cart-items-container');\n        this.$emptyMessage = this.wrapper.find('.empty-cart-message');\n        this.$customerSelect = this.wrapper.find('.customer-select');\n        this.$checkoutBtn = this.wrapper.find('.btn-checkout');\n    }\n\n    add_styles() {\n        const styles = `\n            <style>\n                .booking-cart-container {\n                    background: #fff;\n                    border-radius: 8px;\n                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n                    padding: 20px;\n                    height: 100%;\n                }\n                \n                .cart-header {\n                    border-bottom: 1px solid #eee;\n                    padding-bottom: 15px;\n                    margin-bottom: 15px;\n                }\n                \n                .cart-header h4 {\n                    color: #333;\n                    font-weight: 600;\n                }\n                \n                .cart-items-container {\n                    min-height: 200px;\n                    position: relative;\n                }\n                \n                .empty-cart-message {\n                    text-align: center;\n                    padding: 40px 0;\n                    color: #999;\n                }\n                \n                .empty-cart-message i {\n                    font-size: 40px;\n                    margin-bottom: 10px;\n                    opacity: 0.6;\n                }\n                \n                .cart-item {\n                    background: #f9f9f9;\n                    border-radius: 6px;\n                    padding: 12px;\n                    margin-bottom: 10px;\n                    border-left: 3px solid #4CAF50;\n                    transition: all 0.3s;\n                }\n                \n                .cart-item:hover {\n                    background: #f1f1f1;\n                }\n                \n                .cart-item-header {\n                    display: flex;\n                    justify-content: space-between;\n                    margin-bottom: 8px;\n                }\n                \n                .cart-item-title {\n                    font-weight: 600;\n                    color: #333;\n                }\n                \n                .cart-item-duration {\n                    background: rgba(0,0,0,0.1);\n                    padding: 2px 8px;\n                    border-radius: 10px;\n                    font-size: 12px;\n                }\n                \n                .cart-item-time {\n                    color: #666;\n                    font-size: 13px;\n                }\n                \n                .cart-item-price {\n                    font-weight: 600;\n                    color: #4CAF50;\n                }\n                \n                .cart-summary {\n                    border-top: 1px solid #eee;\n                    padding-top: 15px;\n                    margin-top: 15px;\n                }\n                \n                .summary-row {\n                    display: flex;\n                    justify-content: space-between;\n                    margin-bottom: 8px;\n                }\n                \n                .btn-checkout {\n                    width: 100%;\n                    padding: 10px;\n                    font-weight: 600;\n                }\n                \n                .btn-checkout:disabled {\n                    opacity: 0.7;\n                }\n            </style>\n        `;\n        this.wrapper.append(styles);\n    }\n\n    bind_events() {\n        this.$checkoutBtn.on('click', () => this.handle_checkout());\n        this.$customerSelect.on('change', () => this.handle_customer_change());\n        this.wrapper.on('click', '.remove-item', (e) => this.remove_booking($(e.target).data('id')));\n        this.wrapper.on('click', '.refresh-customers', () => this.load_customers());\n    }\n\n    async load_customers() {\n        try {\n            this.$customerSelect.prop('disabled', true);\n            const { message: customers } = await frappe.call('room_booking.api.get_customers');\n            \n            this.$customerSelect.empty().append('<option value=\"\">Select customer</option>');\n            customers.forEach(c => {\n                this.$customerSelect.append(`<option value=\"${c.name}\">${c.customer_name}</option>`);\n            });\n            \n            if (this.state.customer) {\n                this.$customerSelect.val(this.state.customer);\n            }\n        } catch (error) {\n            console.error('Failed to load customers:', error);\n            frappe.msgprint(__('Failed to load customers list'));\n        } finally {\n            this.$customerSelect.prop('disabled', false);\n        }\n    }\n\n    handle_customer_change() {\n        this.state.customer = this.$customerSelect.val();\n        this.update_checkout_button();\n    }\n\n    update_checkout_button() {\n        const canCheckout = this.state.bookings.length > 0 && this.state.customer;\n        this.$checkoutBtn.prop('disabled', !canCheckout);\n    }\n\n    handle_checkout() {\n        if (this.events.checkout) {\n            this.events.checkout({\n                bookings: this.state.bookings,\n                customer: this.state.customer,\n                room: this.state.selectedRoom\n            });\n        }\n    }\n\n    add_booking(room, slot) {\n        if (!this.state.selectedRoom) {\n            this.state.selectedRoom = room;\n        }\n        \n        // \u062A\u062C\u0646\u0628 \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0643\u0631\u0631\u0629\n        const exists = this.state.bookings.some(b => \n            b.start === slot.start && b.end === slot.end\n        );\n        \n        if (!exists) {\n            this.state.bookings.push({\n                ...slot,\n                room_name: room.room_name,\n                id: Date.now().toString()\n            });\n            this.render_bookings();\n        }\n        \n        this.update_checkout_button();\n    }\n\n    remove_booking(bookingId) {\n        this.state.bookings = this.state.bookings.filter(b => b.id !== bookingId);\n        this.render_bookings();\n        this.update_checkout_button();\n    }\n\n    render_bookings() {\n        this.$cartItems.empty();\n        \n        if (this.state.bookings.length === 0) {\n            this.$emptyMessage.show();\n            return;\n        }\n        \n        this.$emptyMessage.hide();\n        \n        let totalDuration = 0;\n        let totalPrice = 0;\n        \n        this.state.bookings.forEach(booking => {\n            const duration = room_booking.RoomBooking.helpers.calculateDuration(booking.start, booking.end);\n            totalDuration += duration;\n            totalPrice += parseFloat(booking.price || 0);\n            \n            const $item = $(`\n                <div class=\"cart-item\" data-id=\"${booking.id}\">\n                    <div class=\"cart-item-header\">\n                        <span class=\"cart-item-title\">${booking.room_name}</span>\n                        <span class=\"cart-item-duration\">${duration} ${__('hours')}</span>\n                    </div>\n                    <div class=\"cart-item-time\">\n                        ${room_booking.RoomBooking.helpers.formatTimeForFrontend(booking.start)} - \n                        ${room_booking.RoomBooking.helpers.formatTimeForFrontend(booking.end)}\n                    </div>\n                    <div class=\"d-flex justify-content-between align-items-center mt-2\">\n                        <span class=\"cart-item-price\">\n                            ${room_booking.RoomBooking.helpers.formatCurrency(booking.price)}\n                        </span>\n                        <button class=\"btn btn-sm btn-outline-danger remove-item\" \n                                data-id=\"${booking.id}\"\n                                title=\"${__('Remove')}\">\n                            <i class=\"fa fa-trash\"></i>\n                        </button>\n                    </div>\n                </div>\n            `);\n            \n            this.$cartItems.append($item);\n        });\n        \n        // \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0644\u062E\u0635\n        this.wrapper.find('.total-duration').text(`${totalDuration.toFixed(2)} ${__('hours')}`);\n        this.wrapper.find('.total-price').text(room_booking.RoomBooking.helpers.formatCurrency(totalPrice));\n    }\n\n    clear() {\n        this.state.bookings = [];\n        this.state.customer = null;\n        this.state.selectedRoom = null;\n        this.$customerSelect.val('');\n        this.render_bookings();\n        this.update_checkout_button();\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \u0645\u0643\u0648\u0646 \u062F\u0627\u064A\u0627\u0644\u0648\u062C \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u062C\u0632\n * @class room_booking.RoomBooking.BookingDialog\n */\nroom_booking.RoomBooking.BookingDialog = class {\n    constructor({ events = {}, settings = {} }) {\n        this.events = events;\n        this.settings = settings;\n        this.dialog = null;\n    }\n\n    /**\n     * \u0639\u0631\u0636 \u062F\u0627\u064A\u0627\u0644\u0648\u062C \u0627\u0644\u062D\u062C\u0632\n     * @param {object} room - \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641\u0629\n     * @param {object} slot - \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629\n     * @param {function} [onSuccess] - \u062F\u0627\u0644\u0629 \u0627\u0633\u062A\u062F\u0639\u0627\u0621 \u0639\u0646\u062F \u0646\u062C\u0627\u062D \u0627\u0644\u062D\u062C\u0632\n     */\n    show(room, slot, onSuccess) {\n        const duration = room_booking.RoomBooking.helpers.calculateDuration(slot.start, slot.end);\n        const pricePerHour = room.price_per_hour || 0;\n        \n        this.dialog = new frappe.ui.Dialog({\n            title: __('Confirm Booking'),\n            size: 'large',\n            fields: [\n                {\n                    label: __('Room'),\n                    fieldname: 'room',\n                    fieldtype: 'Data',\n                    read_only: true,\n                    default: room.room_name,\n                    description: __('Selected room')\n                },\n                {\n                    label: __('Customer'),\n                    fieldname: 'customer',\n                    fieldtype: 'Link',\n                    options: 'Customer',\n                    reqd: 1,\n                    get_query: () => {\n                        return {\n                            filters: { 'disabled': 0 }\n                        };\n                    }\n                },\n                {\n                    label: __('Date'),\n                    fieldname: 'date',\n                    fieldtype: 'Date',\n                    reqd: true,\n                    default: frappe.datetime.get_today(),\n                    min_date: frappe.datetime.get_today()\n                },\n                {\n                    label: __('Start Time'),\n                    fieldname: 'start_time',\n                    fieldtype: 'Time',\n                    default: room_booking.RoomBooking.helpers.formatTimeForFrontend(slot.start),\n                    reqd: 1,\n                    change: () => this.update_calculations()\n                },\n                {\n                    label: __('Duration (hours)'),\n                    fieldname: 'duration',\n                    fieldtype: 'Float',\n                    default: duration,\n                    reqd: 1,\n                    min: 0.5,\n                    max: 24,\n                    change: () => this.update_end_time()\n                },\n                {\n                    label: __('End Time'),\n                    fieldname: 'end_time',\n                    fieldtype: 'Time',\n                    read_only: true,\n                    reqd: 1\n                },\n                {\n                    label: __('Price per Hour'),\n                    fieldname: 'price_per_hour',\n                    fieldtype: 'Currency',\n                    read_only: true,\n                    default: pricePerHour\n                },\n                {\n                    label: __('Total Price'),\n                    fieldname: 'amount',\n                    fieldtype: 'Currency',\n                    read_only: true,\n                    default: slot.price\n                },\n                {\n                    label: __('Notes'),\n                    fieldname: 'notes',\n                    fieldtype: 'Text Area',\n                    rows: 3\n                }\n            ],\n            primary_action_label: __('Confirm Booking'),\n            primary_action: (values) => this.submit_booking(room, values, onSuccess),\n            secondary_action_label: __('Cancel'),\n            secondary_action: () => this.dialog.hide()\n        });\n\n        this.setup_event_listeners();\n        this.update_end_time(); // \u062D\u0633\u0627\u0628 \u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0646\u0647\u0627\u0626\u064A \u0627\u0644\u0623\u0648\u0644\u064A\n        this.dialog.show();\n    }\n\n    setup_event_listeners() {\n        this.dialog.fields_dict.start_time.$input.on('input', () => {\n            this.validate_time_input('start_time');\n        });\n    }\n\n    validate_time_input(fieldname) {\n        const value = this.dialog.get_value(fieldname);\n        const $input = this.dialog.fields_dict[fieldname].$input;\n        \n        if (!room_booking.RoomBooking.helpers.validateTimeFormat(value)) {\n            $input.addClass('invalid-input');\n            return false;\n        }\n        \n        $input.removeClass('invalid-input');\n        return true;\n    }\n\n    update_end_time() {\n        const duration = parseFloat(this.dialog.get_value('duration')) || 1;\n        const startTime = this.dialog.get_value('start_time');\n        \n        if (!this.validate_time_input('start_time')) return;\n        \n        const [hours, minutes] = startTime.split(':').map(Number);\n        const totalMinutes = hours * 60 + minutes + Math.round(duration * 60);\n        const endHours = Math.floor(totalMinutes / 60) % 24;\n        const endMinutes = totalMinutes % 60;\n        \n        const formattedEndTime = room_booking.RoomBooking.helpers.formatTime(endHours, endMinutes);\n        this.dialog.set_value('end_time', formattedEndTime);\n        this.update_calculations();\n    }\n\n    update_calculations() {\n        const duration = parseFloat(this.dialog.get_value('duration')) || 0;\n        const pricePerHour = parseFloat(this.dialog.get_value('price_per_hour')) || 0;\n        const totalPrice = pricePerHour * duration;\n        \n        this.dialog.set_value('amount', totalPrice);\n    }\n\n    /**\n     * \u0625\u0631\u0633\u0627\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u062C\u0632\n     * @param {object} room - \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641\u0629\n     * @param {object} values - \u0642\u064A\u0645 \u0627\u0644\u0646\u0645\u0648\u0630\u062C\n     * @param {function} [onSuccess] - \u062F\u0627\u0644\u0629 \u0627\u0633\u062A\u062F\u0639\u0627\u0621 \u0639\u0646\u062F \u0627\u0644\u0646\u062C\u0627\u062D\n     */\n    async submit_booking(room, values, onSuccess) {\n        if (!this.validate_time_input('start_time')) {\n            frappe.msgprint(__('Please enter a valid start time in HH:mm format'));\n            return;\n        }\n\n        if (!values.customer) {\n            frappe.msgprint(__('Please select a customer'));\n            return;\n        }\n\n        try {\n            const bookingData = {\n                rental_room: room.name,\n                start_datetime: `${values.date} ${room_booking.RoomBooking.helpers.formatTimeForBackend(values.start_time)}`,\n                end_datetime: `${values.date} ${room_booking.RoomBooking.helpers.formatTimeForBackend(values.end_time)}`,\n                customer_name: values.customer,\n                notes: values.notes || '',\n                amount: values.amount\n            };\n\n            await frappe.call({\n                method: 'room_booking.api.create_booking',\n                args: { bookings: [bookingData] },\n                freeze: true,\n                callback: (r) => {\n                    if (!r.exc) {\n                        frappe.show_alert({\n                            message: __('Booking created successfully'),\n                            indicator: 'green'\n                        });\n                        this.dialog.hide();\n                        if (onSuccess) onSuccess();\n                    }\n                }\n            });\n        } catch (error) {\n            console.error('Booking error:', error);\n            frappe.msgprint({\n                title: __('Booking Failed'),\n                message: __('An error occurred while creating the booking. Please try again.'),\n                indicator: 'red'\n            });\n        }\n    }\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\n/**\n * \u0645\u062C\u0645\u0648\u0639\u0629 \u0623\u062F\u0648\u0627\u062A \u0645\u0633\u0627\u0639\u062F\u0629 \u0644\u0646\u0638\u0627\u0645 \u062D\u062C\u0632 \u0627\u0644\u063A\u0631\u0641\n * @namespace room_booking.RoomBooking.helpers\n */\nroom_booking.RoomBooking.helpers = {\n\n    formatTimeForFrontend(timeStr) {\n        if (!timeStr) return '00:00';\n        try {\n            const [hours, minutes] = String(timeStr).split(':');\n            return `${hours.padStart(2, '0')}:${(minutes || '00').padStart(2, '0')}`;\n        } catch (e) {\n            console.error('Invalid time format:', timeStr);\n            return '00:00';\n        }\n    },\n\n    formatTimeForBackend(timeStr) {\n        if (!timeStr) return '00:00:00';\n        return `${this.formatTimeForFrontend(timeStr)}:00`;\n    },\n    validateTimeFormat(timeStr) {\n        return /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(timeStr);\n    },\n\n    createDateFromTime(timeStr) {\n        if (!timeStr) return null;\n        try {\n            return new Date(`2000-01-01T${timeStr}`);\n        } catch (e) {\n            console.error('Invalid time string:', timeStr);\n            return null;\n        }\n    },\n    formatCurrency: (amount, currency = 'SAR') => {\n\n            return new Intl.NumberFormat('ar-SA', {\n            style: 'currency',\n            currency: currency\n        }).format(amount);\n    },\n\n    // \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u062F\u0629 \u0628\u064A\u0646 \u0648\u0642\u062A\u064A\u0646 \u0628\u062F\u0642\u0629\n    calculateDuration: (start, end) => {\n        const startDate = new Date(`2000-01-01T${start}`);\n        const endDate = new Date(`2000-01-01T${end}`);\n        const diffMs = endDate - startDate;\n        \n        const hours = Math.floor(diffMs / (1000 * 60 * 60));\n        const minutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));\n        \n        return `${hours}:${minutes.toString().padStart(2, '0')}`;\n    },\n\n    // \u0625\u0646\u0634\u0627\u0621 \u0645\u0639\u0631\u0641 \u0641\u0631\u064A\u062F \u0644\u0644\u062D\u062C\u0648\u0632\u0627\u062A\n    generateBookingId: () => {\n        return `booking_${Date.now()}_${Math.floor(Math.random() * 1000)}`;\n    },\n\n    // \u062A\u062D\u0648\u064A\u0644 \u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0644\u062A\u0646\u0633\u064A\u0642 \u0642\u0627\u0628\u0644 \u0644\u0644\u0642\u0631\u0627\u0621\u0629\n    formatDateForDisplay: (dateStr) => {\n        return frappe.datetime.str_to_user(dateStr);\n    },\n\n    // \u062A\u062D\u0645\u064A\u0644 \u0623\u064A\u0642\u0648\u0646\u0627\u062A FontAwesome \u062F\u064A\u0646\u0627\u0645\u064A\u0643\u064A\u0627\u064B\n    loadIcons: (icons) => {\n        const iconLoader = document.createElement('div');\n        iconLoader.style.display = 'none';\n        icons.forEach(icon => {\n            iconLoader.innerHTML += `<i class=\"fa ${icon}\"></i>`;\n        });\n        document.body.appendChild(iconLoader);\n    },\n\n    // \u0639\u0631\u0636 \u0645\u0624\u0634\u0631 \u062A\u062D\u0645\u064A\u0644 \u0645\u062A\u0642\u062F\u0645\n    showLoading: (message = '\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...') => {\n        const loader = $(`\n            <div class=\"custom-loader\">\n                <div class=\"loader-animation\"></div>\n                <p>${message}</p>\n            </div>\n        `);\n        $('body').append(loader);\n        return {\n            hide: () => loader.remove()\n        };\n    }\n\n};", "frappe.provide(\"room_booking.RoomBooking\");\n\nroom_booking.RoomBooking.Application = class {\n    constructor(wrapper) {\n        this.wrapper = $(wrapper).find(\".layout-main-section\");\n        this.page = wrapper.page;\n        \n        // \uD83C\uDF1F \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0630\u0643\u064A\u0629\n        this.state = {\n            currentView: 'room_selection', // room_selection | booking_management\n            selectedRoom: null,\n            selectedSlots: [],\n            bookingCart: [],\n            customer: null,\n            filters: {\n                date: frappe.datetime.get_today(),\n                branch: null,\n                capacity: null\n            },\n            realtimeUpdates: true\n        };\n\n        // \uD83D\uDEE0\uFE0F \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629\n        this.initComponents();\n        this.initRealtime();\n        this.initKeyboardShortcuts();\n        this.render();\n        \n        // \uD83D\uDCE1 \u062A\u0633\u062C\u064A\u0644 \u062E\u062F\u0645\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621\n        this.registerCustomerService();\n    }\n\n    /**\n     * \uD83E\uDDE9 \u062A\u0647\u064A\u0626\u0629 \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629\n     */\n    initComponents() {\n        // \uD83C\uDFE8 \u0645\u0643\u0648\u0646 \u0639\u0631\u0636 \u0627\u0644\u063A\u0631\u0641\n        this.roomExplorer = new room_booking.RoomBooking.RoomExplorer({\n            parent: this.wrapper.find('.room-explorer-container'),\n            onSlotSelect: (room, slot) => this.addToBookingCart(room, slot),\n            onFilterChange: (filters) => this.updateFilters(filters)\n        });\n\n        // \uD83D\uDED2 \u0645\u0643\u0648\u0646 \u0633\u0644\u0629 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A\n        this.bookingCart = new room_booking.RoomBooking.BookingCart({\n            parent: this.wrapper.find('.booking-cart-container'),\n            onCheckout: () => this.initiateCheckout(),\n            onEdit: (bookingId) => this.editBooking(bookingId),\n            onRemove: (bookingId) => this.removeFromCart(bookingId)\n        });\n\n        // \uD83D\uDCB3 \u0646\u0638\u0627\u0645 \u0627\u0644\u062F\u0641\u0639 \u0627\u0644\u0630\u0643\u064A (\u0645\u0633\u062A\u0648\u062D\u0649 \u0645\u0646 POS \u0645\u0639 \u062A\u062D\u0633\u064A\u0646\u0627\u062A)\n        this.paymentProcessor = new room_booking.RoomBooking.PaymentProcessor({\n            onSuccess: (paymentData) => this.finalizeBooking(paymentData),\n            onCancel: () => this.cancelCheckout()\n        });\n\n        // \uD83D\uDCC5 \u0645\u062F\u064A\u0631 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A\n        this.bookingManager = new room_booking.RoomBooking.BookingManager({\n            onBookingUpdate: () => this.refreshData()\n        });\n\n        // \uD83C\uDFA8 \u0646\u0638\u0627\u0645 \u0627\u0644\u0633\u0645\u0627\u062A \u0627\u0644\u0645\u0631\u0626\u064A\u0629\n        this.themeManager = new room_booking.RoomBooking.ThemeManager({\n            themes: ['light', 'dark', 'corporate'],\n            defaultTheme: 'light'\n        });\n    }\n\n    /**\n     * \uD83D\uDDA5\uFE0F \u0639\u0631\u0636 \u0627\u0644\u0648\u0627\u062C\u0647\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629\n     */\n    render() {\n        this.wrapper.html(`\n            <div class=\"room-booking-app\">\n                <!-- \uD83C\uDF9B\uFE0F \u0634\u0631\u064A\u0637 \u0627\u0644\u062A\u062D\u0643\u0645 \u0627\u0644\u0639\u0644\u0648\u064A -->\n                <div class=\"control-panel\">\n                    <div class=\"view-switcher\">\n                        <button class=\"btn btn-view ${this.state.currentView === 'room_selection' ? 'active' : ''}\" \n                                data-view=\"room_selection\">\n                            <i class=\"fa fa-door-open\"></i> ${__('\u0627\u0644\u063A\u0631\u0641')}\n                        </button>\n                        <button class=\"btn btn-view ${this.state.currentView === 'booking_management' ? 'active' : ''}\" \n                                data-view=\"booking_management\">\n                            <i class=\"fa fa-calendar-check\"></i> ${__('\u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A')}\n                        </button>\n                    </div>\n                    <div class=\"quick-actions\">\n                        <button class=\"btn btn-refresh\"><i class=\"fa fa-sync-alt\"></i></button>\n                        <button class=\"btn btn-fullscreen\"><i class=\"fa fa-expand\"></i></button>\n                    </div>\n                </div>\n\n                <!-- \uD83D\uDCC5 \u0641\u0644\u062A\u0631 \u0627\u0644\u062A\u0627\u0631\u064A\u062E -->\n                <div class=\"date-navigator\">\n                    <button class=\"btn btn-prev\"><i class=\"fa fa-chevron-left\"></i></button>\n                    <input type=\"date\" class=\"form-control booking-date\" \n                           value=\"${this.state.filters.date}\">\n                    <button class=\"btn btn-next\"><i class=\"fa fa-chevron-right\"></i></button>\n                </div>\n\n                <!-- \uD83C\uDFE8 \u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0645\u062D\u062A\u0648\u0649 \u0627\u0644\u062F\u064A\u0646\u0627\u0645\u064A\u0643\u064A -->\n                <div class=\"content-area\">\n                    <div class=\"room-explorer-container\" \n                         style=\"${this.state.currentView !== 'room_selection' ? 'display:none' : ''}\"></div>\n                    <div class=\"booking-manager-container\" \n                         style=\"${this.state.currentView !== 'booking_management' ? 'display:none' : ''}\"></div>\n                </div>\n\n                <!-- \uD83D\uDED2 \u0633\u0644\u0629 \u0627\u0644\u062D\u062C\u0648\u0632\u0627\u062A \u0627\u0644\u062C\u0627\u0646\u0628\u064A\u0629 -->\n                <div class=\"booking-cart-container\"></div>\n\n                <!-- \uD83D\uDD14 \u0646\u0638\u0627\u0645 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062A -->\n                <div class=\"notification-center\"></div>\n            </div>\n        `);\n\n        this.bindEvents();\n    }\n\n    /**\n     * \uD83C\uDFAE \u0631\u0628\u0637 \u0627\u0644\u0623\u062D\u062F\u0627\u062B \u0627\u0644\u062A\u0641\u0627\u0639\u0644\u064A\u0629\n     */\n    bindEvents() {\n        // \uD83D\uDD04 \u0623\u062D\u062F\u0627\u062B \u062A\u0628\u062F\u064A\u0644 \u0627\u0644\u0639\u0631\u0636\n        this.wrapper.on('click', '.btn-view', (e) => {\n            const view = $(e.currentTarget).data('view');\n            this.switchView(view);\n        });\n\n        // \uD83D\uDCC5 \u0623\u062D\u062F\u0627\u062B \u062A\u0646\u0642\u0644 \u0627\u0644\u062A\u0627\u0631\u064A\u062E\n        this.wrapper.on('click', '.btn-prev', () => this.navigateDate(-1));\n        this.wrapper.on('click', '.btn-next', () => this.navigateDate(1));\n        this.wrapper.on('change', '.booking-date', (e) => {\n            this.state.filters.date = $(e.target).val();\n            this.refreshData();\n        });\n\n        // \uD83C\uDFAF \u0623\u062D\u062F\u0627\u062B \u0627\u0644\u0627\u062E\u062A\u0635\u0627\u0631\u0627\u062A\n        $(document).on('keydown', this.handleKeyboardShortcuts.bind(this));\n    }\n\n    /**\n     * \uD83D\uDD04 \u062A\u0628\u062F\u064A\u0644 \u0628\u064A\u0646 \u0648\u0627\u062C\u0647\u0627\u062A \u0627\u0644\u0646\u0638\u0627\u0645\n     */\n    switchView(view) {\n        this.state.currentView = view;\n        this.wrapper.find('.content-area > div').hide();\n        this.wrapper.find(`.${view}-container`).show();\n        \n        if (view === 'room_selection') {\n            this.roomExplorer.refresh();\n        } else {\n            this.bookingManager.loadBookings();\n        }\n    }\n\n    /**\n     * \uD83D\uDED2 \u0625\u0636\u0627\u0641\u0629 \u062D\u062C\u0632 \u0644\u0644\u0633\u0644\u0629\n     */\n    addToBookingCart(room, slot) {\n        if (this.isSlotAlreadyAdded(slot)) {\n            this.showNotification(__('\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0647\u0630\u0647 \u0627\u0644\u0641\u062A\u0631\u0629 \u0645\u0633\u0628\u0642\u0627\u064B'), 'warning');\n            return;\n        }\n\n        const bookingItem = {\n            id: this.generateBookingId(),\n            room: room,\n            slot: slot,\n            price: this.calculatePrice(room.price_per_hour, slot.duration),\n            status: 'pending'\n        };\n\n        this.state.bookingCart.push(bookingItem);\n        this.bookingCart.refresh(this.state.bookingCart);\n        this.showNotification(__('\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062D\u062C\u0632 \u0644\u0644\u0633\u0644\u0629'), 'success');\n    }\n\n    /**\n     * \uD83D\uDCB0 \u0628\u062F\u0621 \u0639\u0645\u0644\u064A\u0629 \u0627\u0644\u062F\u0641\u0639\n     */\n    initiateCheckout() {\n        if (this.state.bookingCart.length === 0) {\n            this.showNotification(__('\u0627\u0644\u0633\u0644\u0629 \u0641\u0627\u0631\u063A\u0629\u060C \u0623\u0636\u0641 \u062D\u062C\u0648\u0632\u0627\u062A \u0623\u0648\u0644\u0627\u064B'), 'error');\n            return;\n        }\n\n        const totalAmount = this.state.bookingCart.reduce((sum, item) => sum + item.price, 0);\n        \n        this.paymentProcessor.startPayment({\n            items: this.state.bookingCart,\n            customer: this.state.customer,\n            total: totalAmount\n        });\n    }\n\n    /**\n     * \u2705 \u0625\u062A\u0645\u0627\u0645 \u0627\u0644\u062D\u062C\u0632 \u0627\u0644\u0646\u0627\u062C\u062D\n     */\n    async finalizeBooking(paymentData) {\n        try {\n            const bookingData = {\n                customer: this.state.customer,\n                date: this.state.filters.date,\n                slots: this.state.bookingCart.map(item => ({\n                    room: item.room.name,\n                    start_time: item.slot.start,\n                    end_time: item.slot.end,\n                    amount: item.price\n                })),\n                payment: paymentData\n            };\n\n            const result = await frappe.call({\n                method: 'room_booking.api.create_booking',\n                args: { booking: bookingData },\n                freeze: true\n            });\n\n            if (result.message) {\n                this.showNotification(__('\u062A\u0645 \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u062C\u0632 \u0628\u0646\u062C\u0627\u062D!'), 'success');\n                this.state.bookingCart = [];\n                this.bookingCart.refresh([]);\n                this.bookingManager.loadBookings();\n            }\n        } catch (error) {\n            this.showNotification(__('\u0641\u0634\u0644 \u0641\u064A \u0625\u062A\u0645\u0627\u0645 \u0627\u0644\u062D\u062C\u0632'), 'error');\n            console.error('Booking error:', error);\n        }\n    }\n\n    /**\n     * \uD83C\uDD98 \u0625\u0644\u063A\u0627\u0621 \u0639\u0645\u0644\u064A\u0629 \u0627\u0644\u062F\u0641\u0639\n     */\n    cancelCheckout() {\n        this.showNotification(__('\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0639\u0645\u0644\u064A\u0629 \u0627\u0644\u062F\u0641\u0639'), 'warning');\n    }\n\n    /**\n     * \uD83D\uDD04 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u062A\u0644\u0642\u0627\u0626\u064A\u064B\u0627\n     */\n    initRealtime() {\n        frappe.realtime.on('room_booking_update', (data) => {\n            if (this.state.realtimeUpdates) {\n                this.showNotification(__('\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u063A\u0631\u0641 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B'), 'info');\n                this.roomExplorer.refresh();\n            }\n        });\n    }\n\n    /**\n     * \u2328\uFE0F \u0627\u062E\u062A\u0635\u0627\u0631\u0627\u062A \u0644\u0648\u062D\u0629 \u0627\u0644\u0645\u0641\u0627\u062A\u064A\u062D\n     */\n    initKeyboardShortcuts() {\n        this.shortcuts = {\n            'F5': () => this.refreshData(),\n            'Ctrl+1': () => this.switchView('room_selection'),\n            'Ctrl+2': () => this.switchView('booking_management'),\n            'Ctrl+K': () => this.initiateCheckout()\n        };\n    }\n\n    handleKeyboardShortcuts(e) {\n        const key = e.key;\n        const ctrlKey = e.ctrlKey || e.metaKey;\n\n        // F5 Refresh\n        if (key === 'F5') {\n            e.preventDefault();\n            this.refreshData();\n        }\n\n        // Ctrl + Number (View switching)\n        if (ctrlKey && key === '1') this.switchView('room_selection');\n        if (ctrlKey && key === '2') this.switchView('booking_management');\n        if (ctrlKey && key.toLowerCase() === 'k') this.initiateCheckout();\n    }\n\n    /**\n     * \uD83D\uDCDE \u062E\u062F\u0645\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621 (\u062F\u0639\u0645 \u0641\u0646\u064A \u0645\u0628\u0627\u0634\u0631)\n     */\n    registerCustomerService() {\n        frappe.realtime.on('customer_support_message', (message) => {\n            this.showNotification(`${__('\u0627\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A')}: ${message}`, 'info', 10000);\n        });\n    }\n\n    /**\n     * \uD83D\uDD14 \u0639\u0631\u0636 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062A\n     */\n    showNotification(message, type='info', duration=3000) {\n        const notification = $(`\n            <div class=\"notification ${type}\">\n                <i class=\"fa ${this.getNotificationIcon(type)}\"></i>\n                <span>${message}</span>\n            </div>\n        `);\n        \n        this.wrapper.find('.notification-center').append(notification);\n        notification.fadeIn(200);\n        \n        setTimeout(() => {\n            notification.fadeOut(200, () => notification.remove());\n        }, duration);\n    }\n\n    getNotificationIcon(type) {\n        const icons = {\n            'success': 'fa-check-circle',\n            'error': 'fa-times-circle',\n            'warning': 'fa-exclamation-triangle',\n            'info': 'fa-info-circle'\n        };\n        return icons[type] || 'fa-info-circle';\n    }\n\n    // ... (\u0627\u0644\u062F\u0648\u0627\u0644 \u0627\u0644\u0645\u0633\u0627\u0639\u062F\u0629 \u0627\u0644\u0623\u062E\u0631\u0649)\n};\n\n"],
  "mappings": "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",
  "names": []
}
